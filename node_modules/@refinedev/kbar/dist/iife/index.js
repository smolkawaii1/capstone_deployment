(()=>{var Rn=Object.create;var er=Object.defineProperty;var In=Object.getOwnPropertyDescriptor;var Qn=Object.getOwnPropertyNames;var Tn=Object.getPrototypeOf,Un=Object.prototype.hasOwnProperty;var w=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var Fn=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Wn=(e,t)=>{for(var r in t)er(e,r,{get:t[r],enumerable:!0})},Xt=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Qn(t))!Un.call(e,n)&&n!==r&&er(e,n,{get:()=>t[n],enumerable:!(a=In(t,n))||a.enumerable});return e},Oe=(e,t,r)=>(Xt(e,t,"default"),r&&Xt(r,t,"default")),et=(e,t,r)=>(r=e!=null?Rn(Tn(e)):{},Xt(t||!e||!e.__esModule?er(r,"default",{value:e,enumerable:!0}):r,e));var Rr=Fn((Ai,qn)=>{var Bn=Object.create,Wt=Object.defineProperty,Kn=Object.getOwnPropertyDescriptor,zn=Object.getOwnPropertyNames,Hn=Object.getPrototypeOf,jn=Object.prototype.hasOwnProperty,_n=(e,t)=>{for(var r in t)Wt(e,r,{get:t[r],enumerable:!0})},ka=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of zn(t))!jn.call(e,n)&&n!==r&&Wt(e,n,{get:()=>t[n],enumerable:!(a=Kn(t,n))||a.enumerable});return e},D=(e,t,r)=>(r=e!=null?Bn(Hn(e)):{},ka(t||!e||!e.__esModule?Wt(r,"default",{value:e,enumerable:!0}):r,e)),Vn=e=>ka(Wt({},"__esModule",{value:!0}),e),Na={};_n(Na,{AuthPage:()=>di,Authenticated:()=>Li,CanAccess:()=>xi,ErrorComponent:()=>oi,GitHubBanner:()=>Mi,LayoutWrapper:()=>Ei,LoginPage:()=>wn,ReadyPage:()=>Ln,Refine:()=>Pi,ResourceContext:()=>St,RouteChangeHandler:()=>xn,UndoableQueue:()=>Sn,WelcomePage:()=>ci,createTreeView:()=>Eo,file2Base64:()=>vo,getDefaultFilter:()=>mo,getDefaultSortOrder:()=>co,getNextPageParam:()=>Va,getPreviousPageParam:()=>Ga,handleUseParams:()=>po,importCSVMapper:()=>Ua,legacyResourceTransform:()=>Ya,matchResourceFromRoute:()=>Po,parseTableParams:()=>wr,parseTableParamsFromQuery:()=>so,pickNotDeprecated:()=>S,routeGenerator:()=>Ha,setInitialFilters:()=>gr,setInitialSorters:()=>yr,stringifyTableParams:()=>pr,unionFilters:()=>Ct,unionSorters:()=>fr,useActiveAuthProvider:()=>ae,useApiUrl:()=>Fo,useAuthenticated:()=>ao,useBack:()=>hn,useBreadcrumb:()=>ri,useCan:()=>En,useCanWithoutCache:()=>Bl,useCancelNotification:()=>gt,useCheckError:()=>no,useCreate:()=>Mr,useCreateMany:()=>tn,useCustom:()=>Bo,useCustomMutation:()=>zo,useDataProvider:()=>le,useDelete:()=>Oo,useDeleteMany:()=>Uo,useExport:()=>Ll,useForgotPassword:()=>Ia,useForm:()=>Sl,useGetIdentity:()=>Oa,useGetLocale:()=>fl,useGetToPath:()=>$r,useGo:()=>Le,useHandleNotification:()=>ye,useImport:()=>kl,useInfiniteList:()=>Vo,useInvalidate:()=>lt,useIsAuthenticated:()=>Er,useIsExistAuthentication:()=>Ta,useLink:()=>zt,useList:()=>xr,useLiveMode:()=>nn,useLog:()=>ot,useLogList:()=>Zl,useLogin:()=>Pr,useLogout:()=>vr,useMany:()=>Ja,useMenu:()=>ni,useModal:()=>Nl,useMutationMode:()=>ht,useNavigation:()=>Se,useNotification:()=>je,useOnError:()=>ge,useOne:()=>qr,useParse:()=>mn,useParsed:()=>we,usePermissions:()=>Zn,usePublish:()=>nt,useRedirectionAfterSubmission:()=>yn,useRefineContext:()=>Ar,useRegister:()=>Ra,useResource:()=>z,useResourceSubscription:()=>Lt,useResourceWithRoute:()=>Kt,useRouterContext:()=>ie,useRouterType:()=>ee,useSelect:()=>Hl,useSetLocale:()=>pl,useShow:()=>ql,useSubscription:()=>Jo,useSyncWithLocation:()=>gn,useTable:()=>_l,useTitle:()=>Pl,useToPath:()=>$l,useTranslate:()=>j,useUpdate:()=>en,useUpdateMany:()=>Qo,useUpdatePassword:()=>Qa,useWarnAboutChange:()=>Nr,userFriendlyResourceName:()=>Lr});qn.exports=Vn(Na);var tt=D(w("react")),ft=D(w("react")),Aa=ft.default.createContext({}),Gn=({children:e,isProvided:t,...r})=>{let{replace:a}=Se(),n=async f=>{var d;try{return await((d=r.login)==null?void 0:d.call(r,f))}catch(m){return Promise.reject(m)}},l=async f=>{var d;try{return await((d=r.register)==null?void 0:d.call(r,f))}catch(m){return Promise.reject(m)}},o=async f=>{var d;try{return await((d=r.logout)==null?void 0:d.call(r,f))}catch(m){return Promise.reject(m)}},s=async f=>{var d;try{return await((d=r.checkAuth)==null?void 0:d.call(r,f)),Promise.resolve()}catch(m){return m!=null&&m.redirectPath&&a(m.redirectPath),Promise.reject(m)}};return ft.default.createElement(Aa.Provider,{value:{...r,login:n,logout:o,checkAuth:s,register:l,isProvided:t}},e)},$a=ft.default.createContext({}),Yn=({children:e,isProvided:t,...r})=>{let a=async d=>{var m;try{return await((m=r.login)==null?void 0:m.call(r,d))}catch(p){return console.warn("Unhandled Error in login: refine always expects a resolved promise.",p),Promise.reject(p)}},n=async d=>{var m;try{return await((m=r.register)==null?void 0:m.call(r,d))}catch(p){return console.warn("Unhandled Error in register: refine always expects a resolved promise.",p),Promise.reject(p)}},l=async d=>{var m;try{return await((m=r.logout)==null?void 0:m.call(r,d))}catch(p){return console.warn("Unhandled Error in logout: refine always expects a resolved promise.",p),Promise.reject(p)}},o=async d=>{var m;try{let p=await((m=r.check)==null?void 0:m.call(r,d));return Promise.resolve(p)}catch(p){return console.warn("Unhandled Error in check: refine always expects a resolved promise.",p),Promise.reject(p)}},s=async d=>{var m;try{let p=await((m=r.forgotPassword)==null?void 0:m.call(r,d));return Promise.resolve(p)}catch(p){return console.warn("Unhandled Error in forgotPassword: refine always expects a resolved promise.",p),Promise.reject(p)}},f=async d=>{var m;try{let p=await((m=r.updatePassword)==null?void 0:m.call(r,d));return Promise.resolve(p)}catch(p){return console.warn("Unhandled Error in updatePassword: refine always expects a resolved promise.",p),Promise.reject(p)}};return ft.default.createElement($a.Provider,{value:{...r,login:a,logout:l,check:o,register:n,forgotPassword:s,updatePassword:f,isProvided:t}},e)},Ee=()=>ft.default.useContext(Aa),Me=()=>ft.default.useContext($a),Hr=w("@tanstack/react-query");function Zn({v3LegacyAuthProviderCompatible:e=!1,options:t}={}){let{getPermissions:r}=Ee(),{getPermissions:a}=Me(),n=(0,Hr.useQuery)(["usePermissions"],a!=null?a:()=>Promise.resolve(void 0),{enabled:!e&&!!a,...e?{}:t}),l=(0,Hr.useQuery)(["usePermissions","v3LegacyAuthProviderCompatible"],r!=null?r:()=>Promise.resolve(void 0),{enabled:e&&!!r,...e?t:{}});return e?l:n}var jr=w("@tanstack/react-query");function Oa({v3LegacyAuthProviderCompatible:e=!1,queryOptions:t}={}){let{getUserIdentity:r}=Ee(),{getIdentity:a}=Me(),n=(0,jr.useQuery)(["getUserIdentity"],a!=null?a:()=>Promise.resolve({}),{enabled:!e&&!!a,retry:!1,...e===!0?{}:t}),l=(0,jr.useQuery)(["getUserIdentity","v3LegacyAuthProviderCompatible"],r!=null?r:()=>Promise.resolve({}),{enabled:e&&!!r,retry:!1,...e?t:{}});return e?l:n}var _r=w("@tanstack/react-query"),Jn=w("@tanstack/react-query"),br=()=>{let e=(0,Jn.useQueryClient)();return()=>{e.invalidateQueries(["useAuthenticated"]),e.invalidateQueries(["getUserIdentity"]),e.invalidateQueries(["usePermissions"])}};function vr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=br(),a=ee(),n=Le(),{push:l}=Se(),{open:o,close:s}=je(),{logout:f}=Ee(),{logout:d}=Me(),m=(0,_r.useMutation)(["useLogout"],d,{onSuccess:(E,c)=>{let{success:v,error:u,redirectTo:i}=E,{redirectPath:h}=c!=null?c:{},C=h!=null?h:i;v&&(s==null||s("useLogout-error")),(u||!v)&&(o==null||o(tr(u))),C!==!1&&(a==="legacy"?l(C!=null?C:"/login"):C&&n({to:C})),r()},onError:E=>{o==null||o(tr(E))},...e===!0?{}:t}),p=(0,_r.useMutation)(["useLogout","v3LegacyAuthProviderCompatible"],f,{onSuccess:(E,c)=>{var v;let u=(v=c==null?void 0:c.redirectPath)!=null?v:E;if(u!==!1){if(u){a==="legacy"?l(u):n({to:u});return}a==="legacy"?l("/login"):n({to:"/login"}),r()}},onError:E=>{o==null||o(tr(E))},...e?t:{}});return e?p:m}var tr=e=>({key:"useLogout-error",type:"error",message:(e==null?void 0:e.name)||"Logout Error",description:(e==null?void 0:e.message)||"Something went wrong during logout"}),Vr=w("@tanstack/react-query"),Xn=D(w("qs")),eo=D(w("react"));function Pr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=br(),a=ee(),n=Le(),{replace:l}=Se(),o=we(),{useLocation:s}=ie(),{search:f}=s(),{close:d,open:m}=je(),{login:p}=Ee(),{login:E}=Me(),c=eo.default.useMemo(()=>{var i;return a==="legacy"?Xn.default.parse(f,{ignoreQueryPrefix:!0}).to:(i=o.params)==null?void 0:i.to},[a,o.params,f]),v=(0,Vr.useMutation)(["useLogin"],E,{onSuccess:({success:i,redirectTo:h,error:C})=>{i&&(d==null||d("login-error")),(C||!i)&&(m==null||m(rr(C))),c&&i?a==="legacy"?l(c):n({to:c,type:"replace"}):h?a==="legacy"?l(h):n({to:h,type:"replace"}):a==="legacy"&&l("/"),setTimeout(()=>{r()})},onError:i=>{m==null||m(rr(i))},...e===!0?{}:t}),u=(0,Vr.useMutation)(["useLogin","v3LegacyAuthProviderCompatible"],p,{onSuccess:i=>{c&&l(c),i!==!1&&!c&&(typeof i=="string"?a==="legacy"?l(i):n({to:i,type:"replace"}):a==="legacy"?l("/"):n({to:"/",type:"replace"})),d==null||d("login-error"),setTimeout(()=>{r()})},onError:i=>{m==null||m(rr(i))},...e?t:{}});return e?u:v}var rr=e=>({message:(e==null?void 0:e.name)||"Login Error",description:(e==null?void 0:e.message)||"Invalid credentials",key:"login-error",type:"error"}),Gr=w("@tanstack/react-query");function Ra({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=br(),a=ee(),n=Le(),{replace:l}=Se(),{register:o}=Ee(),{register:s}=Me(),{close:f,open:d}=je(),m=(0,Gr.useMutation)(["useRegister"],s,{onSuccess:({success:E,redirectTo:c,error:v})=>{E&&(f==null||f("register-error")),(v||!E)&&(d==null||d(ar(v))),c?a==="legacy"?l(c):n({to:c,type:"replace"}):a==="legacy"&&l("/"),r()},onError:E=>{d==null||d(ar(E))},...e===!0?{}:t}),p=(0,Gr.useMutation)(["useRegister","v3LegacyAuthProviderCompatible"],o,{onSuccess:E=>{E!==!1&&(E?a==="legacy"?l(E):n({to:E,type:"replace"}):a==="legacy"?l("/"):n({to:"/",type:"replace"}),f==null||f("register-error")),r()},onError:E=>{d==null||d(ar(E))},...e?t:{}});return e?p:m}var ar=e=>({message:(e==null?void 0:e.name)||"Register Error",description:(e==null?void 0:e.message)||"Error while registering",key:"register-error",type:"error"}),Yr=w("@tanstack/react-query");function Ia({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=ee(),a=Le(),{replace:n}=Se(),{forgotPassword:l}=Ee(),{forgotPassword:o}=Me(),{close:s,open:f}=je(),d=(0,Yr.useMutation)(["useForgotPassword"],o,{onSuccess:({success:p,redirectTo:E,error:c})=>{p&&(s==null||s("forgot-password-error")),(c||!p)&&(f==null||f(nr(c))),E&&(r==="legacy"?n(E):a({to:E,type:"replace"}))},onError:p=>{f==null||f(nr(p))},...e===!0?{}:t}),m=(0,Yr.useMutation)(["useForgotPassword","v3LegacyAuthProviderCompatible"],l,{onSuccess:p=>{p!==!1&&p&&(r==="legacy"?n(p):a({to:p,type:"replace"})),s==null||s("forgot-password-error")},onError:p=>{f==null||f(nr(p))},...e?t:{}});return e?m:d}var nr=e=>({message:(e==null?void 0:e.name)||"Forgot Password Error",description:(e==null?void 0:e.message)||"Error while resetting password",key:"forgot-password-error",type:"error"}),to=D(w("react")),Zr=w("@tanstack/react-query"),ro=D(w("qs"));function Qa({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=ee(),a=Le(),{replace:n}=Se(),{updatePassword:l}=Ee(),{updatePassword:o}=Me(),{close:s,open:f}=je(),d=we(),{useLocation:m}=ie(),{search:p}=m(),E=to.default.useMemo(()=>{var u;if(r==="legacy"){let i=ro.default.parse(p,{ignoreQueryPrefix:!0});return i!=null?i:{}}else return(u=d.params)!=null?u:{}},[p,d,r]),c=(0,Zr.useMutation)(["useUpdatePassword"],async u=>o==null?void 0:o({...E,...u}),{onSuccess:({success:u,redirectTo:i,error:h})=>{u&&(s==null||s("update-password-error")),(h||!u)&&(f==null||f(or(h))),i&&(r==="legacy"?n(i):a({to:i,type:"replace"}))},onError:u=>{f==null||f(or(u))},...e===!0?{}:t}),v=(0,Zr.useMutation)(["useUpdatePassword","v3LegacyAuthProviderCompatible"],async u=>l==null?void 0:l({...E,...u}),{onSuccess:u=>{u!==!1&&u&&(r==="legacy"?n(u):a({to:u,type:"replace"})),s==null||s("update-password-error")},onError:u=>{f==null||f(or(u))},...e?t:{}});return e?v:c}var or=e=>({message:(e==null?void 0:e.name)||"Update Password Error",description:(e==null?void 0:e.message)||"Error while updating password",key:"update-password-error",type:"error"}),Jr=w("@tanstack/react-query");function Er({v3LegacyAuthProviderCompatible:e=!1,params:t}={}){let{checkAuth:r}=Ee(),{check:a}=Me(),n=(0,Jr.useQuery)(["useAuthenticated",t],async()=>{var o;return(o=await(a==null?void 0:a(t)))!=null?o:{}},{retry:!1,enabled:!e}),l=(0,Jr.useQuery)(["useAuthenticated","v3LegacyAuthProviderCompatible",t],async()=>{var o;return(o=await(r==null?void 0:r(t)))!=null?o:{}},{retry:!1,enabled:e});return e?l:n}var ao=Er,Xr=w("@tanstack/react-query");function ge({v3LegacyAuthProviderCompatible:e=!1}={}){let t=ee(),r=Le(),{replace:a}=Se(),{checkError:n}=Ee(),{onError:l}=Me(),{mutate:o}=vr({v3LegacyAuthProviderCompatible:Boolean(e)}),{mutate:s}=vr({v3LegacyAuthProviderCompatible:Boolean(e)}),f=(0,Xr.useMutation)(["useCheckError"],l,{onSuccess:({logout:m,redirectTo:p})=>{if(m){s({redirectPath:p});return}if(p){t==="legacy"?a(p):r({to:p,type:"replace"});return}}}),d=(0,Xr.useMutation)(["useCheckError","v3LegacyAuthProviderCompatible"],n,{onError:m=>{o({redirectPath:m})}});return e?d:f}var no=ge,Ta=()=>{let{isProvided:e}=Ee(),{isProvided:t}=Me();return Boolean(t||e)},oo=w("@tanstack/react-query"),lr=e=>e/1e3,lo=D(w("lodash/zip")),io=D(w("lodash/fromPairs")),Ua=(e,t=r=>r)=>{let[r,...a]=e;return a.map(n=>(0,io.default)((0,lo.default)(r,n))).map((n,l,o)=>t.call(void 0,n,l,o))},ea=D(w("pluralize")),Cr=D(w("qs")),Fa=D(w("lodash/unionWith")),Wa=D(w("lodash/differenceWith")),uo=D(w("warn-once")),wr=e=>{var t;let{current:r,pageSize:a,sorter:n,sorters:l,filters:o}=Cr.default.parse(e.substring(1));return{parsedCurrent:r&&Number(r),parsedPageSize:a&&Number(a),parsedSorter:(t=S(l,n))!=null?t:[],parsedFilters:o!=null?o:[]}},so=e=>{let t=Cr.default.stringify(e);return wr(`/${t}`)},pr=e=>{let t={skipNulls:!0,arrayFormat:"indices",encode:!1},{pagination:r,sorter:a,sorters:n,filters:l,...o}=e;return Cr.default.stringify({...o,...r||{},sorters:S(n,a),filters:l},t)},Ba=(e,t)=>e.operator!=="and"&&e.operator!=="or"&&t.operator!=="and"&&t.operator!=="or"?("field"in e?e.field:void 0)==("field"in t?t.field:void 0)&&e.operator==t.operator:("key"in e?e.key:void 0)==("key"in t?t.key:void 0)&&e.operator==t.operator,Ka=(e,t)=>e.field==t.field,Ct=(e,t,r=[])=>(t.filter(a=>(a.operator==="or"||a.operator==="and")&&!a.key).length>1&&(0,uo.default)(!0,`[conditionalFilters]: You have created multiple Conditional Filters at the top level, this requires the key parameter. 
For more information, see https://refine.dev/docs/advanced-tutorials/data-provider/handling-filters/#top-level-multiple-conditional-filters-usage`),(0,Fa.default)(e,t,r,Ba).filter(a=>a.value!==void 0&&a.value!==null&&(a.operator!=="or"||a.operator==="or"&&a.value.length!==0)&&(a.operator!=="and"||a.operator==="and"&&a.value.length!==0))),fr=(e,t)=>(0,Fa.default)(e,t,Ka).filter(r=>r.order!==void 0&&r.order!==null),gr=(e,t)=>[...(0,Wa.default)(t,e,Ba),...e],yr=(e,t)=>[...(0,Wa.default)(t,e,Ka),...e],co=(e,t)=>{if(!t)return;let r=t.find(a=>a.field===e);if(r)return r.order},mo=(e,t,r="eq")=>{let a=t==null?void 0:t.find(n=>{if(n.operator!=="or"&&n.operator!=="and"&&"field"in n){let{operator:l,field:o}=n;return o===e&&l===r}});if(a)return a.value||[]},vo=e=>new Promise((t,r)=>{let a=new FileReader,n=()=>{a.result&&(a.removeEventListener("load",n,!1),t(a.result))};a.addEventListener("load",n,!1),a.readAsDataURL(e.originFileObj),a.onerror=l=>(a.removeEventListener("load",n,!1),r(l))}),Lr=(e="",t)=>{let r=Qt(e);return t==="singular"?ea.default.singular(r):ea.default.plural(r)},po=(e={})=>e!=null&&e.id?{...e,id:decodeURIComponent(e.id)}:e,S=(...e)=>e.find(t=>typeof t<"u"),Ce=(e,t,r,a)=>{let n=t||"default",l={all:[n],resourceAll:[n,e||""],list:o=>[...l.resourceAll,"list",{...o,...S(r,a)||{}}],many:o=>[...l.resourceAll,"getMany",o&&o.map(String),{...S(r,a)||{}}].filter(s=>s!==void 0),detail:o=>[...l.resourceAll,"detail",o==null?void 0:o.toString(),{...S(r,a)||{}}],logList:o=>["logList",e,o,a].filter(s=>s!==void 0)};return l},fo=(e,t)=>!e||!t?!1:!!e.find(r=>r===t),Sr=e=>e.startsWith(":"),pt=e=>e.split("/").filter(t=>t!==""),go=(e,t)=>{let r=pt(e),a=pt(t);return r.length===a.length},Qe=e=>e.replace(/^\/|\/$/g,""),yo=(e,t)=>{let r=Qe(e),a=Qe(t);if(!go(r,a))return!1;let n=pt(r);return pt(a).every((l,o)=>Sr(l)||l===n[o])},ho=(e,t,r)=>{let a=Qe(r||""),n=`${a}${a?"/":""}${e}`;return t==="list"?n=`${n}`:t==="create"?n=`${n}/create`:t==="edit"?n=`${n}/edit/:id`:t==="show"?n=`${n}/show/:id`:t==="clone"&&(n=`${n}/clone/:id`),`/${n.replace(/^\//,"")}`},ze=(e,t)=>{var r,a;let n=S((r=e.meta)==null?void 0:r.parent,(a=e.options)==null?void 0:a.parent,e.parentName);if(!n)return;let l=t.find(o=>{var s;return((s=o.identifier)!=null?s:o.name)===n});return l!=null?l:{name:n}},za=(e,t,r)=>{let a=[],n=ze(e,t);for(;n;)a.push(n),n=ze(n,t);if(a.length!==0)return`/${a.reverse().map(l=>{var o,s;let f=r&&(s=(o=l.options)==null?void 0:o.route)!=null?s:l.name;return Qe(f)}).join("/")}`},fe=(e,t,r)=>{let a=[],n=["list","show","edit","create","clone"],l=za(e,t,r);return n.forEach(o=>{var s,f,d,m;let p=r&&o==="clone"?e.create:e[o],E;typeof p=="function"||r?E=ho(r&&(m=(d=(s=e.meta)==null?void 0:s.route)!=null?d:(f=e.options)==null?void 0:f.route)!=null?m:e.name,o,r?l:void 0):typeof p=="string"?E=p:typeof p=="object"&&(E=p.path),E&&a.push({action:o,resource:e,route:`/${E.replace(/^\//,"")}`})}),a},bo=e=>{var t,r;if(e.length===0)return;if(e.length===1)return e[0];let a=e.map(o=>({...o,splitted:pt(Qe(o.route))})),n=(r=(t=a[0])==null?void 0:t.splitted.length)!=null?r:0,l=[...a];for(let o=0;o<n;o++){let s=l.filter(f=>!Sr(f.splitted[o]));if(s.length!==0){if(s.length===1){l=s;break}l=s}}return l[0]},Po=(e,t)=>{let r=t.flatMap(n=>fe(n,t)).filter(n=>yo(e,n.route)),a=bo(r);return{found:!!a,resource:a==null?void 0:a.resource,action:a==null?void 0:a.action,matchedRoute:a==null?void 0:a.route}},Ha=(e,t)=>{var r,a,n;let l,o=za(e,t,!0);if(o){let s=S(e.meta,e.options);l=`${o}/${(r=s==null?void 0:s.route)!=null?r:e.name}`}else l=(n=(a=e.options)==null?void 0:a.route)!=null?n:e.name;return`/${l.replace(/^\//,"")}`},Eo=e=>{var t,r,a;let n=[],l={},o={},s,f;for(let d=0;d<e.length;d++){s=e[d];let m=(a=(r=s.route)!=null?r:(t=S(s==null?void 0:s.meta,s.options))==null?void 0:t.route)!=null?a:"";l[m]=s,l[m].children=[],o[s.name]=s,o[s.name].children=[]}for(let d in l)l.hasOwnProperty(d)&&(f=l[d],f.parentName&&o[f.parentName]?o[f.parentName].children.push(f):n.push(f));return n},Qt=e=>(e=e.replace(/([a-z]{1})([A-Z]{1})/g,"$1-$2"),e=e.replace(/([A-Z]{1})([A-Z]{1})([a-z]{1})/g,"$1-$2$3"),e=e.toLowerCase().replace(/[_-]+/g," ").replace(/\s{2,}/g," ").trim(),e=e.charAt(0).toUpperCase()+e.slice(1),e),ja=D(w("react")),Co=D(w("react")),_a=({children:e})=>Co.default.createElement("div",null,e),Re={mutationMode:"pessimistic",syncWithLocation:!1,undoableTimeout:5e3,warnWhenUnsavedChanges:!1,liveMode:"off",redirect:{afterCreate:"list",afterClone:"list",afterEdit:"list"}},He=ja.default.createContext({hasDashboard:!1,mutationMode:"pessimistic",warnWhenUnsavedChanges:!1,syncWithLocation:!1,undoableTimeout:5e3,Title:void 0,Sider:void 0,Header:void 0,Footer:void 0,Layout:_a,OffLayoutArea:void 0,liveMode:"off",onLiveEvent:void 0,options:Re}),wo=({hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:a,undoableTimeout:n,children:l,DashboardPage:o,Title:s,Layout:f=_a,Header:d,Sider:m,Footer:p,OffLayoutArea:E,LoginPage:c=wn,catchAll:v,liveMode:u="off",onLiveEvent:i,options:h})=>ja.default.createElement(He.Provider,{value:{hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:a,Title:s,undoableTimeout:n,Layout:f,Header:d,Sider:m,Footer:p,OffLayoutArea:E,DashboardPage:o,LoginPage:c,catchAll:v,liveMode:u,onLiveEvent:i,options:h}},l),Lo=({options:e,disableTelemetry:t,liveMode:r,mutationMode:a,reactQueryClientConfig:n,reactQueryDevtoolConfig:l,syncWithLocation:o,undoableTimeout:s,warnWhenUnsavedChanges:f}={})=>{var d,m,p,E,c,v,u,i,h,C,b,y,g,P,x,L,q,M,N,Q,O,A,R,k;let $={breadcrumb:e==null?void 0:e.breadcrumb,mutationMode:(m=(d=e==null?void 0:e.mutationMode)!=null?d:a)!=null?m:Re.mutationMode,undoableTimeout:(E=(p=e==null?void 0:e.undoableTimeout)!=null?p:s)!=null?E:Re.undoableTimeout,syncWithLocation:(v=(c=e==null?void 0:e.syncWithLocation)!=null?c:o)!=null?v:Re.syncWithLocation,warnWhenUnsavedChanges:(i=(u=e==null?void 0:e.warnWhenUnsavedChanges)!=null?u:f)!=null?i:Re.warnWhenUnsavedChanges,liveMode:(C=(h=e==null?void 0:e.liveMode)!=null?h:r)!=null?C:Re.liveMode,redirect:{afterCreate:(y=(b=e==null?void 0:e.redirect)==null?void 0:b.afterCreate)!=null?y:Re.redirect.afterCreate,afterClone:(P=(g=e==null?void 0:e.redirect)==null?void 0:g.afterClone)!=null?P:Re.redirect.afterClone,afterEdit:(L=(x=e==null?void 0:e.redirect)==null?void 0:x.afterEdit)!=null?L:Re.redirect.afterEdit}},I=(M=(q=e==null?void 0:e.disableTelemetry)!=null?q:t)!=null?M:!1,V={clientConfig:(O=(Q=(N=e==null?void 0:e.reactQuery)==null?void 0:N.clientConfig)!=null?Q:n)!=null?O:{},devtoolConfig:(k=(R=(A=e==null?void 0:e.reactQuery)==null?void 0:A.devtoolConfig)!=null?R:l)!=null?k:{}};return{optionsWithDefaults:$,disableTelemetryWithDefault:I,reactQueryWithDefaults:V}},So=({redirectFromProps:e,action:t,redirectOptions:r})=>{if(e||e===!1)return e;switch(t){case"clone":return r.afterClone;case"create":return r.afterCreate;case"edit":return r.afterEdit;default:return!1}},ta=async(e,t,r)=>{let a=[];for(let[n,l]of e.entries())try{let o=await l();a.push(t(o,n))}catch(o){a.push(r(o,n))}return a},X=(e,t=[],r=!1)=>{if(!!e)return r?t.find(n=>{var l;return Qe((l=n.route)!=null?l:"")===Qe(e)})||t.find(n=>n.name===e):t.find(a=>{var n;return((n=a.identifier)!=null?n:a.name)===e})},T=(e,t,r)=>{if(t)return t;let a=X(e,r),n=S(a==null?void 0:a.meta,a==null?void 0:a.options);return n!=null&&n.dataProviderName?n.dataProviderName:"default"},Bt=async e=>({data:(await Promise.all(e)).map(t=>t.data)}),Va=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.next)return r.next;let a=(t==null?void 0:t.current)||1,n=(t==null?void 0:t.pageSize)||10,l=Math.ceil((e.total||0)/n);return a<l?Number(a)+1:void 0},Ga=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.prev)return r.prev;let a=(t==null?void 0:t.current)||1;return a===1?void 0:a-1},Ya=e=>{let t=[];return e==null||e.forEach(r=>{var a;t.push({...r,label:(a=r.options)==null?void 0:a.label,route:Ha(r,e),canCreate:!!r.create,canEdit:!!r.edit,canShow:!!r.show,canDelete:r.canDelete})}),t},xo=e=>pt(Qe(e)).flatMap(t=>Sr(t)?[t.slice(1)]:[]),qo=(e,t={},r={})=>e.reduce((a,n)=>{var l;let o=r[n]||((l=t.params)==null?void 0:l[n])||(n==="id"?t.id:void 0)||(n==="action"?t.action:void 0)||(n==="resource"?t.resource:void 0);return typeof o<"u"&&(a[n]=o),a},{}),Pe=(e,t={},r={})=>{let a=xo(e),n=qo(a,t,r);return e.replace(/:([^\/]+)/g,(l,o)=>{let s=n[o];return typeof s<"u"?`${s}`:l})},ae=()=>{let e=Ee(),t=Me();return t.isProvided?{isLegacy:!1,...t}:e.isProvided?{isLegacy:!0,...e,check:e.checkAuth,onError:e.checkError,getIdentity:e.getUserIdentity}:null},Za=({hasPagination:e,pagination:t,configPagination:r}={})=>{var a,n,l;let o=e===!1?"off":"server",s=(a=t==null?void 0:t.mode)!=null?a:o,f=(n=S(t==null?void 0:t.current,r==null?void 0:r.current))!=null?n:1,d=(l=S(t==null?void 0:t.pageSize,r==null?void 0:r.pageSize))!=null?l:10;return{current:f,pageSize:d,mode:s}},xr=({resource:e,config:t,filters:r,hasPagination:a,pagination:n,sorters:l,queryOptions:o,successNotification:s,errorNotification:f,meta:d,metaData:m,liveMode:p,onLiveEvent:E,liveParams:c,dataProviderName:v})=>{let{resources:u}=z(),i=le(),h=j(),C=ae(),{mutate:b}=ge({v3LegacyAuthProviderCompatible:Boolean(C==null?void 0:C.isLegacy)}),y=ye(),g=T(e,v,u),P=S(d,m),x=S(r,t==null?void 0:t.filters),L=S(l,t==null?void 0:t.sort),q=S(a,t==null?void 0:t.hasPagination),M=Za({pagination:n,configPagination:t==null?void 0:t.pagination,hasPagination:q}),N=M.mode==="server",Q={meta:P,metaData:P,filters:x,hasPagination:N,pagination:M,sorters:L,config:{...t,sort:L}},O=(o==null?void 0:o.enabled)===void 0||(o==null?void 0:o.enabled)===!0,A=Ce(e,g,P,P),{getList:R}=i(g);return Lt({resource:e,types:["*"],params:{meta:P,metaData:P,pagination:M,hasPagination:N,sort:L,sorters:L,filters:x,subscriptionType:"useList",...c},channel:`resources/${e}`,enabled:O,liveMode:p,onLiveEvent:E}),(0,oo.useQuery)(A.list({filters:x,hasPagination:N,...N&&{pagination:M},...l&&{sorters:l},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}),({queryKey:k,pageParam:$,signal:I})=>R({resource:e,pagination:M,hasPagination:N,filters:x,sort:L,sorters:L,meta:{...P||{},queryContext:{queryKey:k,pageParam:$,signal:I}},metaData:{...P||{},queryContext:{queryKey:k,pageParam:$,signal:I}}}),{...o,enabled:typeof(o==null?void 0:o.enabled)<"u"?o==null?void 0:o.enabled:!!e,select:k=>{var $;let I=k,{current:V,mode:te,pageSize:U}=M;return te==="client"&&(I={...I,data:I.data.slice((V-1)*U,V*U),total:I.total}),o!=null&&o.select?($=o==null?void 0:o.select)==null?void 0:$.call(o,I):I},onSuccess:k=>{var $;($=o==null?void 0:o.onSuccess)==null||$.call(o,k);let I=typeof s=="function"?s(k,Q,e):s;y(I)},onError:k=>{var $;b(k),($=o==null?void 0:o.onError)==null||$.call(o,k);let I=typeof f=="function"?f(k,Q,e):f;y(I,{key:`${e}-useList-notification`,message:h("notifications.error",{statusCode:k.statusCode},`Error (status code: ${k.statusCode})`),description:k.message,type:"error"})}})},Mo=w("@tanstack/react-query"),qr=({resource:e,id:t,queryOptions:r,successNotification:a,errorNotification:n,meta:l,metaData:o,liveMode:s,onLiveEvent:f,liveParams:d,dataProviderName:m})=>{let{resources:p}=z(),E=le(),c=Ce(e,T(e,m,p),S(l,o),S(l,o)),{getOne:v}=E(T(e,m,p)),u=j(),i=ae(),{mutate:h}=ge({v3LegacyAuthProviderCompatible:Boolean(i==null?void 0:i.isLegacy)}),C=ye();return Lt({resource:e,types:["*"],channel:`resources/${e}`,params:{ids:t?[t]:[],id:t,meta:S(l,o),metaData:S(l,o),subscriptionType:"useOne",...d},enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof e<"u"&&typeof t<"u",liveMode:s,onLiveEvent:f}),(0,Mo.useQuery)(c.detail(t),({queryKey:b,pageParam:y,signal:g})=>v({resource:e,id:t,meta:{...S(l,o)||{},queryContext:{queryKey:b,pageParam:y,signal:g}},metaData:{...S(l,o)||{},queryContext:{queryKey:b,pageParam:y,signal:g}}}),{...r,enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof t<"u",onSuccess:b=>{var y;(y=r==null?void 0:r.onSuccess)==null||y.call(r,b);let g=typeof a=="function"?a(b,{id:t,...S(l,o)||{}},e):a;C(g)},onError:b=>{var y;h(b),(y=r==null?void 0:r.onError)==null||y.call(r,b);let g=typeof n=="function"?n(b,{id:t,...S(l,o)||{}},e):n;C(g,{key:`${t}-${e}-getOne-notification`,message:u("notifications.error",{statusCode:b.statusCode},`Error (status code: ${b.statusCode})`),description:b.message,type:"error"})}})},Do=w("@tanstack/react-query"),Ja=({resource:e,ids:t,queryOptions:r,successNotification:a,errorNotification:n,meta:l,metaData:o,liveMode:s,onLiveEvent:f,liveParams:d,dataProviderName:m})=>{let{resources:p}=z(),E=le(),c=Ce(e,T(e,m,p),S(l,o),S(l,o)),{getMany:v,getOne:u}=E(T(e,m,p)),i=j(),h=ae(),{mutate:C}=ge({v3LegacyAuthProviderCompatible:Boolean(h==null?void 0:h.isLegacy)}),b=ye(),y=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return Lt({resource:e,types:["*"],params:{ids:t!=null?t:[],meta:S(l,o),metaData:S(l,o),subscriptionType:"useMany",...d},channel:`resources/${e}`,enabled:y,liveMode:s,onLiveEvent:f}),(0,Do.useQuery)(c.many(t),({queryKey:g,pageParam:P,signal:x})=>v?v({resource:e,ids:t,metaData:{...S(l,o)||{},queryContext:{queryKey:g,pageParam:P,signal:x}}}):Bt(t.map(L=>u({resource:e,id:L,metaData:{...S(l,o)||{},queryContext:{queryKey:g,pageParam:P,signal:x}}}))),{...r,onSuccess:g=>{var P;(P=r==null?void 0:r.onSuccess)==null||P.call(r,g);let x=typeof a=="function"?a(g,t,e):a;b(x)},onError:g=>{var P;C(g),(P=r==null?void 0:r.onError)==null||P.call(r,g);let x=typeof n=="function"?n(g,t,e):n;b(x,{key:`${t[0]}-${e}-getMany-notification`,message:i("notifications.error",{statusCode:g.statusCode},`Error (status code: ${g.statusCode})`),description:g.message,type:"error"})}})},ra=w("@tanstack/react-query"),Tt=D(w("react")),ir=D(w("lodash/isEqual")),Xa=Tt.default.createContext({notifications:[],notificationDispatch:()=>!1}),ko=[],No=(e,t)=>{switch(t.type){case"ADD":return[...e.filter(r=>!((0,ir.default)(r.id,t.payload.id)&&r.resource==t.payload.resource)),{...t.payload,isRunning:!0}];case"REMOVE":return e.filter(r=>!((0,ir.default)(r.id,t.payload.id)&&r.resource==t.payload.resource));case"DECREASE_NOTIFICATION_SECOND":return e.map(r=>(0,ir.default)(r.id,t.payload.id)&&r.resource==t.payload.resource?{...r,seconds:t.payload.seconds-1e3}:r);default:return e}},Ao=({children:e})=>{let[t,r]=(0,Tt.useReducer)(No,ko),a={notifications:t,notificationDispatch:r};return Tt.default.createElement(Xa.Provider,{value:a},e,typeof window<"u"&&t.map(n=>Tt.default.createElement(Sn,{key:`${n.id}-${n.resource}-queue`,notification:n})))},aa=D(w("pluralize")),en=({mutationOptions:e}={})=>{let{resources:t}=z(),r=(0,ra.useQueryClient)(),a=le(),{mutationMode:n,undoableTimeout:l}=ht(),o=j(),s=ae(),{mutate:f}=ge({v3LegacyAuthProviderCompatible:Boolean(s==null?void 0:s.isLegacy)}),d=nt(),{log:m}=ot(),{notificationDispatch:p}=gt(),E=ye(),c=lt();return(0,ra.useMutation)(({id:v,values:u,resource:i,mutationMode:h,undoableTimeout:C,onCancel:b,meta:y,metaData:g,dataProviderName:P})=>{let x=h!=null?h:n,L=C!=null?C:l;return x!=="undoable"?a(T(i,P,t)).update({resource:i,id:v,variables:u,meta:S(y,g),metaData:S(y,g)}):new Promise((q,M)=>{let N=()=>{a(T(i,P,t)).update({resource:i,id:v,variables:u,meta:S(y,g),metaData:S(y,g)}).then(O=>q(O)).catch(O=>M(O))},Q=()=>{M({message:"mutationCancelled"})};b&&b(Q),p({type:"ADD",payload:{id:v,resource:i,cancelMutation:Q,doMutation:N,seconds:L,isSilent:!!b}})})},{onMutate:async({resource:v,id:u,mutationMode:i,values:h,dataProviderName:C})=>{let b=Ce(v,T(v,C,t)),y=r.getQueriesData(b.resourceAll),g=i!=null?i:n;return await r.cancelQueries(b.resourceAll,void 0,{silent:!0}),g!=="pessimistic"&&(r.setQueriesData(b.list(),P=>{if(!P)return null;let x=P.data.map(L=>{var q;return((q=L.id)==null?void 0:q.toString())===(u==null?void 0:u.toString())?{id:u,...L,...h}:L});return{...P,data:x}}),r.setQueriesData(b.many(),P=>{if(!P)return null;let x=P.data.map(L=>{var q;return((q=L.id)==null?void 0:q.toString())===(u==null?void 0:u.toString())&&(L={id:u,...L,...h}),L});return{...P,data:x}}),r.setQueriesData(b.detail(u),P=>P?{...P,data:{...P.data,...h}}:null)),{previousQueries:y,queryKey:b}},onSettled:(v,u,{id:i,resource:h,dataProviderName:C,invalidates:b=["list","many","detail"]})=>{c({resource:h,dataProviderName:T(h,C,t),invalidates:b,id:i}),p({type:"REMOVE",payload:{id:i,resource:h}})},onSuccess:(v,{id:u,resource:i,successNotification:h,dataProviderName:C,values:b,meta:y,metaData:g},P)=>{var x;let L=aa.default.singular(i),q=typeof h=="function"?h(v,{id:u,values:b},i):h;E(q,{key:`${u}-${i}-notification`,description:o("notifications.success","Successful"),message:o("notifications.editSuccess",{resource:o(`${i}.${i}`,L)},`Successfully updated ${L}`),type:"success"}),d==null||d({channel:`resources/${i}`,type:"updated",payload:{ids:(x=v.data)!=null&&x.id?[v.data.id]:void 0},date:new Date});let M;if(P){let R=r.getQueryData(P.queryKey.detail(u));M=Object.keys(b||{}).reduce((k,$)=>{var I;return k[$]=(I=R==null?void 0:R.data)==null?void 0:I[$],k},{})}let{fields:N,operation:Q,variables:O,...A}=S(y,g)||{};m==null||m.mutate({action:"update",resource:i,data:b,previousData:M,meta:{id:u,dataProviderName:T(i,C,t),...A}})},onError:(v,{id:u,resource:i,errorNotification:h,values:C},b)=>{if(b)for(let y of b.previousQueries)r.setQueryData(y[0],y[1]);if(v.message!=="mutationCancelled"){f==null||f(v);let y=aa.default.singular(i),g=typeof h=="function"?h(v,{id:u,values:C},i):h;E(g,{key:`${u}-${i}-notification`,message:o("notifications.editError",{resource:o(`${i}.${i}`,y),statusCode:v.statusCode},`Error when updating ${y} (status code: ${v.statusCode})`),description:v.message,type:"error"})}},...e})},$o=w("@tanstack/react-query"),na=D(w("pluralize")),Mr=({mutationOptions:e}={})=>{let t=ae(),{mutate:r}=ge({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),a=le(),n=lt(),{resources:l}=z(),o=j(),s=nt(),{log:f}=ot(),d=ye();return(0,$o.useMutation)(({resource:m,values:p,meta:E,metaData:c,dataProviderName:v})=>a(T(m,v,l)).create({resource:m,variables:p,meta:S(E,c),metaData:S(E,c)}),{onSuccess:(m,{resource:p,successNotification:E,dataProviderName:c,invalidates:v=["list","many"],values:u,meta:i,metaData:h})=>{var C,b,y;let g=na.default.singular(p),P=typeof E=="function"?E(m,u,p):E;d(P,{key:`create-${p}-notification`,message:o("notifications.createSuccess",{resource:o(`${p}.${p}`,g)},`Successfully created ${g}`),description:o("notifications.success","Success"),type:"success"}),n({resource:p,dataProviderName:T(p,c,l),invalidates:v}),s==null||s({channel:`resources/${p}`,type:"created",payload:{ids:(C=m==null?void 0:m.data)!=null&&C.id?[m.data.id]:void 0},date:new Date});let{fields:x,operation:L,variables:q,...M}=S(i,h)||{};f==null||f.mutate({action:"create",resource:p,data:u,meta:{dataProviderName:T(p,c,l),id:(y=(b=m==null?void 0:m.data)==null?void 0:b.id)!=null?y:void 0,...M}})},onError:(m,{resource:p,errorNotification:E,values:c})=>{r(m);let v=na.default.singular(p),u=typeof E=="function"?E(m,c,p):E;d(u,{key:`create-${p}-notification`,description:m.message,message:o("notifications.createError",{resource:o(`${p}.${p}`,v),statusCode:m.statusCode},`There was an error creating ${v} (status code: ${m.statusCode})`),type:"error"})},...e})},oa=w("@tanstack/react-query"),la=D(w("pluralize")),Oo=({mutationOptions:e}={})=>{let t=ae(),{mutate:r}=ge({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),a=le(),{resources:n}=z(),l=(0,oa.useQueryClient)(),{mutationMode:o,undoableTimeout:s}=ht(),{notificationDispatch:f}=gt(),d=j(),m=nt(),{log:p}=ot(),E=ye(),c=lt();return(0,oa.useMutation)(({id:v,mutationMode:u,undoableTimeout:i,resource:h,onCancel:C,meta:b,metaData:y,dataProviderName:g,values:P})=>{let x=u!=null?u:o,L=i!=null?i:s;return x!=="undoable"?a(T(h,g,n)).deleteOne({resource:h,id:v,meta:S(b,y),metaData:S(b,y),variables:P}):new Promise((q,M)=>{let N=()=>{a(T(h,g,n)).deleteOne({resource:h,id:v,meta:S(b,y),variables:P}).then(O=>q(O)).catch(O=>M(O))},Q=()=>{M({message:"mutationCancelled"})};C&&C(Q),f({type:"ADD",payload:{id:v,resource:h,cancelMutation:Q,doMutation:N,seconds:L,isSilent:!!C}})})},{onMutate:async({id:v,resource:u,mutationMode:i,dataProviderName:h})=>{let C=Ce(u,T(u,h,n)),b=i!=null?i:o;await l.cancelQueries(C.resourceAll,void 0,{silent:!0});let y=l.getQueriesData(C.resourceAll);return b!=="pessimistic"&&(l.setQueriesData(C.list(),g=>g?{data:g.data.filter(P=>{var x;return((x=P.id)==null?void 0:x.toString())!==v.toString()}),total:g.total-1}:null),l.setQueriesData(C.many(),g=>{if(!g)return null;let P=g.data.filter(x=>{var L;return((L=x.id)==null?void 0:L.toString())!==(v==null?void 0:v.toString())});return{...g,data:P}})),{previousQueries:y,queryKey:C}},onSettled:(v,u,{id:i,resource:h,dataProviderName:C,invalidates:b=["list","many"]})=>{c({resource:h,dataProviderName:T(h,C,n),invalidates:b}),f({type:"REMOVE",payload:{id:i,resource:h}})},onSuccess:(v,{id:u,resource:i,successNotification:h,dataProviderName:C,meta:b,metaData:y},g)=>{let P=la.default.singular(i!=null?i:"");l.removeQueries(g==null?void 0:g.queryKey.detail(u));let x=typeof h=="function"?h(v,u,i):h;E(x,{key:`${u}-${i}-notification`,description:d("notifications.success","Success"),message:d("notifications.deleteSuccess",{resource:d(`${i}.${i}`,P)},`Successfully deleted a ${P}`),type:"success"}),m==null||m({channel:`resources/${i}`,type:"deleted",payload:{ids:u?[u]:[]},date:new Date});let{fields:L,operation:q,variables:M,...N}=S(b,y)||{};p==null||p.mutate({action:"delete",resource:i,meta:{id:u,dataProviderName:T(i,C,n),...N}}),l.removeQueries(g==null?void 0:g.queryKey.detail(u))},onError:(v,{id:u,resource:i,errorNotification:h},C)=>{if(C)for(let b of C.previousQueries)l.setQueryData(b[0],b[1]);if(v.message!=="mutationCancelled"){r(v);let b=la.default.singular(i!=null?i:""),y=typeof h=="function"?h(v,u,i):h;E(y,{key:`${u}-${i}-notification`,message:d("notifications.deleteError",{resource:b,statusCode:v.statusCode},`Error (status code: ${v.statusCode})`),description:v.message,type:"error"})}},...e})},Ro=w("@tanstack/react-query"),Io=D(w("pluralize")),tn=({mutationOptions:e}={})=>{let t=le(),{resources:r}=z(),a=j(),n=nt(),l=ye(),o=lt(),{log:s}=ot();return(0,Ro.useMutation)(({resource:f,values:d,meta:m,metaData:p,dataProviderName:E})=>{let c=t(T(f,E,r));return c.createMany?c.createMany({resource:f,variables:d,meta:S(m,p),metaData:S(m,p)}):Bt(d.map(v=>c.create({resource:f,variables:v,meta:S(m,p),metaData:S(m,p)})))},{onSuccess:(f,{resource:d,successNotification:m,dataProviderName:p,invalidates:E=["list","many"],values:c,meta:v,metaData:u})=>{let i=Io.default.plural(d),h=typeof m=="function"?m(f,c,d):m;l(h,{key:`createMany-${d}-notification`,message:a("notifications.createSuccess",{resource:a(`${d}.${d}`,d)},`Successfully created ${i}`),description:a("notifications.success","Success"),type:"success"}),o({resource:d,dataProviderName:T(d,p,r),invalidates:E});let C=f==null?void 0:f.data.filter(x=>(x==null?void 0:x.id)!==void 0).map(x=>x.id);n==null||n({channel:`resources/${d}`,type:"created",payload:{ids:C},date:new Date});let{fields:b,operation:y,variables:g,...P}=S(v,u)||{};s==null||s.mutate({action:"createMany",resource:d,data:c,meta:{dataProviderName:T(d,p,r),ids:C,...P}})},onError:(f,{resource:d,errorNotification:m,values:p})=>{let E=typeof m=="function"?m(f,p,d):m;l(E,{key:`createMany-${d}-notification`,description:f.message,message:a("notifications.createError",{resource:a(`${d}.${d}`,d),statusCode:f.statusCode},`There was an error creating ${d} (status code: ${f.statusCode}`),type:"error"})},...e})},ia=w("@tanstack/react-query"),ua=D(w("pluralize")),Qo=({mutationOptions:e}={})=>{let{resources:t}=z(),r=(0,ia.useQueryClient)(),a=le(),n=j(),{mutationMode:l,undoableTimeout:o}=ht(),s=ae(),{mutate:f}=ge({v3LegacyAuthProviderCompatible:Boolean(s==null?void 0:s.isLegacy)}),{notificationDispatch:d}=gt(),m=nt(),p=ye(),E=lt(),{log:c}=ot();return(0,ia.useMutation)(({ids:v,values:u,resource:i,onCancel:h,mutationMode:C,undoableTimeout:b,meta:y,metaData:g,dataProviderName:P})=>{let x=C!=null?C:l,L=b!=null?b:o,q=a(T(i,P,t)),M=()=>q.updateMany?q.updateMany({resource:i,ids:v,variables:u,meta:S(y,g),metaData:S(y,g)}):Bt(v.map(N=>q.update({resource:i,id:N,variables:u,meta:S(y,g),metaData:S(y,g)})));return x!=="undoable"?M():new Promise((N,Q)=>{let O=()=>{M().then(R=>N(R)).catch(R=>Q(R))},A=()=>{Q({message:"mutationCancelled"})};h&&h(A),d({type:"ADD",payload:{id:v,resource:i,cancelMutation:A,doMutation:O,seconds:L,isSilent:!!h}})})},{onMutate:async({resource:v,ids:u,values:i,mutationMode:h,dataProviderName:C,meta:b,metaData:y})=>{let g=Ce(v,T(v,C,t),S(b,y),S(b,y)),P=h!=null?h:l;await r.cancelQueries(g.resourceAll,void 0,{silent:!0});let x=r.getQueriesData(g.resourceAll);if(P!=="pessimistic"){r.setQueriesData(g.list(),L=>{if(!L)return null;let q=L.data.map(M=>M.id!==void 0&&u.filter(N=>N!==void 0).map(String).includes(M.id.toString())?{...M,...i}:M);return{...L,data:q}}),r.setQueriesData(g.many(),L=>{if(!L)return null;let q=L.data.map(M=>M.id!==void 0&&u.filter(N=>N!==void 0).map(String).includes(M.id.toString())?{...M,...i}:M);return{...L,data:q}});for(let L of u)r.setQueriesData(g.detail(L),q=>{if(!q)return null;let M={...q.data,...i};return{...q,data:M}})}return{previousQueries:x,queryKey:g}},onSettled:(v,u,{ids:i,resource:h,dataProviderName:C})=>{E({resource:h,invalidates:["list","many"],dataProviderName:T(h,C,t)}),i.forEach(b=>E({resource:h,invalidates:["detail"],dataProviderName:T(h,C,t),id:b})),d({type:"REMOVE",payload:{id:i,resource:h}})},onSuccess:(v,{ids:u,resource:i,meta:h,metaData:C,dataProviderName:b,successNotification:y,values:g},P)=>{let x=ua.default.singular(i),L=typeof y=="function"?y(v,{ids:u,values:g},i):y;p(L,{key:`${u}-${i}-notification`,description:n("notifications.success","Successful"),message:n("notifications.editSuccess",{resource:n(`${i}.${i}`,i)},`Successfully updated ${x}`),type:"success"}),m==null||m({channel:`resources/${i}`,type:"updated",payload:{ids:u.map(String)},date:new Date});let q=[];P&&u.forEach(A=>{let R=r.getQueryData(P.queryKey.detail(A));q.push(Object.keys(g||{}).reduce((k,$)=>{var I;return k[$]=(I=R==null?void 0:R.data)==null?void 0:I[$],k},{}))});let{fields:M,operation:N,variables:Q,...O}=S(h,C)||{};c==null||c.mutate({action:"updateMany",resource:i,data:g,previousData:q,meta:{ids:u,dataProviderName:T(i,b,t),...O}})},onError:(v,{ids:u,resource:i,errorNotification:h,values:C},b)=>{if(b)for(let y of b.previousQueries)r.setQueryData(y[0],y[1]);if(v.message!=="mutationCancelled"){f==null||f(v);let y=ua.default.singular(i),g=typeof h=="function"?h(v,{ids:u,values:C},i):h;p(g,{key:`${u}-${i}-updateMany-error-notification`,message:n("notifications.editError",{resource:y,statusCode:v.statusCode},`Error when updating ${y} (status code: ${v.statusCode})`),description:v.message,type:"error"})}},...e})},sa=w("@tanstack/react-query"),To=D(w("pluralize")),Uo=({mutationOptions:e}={})=>{let t=ae(),{mutate:r}=ge({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),{mutationMode:a,undoableTimeout:n}=ht(),l=le(),{notificationDispatch:o}=gt(),s=j(),f=nt(),d=ye(),m=lt(),{log:p}=ot(),{resources:E}=z(),c=(0,sa.useQueryClient)();return(0,sa.useMutation)(({resource:v,ids:u,mutationMode:i,undoableTimeout:h,onCancel:C,meta:b,metaData:y,dataProviderName:g,values:P})=>{let x=i!=null?i:a,L=h!=null?h:n,q=l(T(v,g,E)),M=()=>q.deleteMany?q.deleteMany({resource:v,ids:u,meta:S(b,y),metaData:S(b,y),variables:P}):Bt(u.map(N=>q.deleteOne({resource:v,id:N,meta:S(b,y),metaData:S(b,y),variables:P})));return x!=="undoable"?M():new Promise((N,Q)=>{let O=()=>{M().then(R=>N(R)).catch(R=>Q(R))},A=()=>{Q({message:"mutationCancelled"})};C&&C(A),o({type:"ADD",payload:{id:u,resource:v,cancelMutation:A,doMutation:O,seconds:L,isSilent:!!C}})})},{onMutate:async({ids:v,resource:u,mutationMode:i,dataProviderName:h})=>{let C=Ce(u,T(u,h,E)),b=i!=null?i:a;await c.cancelQueries(C.resourceAll,void 0,{silent:!0});let y=c.getQueriesData(C.resourceAll);if(b!=="pessimistic"){c.setQueriesData(C.list(),g=>g?{data:g.data.filter(P=>P.id&&!v.map(String).includes(P.id.toString())),total:g.total-1}:null),c.setQueriesData(C.many(),g=>{if(!g)return null;let P=g.data.filter(x=>x.id?!v.map(String).includes(x.id.toString()):!1);return{...g,data:P}});for(let g of v)c.setQueriesData(C.detail(g),P=>!P||P.data.id==g?null:{...P})}return{previousQueries:y,queryKey:C}},onSettled:(v,u,{resource:i,ids:h,dataProviderName:C,invalidates:b=["list","many"]})=>{m({resource:i,dataProviderName:T(i,C,E),invalidates:b}),o({type:"REMOVE",payload:{id:h,resource:i}})},onSuccess:(v,{ids:u,resource:i,meta:h,metaData:C,dataProviderName:b,successNotification:y},g)=>{u.forEach(N=>c.removeQueries(g==null?void 0:g.queryKey.detail(N)));let P=typeof y=="function"?y(v,u,i):y;d(P,{key:`${u}-${i}-notification`,description:s("notifications.success","Success"),message:s("notifications.deleteSuccess",{resource:s(`${i}.${i}`,i)},`Successfully deleted ${i}`),type:"success"}),f==null||f({channel:`resources/${i}`,type:"deleted",payload:{ids:u},date:new Date});let{fields:x,operation:L,variables:q,...M}=S(h,C)||{};p==null||p.mutate({action:"deleteMany",resource:i,meta:{ids:u,dataProviderName:T(i,b,E),...M}}),u.forEach(N=>c.removeQueries(g==null?void 0:g.queryKey.detail(N)))},onError:(v,{ids:u,resource:i,errorNotification:h},C)=>{if(C)for(let b of C.previousQueries)c.setQueryData(b[0],b[1]);if(v.message!=="mutationCancelled"){r(v);let b=To.default.singular(i),y=typeof h=="function"?h(v,u,i):h;d(y,{key:`${u}-${i}-notification`,message:s("notifications.deleteError",{resource:b,statusCode:v.statusCode},`Error (status code: ${v.statusCode})`),description:v.message,type:"error"})}},...e})},Fo=e=>{let t=le(),{getApiUrl:r}=t(e);return r()},Wo=w("@tanstack/react-query"),Bo=({url:e,method:t,config:r,queryOptions:a,successNotification:n,errorNotification:l,meta:o,metaData:s,dataProviderName:f})=>{let d=le(),{custom:m}=d(f),p=ae(),{mutate:E}=ge({v3LegacyAuthProviderCompatible:Boolean(p==null?void 0:p.isLegacy)}),c=j(),v=ye();if(m)return(0,Wo.useQuery)([f,"custom",t,e,{...r,...S(o,s)||{}}],({queryKey:u,pageParam:i,signal:h})=>m({url:e,method:t,...r,metaData:{...S(o,s)||{},queryContext:{queryKey:u,pageParam:i,signal:h}}}),{...a,onSuccess:u=>{var i;(i=a==null?void 0:a.onSuccess)==null||i.call(a,u);let h=typeof n=="function"?n(u,{...r,...S(o,s)||{}}):n;v(h)},onError:u=>{var i;E(u),(i=a==null?void 0:a.onError)==null||i.call(a,u);let h=typeof l=="function"?l(u,{...r,...S(o,s)||{}}):l;v(h,{key:`${t}-notification`,message:c("notifications.error",{statusCode:u.statusCode},`Error (status code: ${u.statusCode})`),description:u.message,type:"error"})}});throw Error("Not implemented custom on data provider.")},Ko=w("@tanstack/react-query"),zo=({mutationOptions:e}={})=>{let t=ae(),{mutate:r}=ge({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),a=ye(),n=le(),l=j();return(0,Ko.useMutation)(({url:o,method:s,values:f,meta:d,metaData:m,dataProviderName:p,config:E})=>{let{custom:c}=n(p);if(c)return c({url:o,method:s,payload:f,meta:S(d,m),metaData:S(d,m),headers:{...E==null?void 0:E.headers}});throw Error("Not implemented custom on data provider.")},{onSuccess:(o,{successNotification:s,config:f,meta:d,metaData:m})=>{let p=typeof s=="function"?s(o,{...f,...S(d,m)||{}}):s;a(p)},onError:(o,{errorNotification:s,method:f,config:d,meta:m,metaData:p})=>{r(o);let E=typeof s=="function"?s(o,{...d,...S(m,p)||{}}):s;a(E,{key:`${f}-notification`,message:l("notifications.error",{statusCode:o.statusCode},`Error (status code: ${o.statusCode})`),description:o.message,type:"error"})},...e})},da=w("react"),rn=D(w("react")),Ho=()=>({default:{create:()=>Promise.resolve({data:{id:1}}),createMany:()=>Promise.resolve({data:[]}),deleteOne:()=>Promise.resolve({data:{id:1}}),deleteMany:()=>Promise.resolve({data:[]}),getList:()=>Promise.resolve({data:[],total:0}),getMany:()=>Promise.resolve({data:[]}),getOne:()=>Promise.resolve({data:{id:1}}),update:()=>Promise.resolve({data:{id:1}}),updateMany:()=>Promise.resolve({data:[]}),custom:()=>Promise.resolve({data:{}}),getApiUrl:()=>""}}),Dr=rn.default.createContext(Ho()),jo=({children:e,...t})=>{let r;return!t.getList||!t.getOne?r=t:r={default:t},rn.default.createElement(Dr.Provider,{value:r},e)},le=()=>{let e=(0,da.useContext)(Dr);return(0,da.useCallback)(t=>{if(t){if(!e[t])throw new Error(`"${t}" Data provider not found`);return e[t]}if(e.default)return e.default;throw new Error('There is no "default" data provider. Please pass dataProviderName.')},[e])},_o=w("@tanstack/react-query"),Vo=({resource:e,config:t,filters:r,hasPagination:a,pagination:n,sorters:l,queryOptions:o,successNotification:s,errorNotification:f,meta:d,metaData:m,liveMode:p,onLiveEvent:E,liveParams:c,dataProviderName:v})=>{let{resources:u}=z(),i=le(),h=j(),C=ae(),{mutate:b}=ge({v3LegacyAuthProviderCompatible:Boolean(C==null?void 0:C.isLegacy)}),y=ye(),g=T(e,v,u),P=S(d,m),x=S(r,t==null?void 0:t.filters),L=S(l,t==null?void 0:t.sort),q=S(a,t==null?void 0:t.hasPagination),M=Za({pagination:n,configPagination:t==null?void 0:t.pagination,hasPagination:q}),N=M.mode==="server",Q={meta:P,metaData:P,filters:x,hasPagination:N,pagination:M,sorters:L,config:{...t,sort:L}},O=(o==null?void 0:o.enabled)===void 0||(o==null?void 0:o.enabled)===!0,A=Ce(e,g,P,P),{getList:R}=i(g);return Lt({resource:e,types:["*"],params:{meta:P,metaData:P,pagination:M,hasPagination:N,sort:L,sorters:L,filters:x,subscriptionType:"useList",...c},channel:`resources/${e}`,enabled:O,liveMode:p,onLiveEvent:E}),(0,_o.useInfiniteQuery)(A.list({filters:x,hasPagination:N,...N&&{pagination:M},...l&&{sorters:l},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}),({queryKey:k,pageParam:$,signal:I})=>{let V={...M,current:$};return R({resource:e,pagination:V,hasPagination:N,filters:x,sort:L,sorters:L,meta:{...P||{},queryContext:{queryKey:k,pageParam:$,signal:I}},metaData:{...P||{},queryContext:{queryKey:k,pageParam:$,signal:I}}}).then(({data:te,total:U,...F})=>({data:te,total:U,pagination:V,...F}))},{getNextPageParam:k=>Va(k),getPreviousPageParam:k=>Ga(k),...o,onSuccess:k=>{var $;($=o==null?void 0:o.onSuccess)==null||$.call(o,k);let I=typeof s=="function"?s(k,Q,e):s;y(I)},onError:k=>{var $;b(k),($=o==null?void 0:o.onError)==null||$.call(o,k);let I=typeof f=="function"?f(k,Q,e):f;y(I,{key:`${e}-useInfiniteList-notification`,message:h("notifications.error",{statusCode:k.statusCode},`Error (status code: ${k.statusCode})`),description:k.message,type:"error"})}})},ur=w("react"),Go=w("@tanstack/react-query"),an=D(w("react")),wt=an.default.createContext(void 0),Yo=({liveProvider:e,children:t})=>an.default.createElement(wt.Provider,{value:e},t),Lt=({resource:e,params:t,channel:r,types:a,enabled:n=!0,liveMode:l,onLiveEvent:o})=>{let s=(0,Go.useQueryClient)(),f=Ce(e),d=(0,ur.useContext)(wt),{liveMode:m,onLiveEvent:p}=(0,ur.useContext)(He),E=l!=null?l:m;(0,ur.useEffect)(()=>{let c;return E&&E!=="off"&&n&&(c=d==null?void 0:d.subscribe({channel:r,params:{resource:e,...t},types:a,callback:v=>{E==="auto"&&s.invalidateQueries(f.resourceAll),o==null||o(v),p==null||p(v)}})),()=>{c&&(d==null||d.unsubscribe(c))}},[n])},Zo=w("react"),nn=e=>{let{liveMode:t}=(0,Zo.useContext)(He);return e!=null?e:t},ca=w("react"),Jo=({params:e,channel:t,types:r=["*"],enabled:a=!0,onLiveEvent:n})=>{let l=(0,ca.useContext)(wt);(0,ca.useEffect)(()=>{let o;return a&&(o=l==null?void 0:l.subscribe({channel:t,params:e,types:r,callback:n})),()=>{o&&(l==null||l.unsubscribe(o))}},[a])},Xo=w("react"),nt=()=>{let e=(0,Xo.useContext)(wt);return e==null?void 0:e.publish},el=w("react"),on=D(w("react")),tl=w("react"),rl=w("react"),al=D(w("lodash/isEqual")),nl=e=>{let t=(0,rl.useRef)(e);return(0,al.default)(t.current,e)||(t.current=e),t.current},ln=(e,t)=>{let r=nl(t);return(0,tl.useMemo)(e,r)},St=on.default.createContext({resources:[]}),ol=({resources:e,children:t})=>{let r=ln(()=>Ya(e!=null?e:[]),[e]);return on.default.createElement(St.Provider,{value:{resources:r}},t)},un=D(w("react")),sn=un.default.createContext("new"),ll=sn.Provider,ee=()=>un.default.useContext(sn),il=D(w("react")),dn=D(w("react")),cn={},xt=(0,dn.createContext)(cn),ul=({children:e,router:t})=>dn.default.createElement(xt.Provider,{value:t!=null?t:cn},e),ma=D(w("react")),mn=()=>{let e=(0,ma.useContext)(xt);return ma.default.useMemo(()=>{var t;return(t=e==null?void 0:e.parse)!=null?t:()=>()=>({})},[e==null?void 0:e.parse])()},we=()=>{let e=mn();return il.default.useMemo(()=>e(),[e])};function z(e){var t,r;let{resources:a}=(0,el.useContext)(St),n=ee(),l=we(),o={resourceName:e&&typeof e!="string"?e.resourceName:e,resourceNameOrRouteName:e&&typeof e!="string"?e.resourceNameOrRouteName:e,recordItemId:e&&typeof e!="string"?e.recordItemId:void 0},s=Kt(),{useParams:f}=ie(),d=f();if(n==="legacy"){let E=o.resourceNameOrRouteName?o.resourceNameOrRouteName:d.resource,c=E?s(E):void 0,v=(t=o==null?void 0:o.recordItemId)!=null?t:d.id,u=d.action,i=(r=o==null?void 0:o.resourceName)!=null?r:c==null?void 0:c.name;return{resources:a,resource:c,resourceName:i,id:v,action:u}}let m,p=typeof e=="string"?e:o==null?void 0:o.resourceNameOrRouteName;if(p){let E=X(p,a);E?m=E:m={name:p}}else l!=null&&l.resource&&(m=l.resource);return{resources:a,resource:m,resourceName:m==null?void 0:m.name,id:l.id,action:l.action}}var va=w("react"),Kt=()=>{let{resources:e}=(0,va.useContext)(St);return(0,va.useCallback)(t=>X(t,e,!0)||{name:t,route:t},[e])},sl=w("react"),gt=()=>{let{notifications:e,notificationDispatch:t}=(0,sl.useContext)(Xa);return{notifications:e,notificationDispatch:t}},dl=w("react"),vn=D(w("react")),kr=(0,vn.createContext)({}),cl=({open:e,close:t,children:r})=>vn.default.createElement(kr.Provider,{value:{open:e,close:t}},r),je=()=>{let{open:e,close:t}=(0,dl.useContext)(kr);return{open:e,close:t}},ml=w("react"),ye=()=>{let{open:e}=je();return(0,ml.useCallback)((t,r)=>{t!==!1&&(t?e==null||e(t):r&&(e==null||e(r)))},[])},pa=w("react"),pn=D(w("react")),yt=pn.default.createContext({}),vl=({children:e,i18nProvider:t})=>pn.default.createElement(yt.Provider,{value:{i18nProvider:t}},e),pl=()=>{let{i18nProvider:e}=(0,pa.useContext)(yt);return(0,pa.useCallback)(t=>e==null?void 0:e.changeLocale(t),[])},fa=w("react"),j=()=>{let{i18nProvider:e}=(0,fa.useContext)(yt);return(0,fa.useMemo)(()=>{function t(r,a,n){var l,o;return(o=(l=e==null?void 0:e.translate(r,a,n))!=null?l:n)!=null?o:typeof a=="string"&&typeof n>"u"?a:r}return t},[e])},ga=w("react"),fl=()=>{let{i18nProvider:e}=(0,ga.useContext)(yt);return(0,ga.useCallback)(()=>e==null?void 0:e.getLocale(),[])},gl=w("react"),ht=()=>{let{mutationMode:e,undoableTimeout:t}=(0,gl.useContext)(He);return{mutationMode:e,undoableTimeout:t}},ya=w("react"),hr=D(w("react")),fn=hr.default.createContext({}),yl=({children:e})=>{let[t,r]=(0,hr.useState)(!1);return hr.default.createElement(fn.Provider,{value:{warnWhen:t,setWarnWhen:r}},e)},Nr=()=>{let{warnWhenUnsavedChanges:e}=(0,ya.useContext)(He),{warnWhen:t,setWarnWhen:r}=(0,ya.useContext)(fn);return{warnWhenUnsavedChanges:e,warnWhen:Boolean(t),setWarnWhen:r!=null?r:()=>{}}},hl=w("react"),gn=()=>{let{syncWithLocation:e}=(0,hl.useContext)(He);return{syncWithLocation:e}},bl=w("react"),Pl=()=>{let{Title:e}=(0,bl.useContext)(He);return e},El=w("react"),Ar=()=>{let{Footer:e,Header:t,Layout:r,OffLayoutArea:a,Sider:n,Title:l,hasDashboard:o,mutationMode:s,syncWithLocation:f,undoableTimeout:d,warnWhenUnsavedChanges:m,DashboardPage:p,LoginPage:E,catchAll:c,options:v}=(0,El.useContext)(He);return{Footer:e,Header:t,Layout:r,OffLayoutArea:a,Sider:n,Title:l,hasDashboard:o,mutationMode:s,syncWithLocation:f,undoableTimeout:d,warnWhenUnsavedChanges:m,DashboardPage:p,LoginPage:E,catchAll:c,options:v}},Cl=w("react"),wl=w("export-to-csv-fix-source-map"),Ll=({resourceName:e,resource:t,sorter:r,sorters:a,filters:n,maxItemCount:l,pageSize:o=20,mapData:s=c=>c,exportOptions:f,meta:d,metaData:m,dataProviderName:p,onError:E}={})=>{var c;let[v,u]=(0,Cl.useState)(!1),i=le(),{resource:h,resources:C}=z(),b=`${Lr(h==null?void 0:h.name,"plural")}-${new Date().toLocaleString()}`,{getList:y}=i(T((c=h==null?void 0:h.identifier)!=null?c:h==null?void 0:h.name,p,C));return{isLoading:v,triggerExport:async()=>{var g;u(!0);let P=[],x=1,L=!0;for(;L;)try{let{data:q,total:M}=await y({resource:(g=h==null?void 0:h.name)!=null?g:"",filters:n,sort:S(a,r),sorters:S(a,r),pagination:{current:x,pageSize:o,mode:"server"},meta:S(d,m),metaData:S(d,m)});x++,P.push(...q),l&&P.length>=l&&(P=P.slice(0,l),L=!1),M===P.length&&(L=!1)}catch(q){u(!1),L=!1,E==null||E(q);return}new wl.ExportToCsv({filename:b,useKeysAsHeaders:!0,...f}).generateCsv(P.map(s)),u(!1)}}},ha=D(w("react")),Sl=({resource:e,action:t,id:r,onMutationSuccess:a,onMutationError:n,redirect:l,successNotification:o,errorNotification:s,meta:f,metaData:d,mutationMode:m,liveMode:p,onLiveEvent:E,liveParams:c,undoableTimeout:v,dataProviderName:u,invalidates:i,queryOptions:h,createMutationOptions:C,updateMutationOptions:b}={})=>{let{options:y}=Ar(),{resources:g}=z(),P=ee(),{resource:x,id:L,action:q}=we(),{useParams:M}=ie(),{resource:N,action:Q,id:O}=M(),A=typeof x=="string"?x:x==null?void 0:x.name,R=!e||e===(P==="legacy"?N:A)?r!=null?r:P==="legacy"?O:L:r,[k,$]=ha.default.useState(R);ha.default.useEffect(()=>{R!==k&&$(r)},[r]);let I=e!=null?e:P==="legacy"?N:A,V=P==="legacy"?Q:q,te=t!=null?t:V==="edit"||V==="clone"?V:"create",U=Kt(),F;if(P==="legacy")I&&(F=U(I));else if(e){let H=X(e,g);H?F=H:F={name:e,route:e}}else if(typeof x=="string"){let H=X(x,g);H?F=H:F={name:x,route:x}}else F=x;let{mutationMode:ne}=ht(),me=m!=null?m:ne,ke=te==="create",_=te==="edit",G=te==="clone",Te=So({redirectFromProps:l,action:te,redirectOptions:y.redirect}),st=k!==void 0&&(_||G),Ve=qr({resource:F==null?void 0:F.name,id:k!=null?k:"",queryOptions:{enabled:st,...h},liveMode:p,onLiveEvent:E,liveParams:c,meta:S(f,d),metaData:S(f,d),dataProviderName:u}),{isFetching:Ue}=Ve,Fe=Mr({mutationOptions:C}),{mutate:Ge,isLoading:Y}=Fe,W=en({mutationOptions:b}),{mutate:We,isLoading:Jt}=W,{setWarnWhen:Ye}=Nr(),Be=yn();return{...ke||G?{formLoading:Ue||Y,mutationResult:Fe,onFinish:async H=>{Ye(!1);let se=Ne=>{Be({redirect:Te,resource:F,id:Ne,meta:d})};return me!=="pessimistic"&&setTimeout(()=>{se()}),new Promise((Ne,Ze)=>{if(me!=="pessimistic"&&Ne(),!!F)return Ge({values:H,resource:F.name,successNotification:o,errorNotification:s,meta:S(f,d),metaData:S(f,d),dataProviderName:u,invalidates:i},{onSuccess:(xe,Ae,de)=>{var $e;a&&a(xe,H,de);let Je=($e=xe==null?void 0:xe.data)==null?void 0:$e.id;se(Je),Ne(xe)},onError:(xe,Ae,de)=>{if(n)return n(xe,H,de);Ze()}})})}}:{formLoading:Ue||Jt,mutationResult:W,onFinish:async H=>{if(Ye(!1),!F)return;let se={id:k!=null?k:"",values:H,resource:F.name,mutationMode:me,undoableTimeout:v,successNotification:o,errorNotification:s,meta:S(f,d),metaData:S(f,d),dataProviderName:u,invalidates:i},Ne=()=>{$(R),Be({redirect:Te,resource:F,id:k,meta:d})};return me!=="pessimistic"&&setTimeout(()=>{Ne()}),new Promise((Ze,xe)=>(me!=="pessimistic"&&Ze(),setTimeout(()=>{We(se,{onSuccess:(Ae,de,$e)=>{a&&a(Ae,H,$e),me==="pessimistic"&&Ne(),Ze(Ae)},onError:(Ae,de,$e)=>{if(n)return n(Ae,H,$e);xe()}})})))}},queryResult:Ve,id:k,setId:$,redirect:(H,se)=>{Be({redirect:H!==void 0?H:_?"list":"edit",resource:F,id:se!=null?se:k,meta:d})}}},xl=w("react"),yn=()=>{let{show:e,edit:t,list:r,create:a}=Se();return(0,xl.useCallback)(({redirect:n,resource:l,id:o,meta:s={}})=>{if(n&&l)return!!l.show&&n==="show"&&o?e(l,o,void 0,s):!!l.edit&&n==="edit"&&o?t(l,o,void 0,s):!!l.create&&n==="create"?a(l,void 0,s):r(l,"push",s)},[])},ba=D(w("react")),Le=()=>{let e=(0,ba.useContext)(xt);return ba.default.useMemo(()=>{var t;return(t=e==null?void 0:e.go)!=null?t:()=>()=>{}},[e==null?void 0:e.go])()},Pa=D(w("react")),hn=()=>{let e=(0,Pa.useContext)(xt);return Pa.default.useMemo(()=>{var t;return(t=e==null?void 0:e.back)!=null?t:()=>()=>{}},[e==null?void 0:e.back])()},Se=()=>{let{resources:e}=z(),t=ee(),{useHistory:r}=ie(),a=r(),n=we(),l=Le(),o=hn(),s=(c,v="push")=>{t==="legacy"?a[v](c):l({to:c,type:v})},f=(c,v={})=>{var u,i,h;if(t==="legacy"){let C=typeof c=="string"?(u=X(c,e,!0))!=null?u:{name:c,route:c}:c,b=fe(C,e,!0).find(y=>y.action==="create");return b?Pe(b.route,n,v):""}else{let C=typeof c=="string"?(i=X(c,e))!=null?i:{name:c}:c,b=(h=fe(C,e).find(y=>y.action==="create"))==null?void 0:h.route;return b?l({to:Pe(b,n,v),type:"path"}):""}},d=(c,v,u={})=>{var i,h,C;let b=encodeURIComponent(v);if(t==="legacy"){let y=typeof c=="string"?(i=X(c,e,!0))!=null?i:{name:c,route:c}:c,g=fe(y,e,!0).find(P=>P.action==="edit");return g?Pe(g.route,n,{...u,id:b}):""}else{let y=typeof c=="string"?(h=X(c,e))!=null?h:{name:c}:c,g=(C=fe(y,e).find(P=>P.action==="edit"))==null?void 0:C.route;return g?l({to:Pe(g,n,{...u,id:b}),type:"path"}):""}},m=(c,v,u={})=>{var i,h,C;let b=encodeURIComponent(v);if(t==="legacy"){let y=typeof c=="string"?(i=X(c,e,!0))!=null?i:{name:c,route:c}:c,g=fe(y,e,!0).find(P=>P.action==="clone");return g?Pe(g.route,n,{...u,id:b}):""}else{let y=typeof c=="string"?(h=X(c,e))!=null?h:{name:c}:c,g=(C=fe(y,e).find(P=>P.action==="clone"))==null?void 0:C.route;return g?l({to:Pe(g,n,{...u,id:b}),type:"path"}):""}},p=(c,v,u={})=>{var i,h,C;let b=encodeURIComponent(v);if(t==="legacy"){let y=typeof c=="string"?(i=X(c,e,!0))!=null?i:{name:c,route:c}:c,g=fe(y,e,!0).find(P=>P.action==="show");return g?Pe(g.route,n,{...u,id:b}):""}else{let y=typeof c=="string"?(h=X(c,e))!=null?h:{name:c}:c,g=(C=fe(y,e).find(P=>P.action==="show"))==null?void 0:C.route;return g?l({to:Pe(g,n,{...u,id:b}),type:"path"}):""}},E=(c,v={})=>{var u,i,h;if(t==="legacy"){let C=typeof c=="string"?(u=X(c,e,!0))!=null?u:{name:c,route:c}:c,b=fe(C,e,!0).find(y=>y.action==="list");return b?Pe(b.route,n,v):""}else{let C=typeof c=="string"?(i=X(c,e))!=null?i:{name:c}:c,b=(h=fe(C,e).find(y=>y.action==="list"))==null?void 0:h.route;return b?l({to:Pe(b,n,v),type:"path"}):""}};return{create:(c,v="push",u={})=>{s(f(c,u),v)},createUrl:f,edit:(c,v,u="push",i={})=>{s(d(c,v,i),u)},editUrl:d,clone:(c,v,u="push",i={})=>{s(m(c,v,i),u)},cloneUrl:m,show:(c,v,u="push",i={})=>{s(p(c,v,i),u)},showUrl:p,list:(c,v="push",u={})=>{s(E(c,u),v)},listUrl:E,push:(c,...v)=>{t==="legacy"?a.push(c,...v):l({to:c,type:"push"})},replace:(c,...v)=>{t==="legacy"?a.replace(c,...v):l({to:c,type:"replace"})},goBack:()=>{t==="legacy"?a.goBack():o()}}},Ea=D(w("react")),ql=({resource:e,id:t,successNotification:r,errorNotification:a,meta:n,metaData:l,liveMode:o,onLiveEvent:s,dataProviderName:f,queryOptions:d}={})=>{let m=ee(),{resources:p}=z(),{useParams:E}=ie(),{resource:c,id:v}=we(),{resource:u,id:i}=E(),h=c==null?void 0:c.name,C=!e||e===(m==="legacy"?u:h)?t!=null?t:m==="legacy"?i:v:t,[b,y]=(0,Ea.useState)(C);Ea.default.useEffect(()=>{C!==b&&y(C)},[C]);let g=e!=null?e:m==="legacy"?u:h,P,x=Kt();if(m==="legacy")g&&(P=x(g));else if(e){let L=X(e,p);L?P=L:P={name:e,route:e}}else if(typeof c=="string"){let L=X(c,p);L?P=L:P={name:c,route:c}}else P=c;return{queryResult:qr({resource:P==null?void 0:P.name,id:b!=null?b:"",queryOptions:{enabled:b!==void 0,...d},successNotification:r,errorNotification:a,meta:S(n,l),metaData:S(n,l),liveMode:o,onLiveEvent:s,dataProviderName:f}),showId:b,setShowId:y}},$t=w("react"),Ml=w("papaparse"),Dl=D(w("lodash/chunk")),kl=({resourceName:e,resource:t,mapData:r=m=>m,paparseOptions:a,batchSize:n=Number.MAX_SAFE_INTEGER,onFinish:l,meta:o,metaData:s,onProgress:f,dataProviderName:d}={})=>{let[m,p]=(0,$t.useState)(0),[E,c]=(0,$t.useState)(0),[v,u]=(0,$t.useState)(!1),{resource:i}=z(t!=null?t:e),h=tn(),C=Mr(),b;n===1?b=C:b=h;let y=()=>{c(0),p(0),u(!1)},g=x=>{let L={succeeded:x.filter(q=>q.type==="success"),errored:x.filter(q=>q.type==="error")};l==null||l(L),u(!1)};(0,$t.useEffect)(()=>{f==null||f({totalAmount:E,processedAmount:m})},[E,m]);let P=({file:x})=>(y(),new Promise(L=>{u(!0),(0,Ml.parse)(x,{complete:async({data:q})=>{let M=Ua(q,r);if(c(M.length),n===1){let N=M.map(O=>async()=>{var A;return{response:await C.mutateAsync({resource:(A=i==null?void 0:i.name)!=null?A:"",values:O,successNotification:!1,errorNotification:!1,dataProviderName:d,meta:S(o,s),metaData:S(o,s)}),value:O}}),Q=await ta(N,({response:O,value:A})=>(p(R=>R+1),{response:[O.data],type:"success",request:[A]}),(O,A)=>({response:[O],type:"error",request:[M[A]]}));L(Q)}else{let N=(0,Dl.default)(M,n),Q=N.map(A=>async()=>{var R;return{response:await h.mutateAsync({resource:(R=i==null?void 0:i.name)!=null?R:"",values:A,successNotification:!1,errorNotification:!1,dataProviderName:d,meta:S(o,s),metaData:S(o,s)}),value:A,currentBatchLength:A.length}}),O=await ta(Q,({response:A,currentBatchLength:R,value:k})=>(p($=>$+R),{response:A.data,type:"success",request:k}),(A,R)=>({response:[A],type:"error",request:N[R]}));L(O)}},...a})}).then(L=>(g(L),L)));return{inputProps:{type:"file",accept:".csv",onChange:x=>{x.target.files&&x.target.files.length>0&&P({file:x.target.files[0]})}},mutationResult:b,isLoading:v,handleChange:P}},sr=w("react"),Nl=({defaultVisible:e=!1}={})=>{let[t,r]=(0,sr.useState)(e),a=(0,sr.useCallback)(()=>r(!0),[t]),n=(0,sr.useCallback)(()=>r(!1),[t]);return{visible:t,show:a,close:n}},Al=D(w("react")),$r=()=>{let e=ee(),{resource:t,resources:r}=z(),a=we();return Al.default.useCallback(({resource:n,action:l,meta:o})=>{var s;let f=n||t;if(!f)return;let d=(s=fe(f,r,e==="legacy").find(m=>m.action===l))==null?void 0:s.route;return d?Pe(d,a,o):void 0},[r,t,a])},$l=({resource:e,action:t,meta:r,legacy:a})=>$r()({resource:e,action:t,meta:r,legacy:a}),Ca=D(w("react")),zt=()=>{let e=(0,Ca.useContext)(xt);return e!=null&&e.Link?e.Link:({to:t,...r})=>Ca.default.createElement("a",{href:t,...r})},Ol=w("react"),bn=D(w("react")),Ke={useHistory:()=>!1,useLocation:()=>!1,useParams:()=>({}),Prompt:()=>null,Link:()=>null},Rl=bn.default.createContext(Ke),Or=Rl,Il=({children:e,useHistory:t,useLocation:r,useParams:a,Prompt:n,Link:l,routes:o})=>bn.default.createElement(Or.Provider,{value:{useHistory:t!=null?t:Ke.useHistory,useLocation:r!=null?r:Ke.useLocation,useParams:a!=null?a:Ke.useParams,Prompt:n!=null?n:Ke.Prompt,Link:l!=null?l:Ke.Link,routes:o!=null?o:Ke.routes}},e),ie=()=>{let e=(0,Ol.useContext)(Or),{useHistory:t,useLocation:r,useParams:a,Prompt:n,Link:l,routes:o}=e!=null?e:Ke;return{useHistory:t,useLocation:r,useParams:a,Prompt:n,Link:l,routes:o}},Ql=w("react"),Tl=w("@tanstack/react-query"),Pn=D(w("react")),Ht=Pn.default.createContext({}),Ul=({can:e,children:t})=>Pn.default.createElement(Ht.Provider,{value:{can:e}},t),Fl=e=>{let{icon:t,list:r,edit:a,create:n,show:l,clone:o,children:s,meta:f,options:d,...m}=e,{icon:p,...E}=f!=null?f:{},{icon:c,...v}=d!=null?d:{};return{...m,...f?{meta:E}:{},...d?{options:v}:{}}},En=({action:e,resource:t,params:r,queryOptions:a})=>{let{can:n}=(0,Ql.useContext)(Ht),{resource:l,...o}=r!=null?r:{},s=Fl(l!=null?l:{}),f=(0,Tl.useQuery)(["useCan",{action:e,resource:t,params:{...o,resource:s},enabled:a==null?void 0:a.enabled}],()=>{var d;return(d=n==null?void 0:n({action:e,resource:t,params:r}))!=null?d:Promise.resolve({can:!0})},{enabled:typeof n<"u",...a,retry:!1});return typeof n>"u"?{data:{can:!0}}:f},Wl=w("react"),Bl=()=>{let{can:e}=(0,Wl.useContext)(Ht);return{can:e}},dt=w("react"),Kl=D(w("lodash/uniqBy")),zl=D(w("lodash/debounce")),Ot=D(w("lodash/get")),Hl=e=>{var t,r,a;let[n,l]=(0,dt.useState)([]),[o,s]=(0,dt.useState)([]),[f,d]=(0,dt.useState)([]),{resource:m,sort:p,sorters:E,filters:c=[],optionLabel:v="title",optionValue:u="id",debounce:i=300,successNotification:h,errorNotification:C,defaultValueQueryOptions:b,queryOptions:y,fetchSize:g,pagination:P,hasPagination:x=!1,liveMode:L,defaultValue:q=[],onLiveEvent:M,onSearch:N,liveParams:Q,meta:O,metaData:A,dataProviderName:R}=e,{resources:k}=z(),$=X(m,k),I=(t=$==null?void 0:$.name)!=null?t:m,V=Array.isArray(q)?q:[q],te=(0,dt.useCallback)(_=>{d(_.data.map(G=>({label:(0,Ot.default)(G,v),value:(0,Ot.default)(G,u)})))},[v,u]),U=b!=null?b:y,F=Ja({resource:I,ids:V,queryOptions:{...U,enabled:V.length>0&&((r=b==null?void 0:b.enabled)!=null?r:!0),onSuccess:_=>{var G;te(_),(G=U==null?void 0:U.onSuccess)==null||G.call(U,_)}},meta:S(O,A),metaData:S(O,A),liveMode:"off",dataProviderName:R}),ne=(0,dt.useCallback)(_=>{s(_.data.map(G=>({label:(0,Ot.default)(G,v),value:(0,Ot.default)(G,u)})))},[v,u]),me=xr({resource:I,sorters:S(E,p),filters:c.concat(n),pagination:{current:P==null?void 0:P.current,pageSize:(a=P==null?void 0:P.pageSize)!=null?a:g,mode:P==null?void 0:P.mode},hasPagination:x,queryOptions:{...y,onSuccess:_=>{var G;ne(_),(G=y==null?void 0:y.onSuccess)==null||G.call(y,_)}},successNotification:h,errorNotification:C,meta:S(O,A),metaData:S(O,A),liveMode:L,liveParams:Q,onLiveEvent:M,dataProviderName:R}),ke=_=>{if(N){l(N(_));return}if(_)l([{field:v,operator:"contains",value:_}]);else{l([]);return}};return{queryResult:me,defaultValueQueryResult:F,options:(0,dt.useMemo)(()=>(0,Kl.default)([...o,...f],"value"),[o,f]),onSearch:(0,zl.default)(ke,i)}},rt=D(w("react")),wa=D(w("qs")),Rt=D(w("lodash/differenceWith")),It=D(w("lodash/isEqual")),jl=D(w("warn-once")),La=[],Sa=[];function _l({initialCurrent:e,initialPageSize:t,hasPagination:r=!0,pagination:a,initialSorter:n,permanentSorter:l=Sa,defaultSetFilterBehavior:o,initialFilter:s,permanentFilter:f=La,filters:d,sorters:m,syncWithLocation:p,resource:E,successNotification:c,errorNotification:v,queryOptions:u,liveMode:i,onLiveEvent:h,liveParams:C,meta:b,metaData:y,dataProviderName:g}={}){var P,x,L,q,M,N,Q,O,A,R;let{syncWithLocation:k}=gn(),$=p!=null?p:k,I=nn(i),V=ee(),{useLocation:te}=ie(),{search:U,pathname:F}=te(),ne=we(),me=r===!1?"off":"server",ke=((P=a==null?void 0:a.mode)!=null?P:me)!=="off",_=S(a==null?void 0:a.current,e),G=S(a==null?void 0:a.pageSize,t),Te=S(b,y),{parsedCurrent:st,parsedPageSize:Ve,parsedSorter:Ue,parsedFilters:Fe}=wr(U!=null?U:"?"),Ge=S(d==null?void 0:d.initial,s),Y=(x=S(d==null?void 0:d.permanent,f))!=null?x:La,W=S(m==null?void 0:m.initial,n),We=(L=S(m==null?void 0:m.permanent,l))!=null?L:Sa,Jt=(q=S(d==null?void 0:d.defaultBehavior,o))!=null?q:"merge",Ye,Be,H,se;$?(Ye=((M=ne==null?void 0:ne.params)==null?void 0:M.current)||st||_||1,Be=((N=ne==null?void 0:ne.params)==null?void 0:N.pageSize)||Ve||G||10,H=((Q=ne==null?void 0:ne.params)==null?void 0:Q.sorters)||(Ue.length?Ue:W),se=((O=ne==null?void 0:ne.params)==null?void 0:O.filters)||(Fe.length?Fe:Ge)):(Ye=_||1,Be=G||10,H=W,se=Ge);let{replace:Ne}=Se(),Ze=Le(),{resource:xe}=z(E),Ae=xe==null?void 0:xe.name;rt.default.useEffect(()=>{(0,jl.default)(typeof Ae>"u","useTable: `resource` is not defined.")},[Ae]);let[de,$e]=(0,rt.useState)(yr(We,H!=null?H:[])),[Je,Dt]=(0,rt.useState)(gr(Y,se!=null?se:[])),[Pt,Ur]=(0,rt.useState)(Ye),[Xe,Fr]=(0,rt.useState)(Be),kn=({pagination:{current:Z,pageSize:be},sorter:kt,filters:Nt})=>{var At;if(V==="new")return(At=Ze({type:"path",options:{keepHash:!0,keepQuery:!0},query:{...ke?{current:Z,pageSize:be}:{},sorters:kt,filters:Nt,...Wr()}}))!=null?At:"";{let Et=wa.default.parse(U==null?void 0:U.substring(1)),zr=pr({pagination:{pageSize:be,current:Z},sorters:de!=null?de:kt,filters:Nt,...Et});return`${F!=null?F:""}?${zr!=null?zr:""}`}};(0,rt.useEffect)(()=>{U===""&&(Ur(Ye),Fr(Be),$e(yr(We,H!=null?H:[])),Dt(gr(Y,se!=null?se:[])))},[U]);let Wr=()=>{var Z;if(V==="new"){let{sorters:be,filters:kt,pageSize:Nt,current:At,...Et}=(Z=ne==null?void 0:ne.params)!=null?Z:{};return Et}else{let{sorter:be,filters:kt,pageSize:Nt,current:At,...Et}=wa.default.parse(U,{ignoreQueryPrefix:!0});return Et}};(0,rt.useEffect)(()=>{if($){let Z=Wr();if(V==="new")Ze({type:"replace",options:{keepQuery:!0},query:{...ke?{pageSize:Xe,current:Pt}:{},sorters:(0,Rt.default)(de,We,It.default),filters:(0,Rt.default)(Je,Y,It.default)}});else{let be=pr({...ke?{pagination:{pageSize:Xe,current:Pt}}:{},sorters:(0,Rt.default)(de,We,It.default),filters:(0,Rt.default)(Je,Y,It.default),...Z});return Ne==null?void 0:Ne(`${F}?${be}`,void 0,{shallow:!0})}}},[$,Pt,Xe,de,Je]);let Br=xr({resource:Ae,hasPagination:r,pagination:{current:Pt,pageSize:Xe,mode:a==null?void 0:a.mode},filters:Ct(Y,Je),sorters:fr(We,de),queryOptions:u,successNotification:c,errorNotification:v,meta:Te,metaData:Te,liveMode:I,liveParams:C,onLiveEvent:h,dataProviderName:g}),Nn=Z=>{Dt(be=>Ct(Y,Z,be))},An=Z=>{Dt(Ct(Y,Z))},$n=Z=>{Dt(be=>Ct(Y,Z(be)))},On=(Z,be=Jt)=>{typeof Z=="function"?$n(Z):be==="replace"?An(Z):Nn(Z)},Kr=Z=>{$e(()=>fr(We,Z))};return{tableQueryResult:Br,sorters:de,setSorters:Kr,sorter:de,setSorter:Kr,filters:Je,setFilters:On,current:Pt,setCurrent:Ur,pageSize:Xe,setPageSize:Fr,pageCount:Xe?Math.ceil(((R=(A=Br.data)==null?void 0:A.total)!=null?R:0)/Xe):1,createLinkForSyncWithLocation:kn}}var xa=w("react"),dr=w("@tanstack/react-query"),Cn=D(w("react")),jt=Cn.default.createContext({}),Vl=({create:e,get:t,update:r,children:a})=>Cn.default.createElement(jt.Provider,{value:{create:e,get:t,update:r}},a),ot=({logMutationOptions:e,renameMutationOptions:t}={})=>{let r=(0,dr.useQueryClient)(),a=(0,xa.useContext)(jt),n=ae(),{resources:l}=(0,xa.useContext)(St),{data:o,refetch:s,isLoading:f}=Oa({v3LegacyAuthProviderCompatible:Boolean(n==null?void 0:n.isLegacy),queryOptions:{enabled:!!a}}),d=(0,dr.useMutation)(async p=>{var E,c,v,u,i;let h=X(p.resource,l),C=S((E=h==null?void 0:h.meta)==null?void 0:E.audit,(c=h==null?void 0:h.options)==null?void 0:c.audit,(u=(v=h==null?void 0:h.options)==null?void 0:v.auditLog)==null?void 0:u.permissions);if(C&&!fo(C,p.action))return;let b;return f&&(b=await s()),await((i=a.create)==null?void 0:i.call(a,{...p,author:o!=null?o:b==null?void 0:b.data}))},e),m=(0,dr.useMutation)(async p=>{var E;return await((E=a.update)==null?void 0:E.call(a,p))},{onSuccess:p=>{if(p!=null&&p.resource){let E=Ce(p==null?void 0:p.resource);r.invalidateQueries(E.logList())}},...t});return{log:d,rename:m}},Gl=w("react"),Yl=w("@tanstack/react-query"),Zl=({resource:e,action:t,meta:r,author:a,metaData:n,queryOptions:l})=>{let{get:o}=(0,Gl.useContext)(jt),s=Ce(e,void 0,n);return(0,Yl.useQuery)(s.logList(r),()=>{var f;return(f=o==null?void 0:o({resource:e,action:t,author:a,meta:r,metaData:n}))!=null?f:Promise.resolve([])},{enabled:typeof o<"u",...l,retry:!1})},Jl=w("react"),Xl=w("@tanstack/react-query"),lt=()=>{let{resources:e}=z(),t=(0,Xl.useQueryClient)();return(0,Jl.useCallback)(({resource:r,dataProviderName:a,invalidates:n,id:l})=>{if(n===!1)return;let o=Ce(r,T(r,a,e));n.forEach(s=>{switch(s){case"all":t.invalidateQueries(o.all);break;case"list":t.invalidateQueries(o.list());break;case"many":t.invalidateQueries(o.many());break;case"resourceAll":t.invalidateQueries(o.resourceAll);break;case"detail":t.invalidateQueries(o.detail(l||""));break;default:break}})},[])},ei=w("react"),ti=D(w("warn-once")),ri=({meta:e={}}={})=>{let t=ee(),{i18nProvider:r}=(0,ei.useContext)(yt),a=we(),n=j(),{resources:l,resource:o,action:s}=z(),f=[];if(!(o!=null&&o.name))return{breadcrumbs:f};let d=m=>{var p,E,c,v,u,i,h,C;let b=typeof m=="string"?(p=X(m,l,t==="legacy"))!=null?p:{name:m}:m;if(b){let y=S((E=b==null?void 0:b.meta)==null?void 0:E.parent,b==null?void 0:b.parentName);y&&d(y);let g=fe(b,l,t==="legacy").find(L=>L.action==="list"),P=(c=g==null?void 0:g.resource)!=null&&c.list?g==null?void 0:g.route:void 0,x=P?t==="legacy"?P:Pe(P,a,e):void 0;f.push({label:(i=S((v=b.meta)==null?void 0:v.label,(u=b.options)==null?void 0:u.label))!=null?i:n(`${b.name}.${b.name}`,Qt(b.name)),href:x,icon:S((h=b.meta)==null?void 0:h.icon,(C=b.options)==null?void 0:C.icon,b.icon)})}};if(d(o),s&&s!=="list"){let m=`actions.${s}`,p=n(m);typeof r<"u"&&p===m?((0,ti.default)(!0,`[useBreadcrumb]: Breadcrumb missing translate key for the "${s}" action. Please add "actions.${s}" key to your translation file.
For more information, see https://refine.dev/docs/core/hooks/useBreadcrumb/#i18n-support`),f.push({label:n(`buttons.${s}`,Qt(s))})):f.push({label:n(m,Qt(s))})}return{breadcrumbs:f}},cr=D(w("react")),Ut=(e,t,r=!1)=>{let a=[],n=ze(e,t);for(;n;)a.push(n),n=ze(n,t);return a.reverse(),`/${[...a,e].map(l=>{var o,s;return Qe((s=(o=r?l.route:void 0)!=null?o:l.identifier)!=null?s:l.name)}).join("/").replace(/^\//,"")}`},ai=(e,t=!1)=>{let r={item:{name:"__root__"},children:{}};e.forEach(n=>{var l,o;let s=[],f=ze(n,e);for(;f;)s.push(f),f=ze(f,e);s.reverse();let d=r;s.forEach(p=>{var E,c;let v=(c=(E=t?p.route:void 0)!=null?E:p.identifier)!=null?c:p.name;d.children[v]||(d.children[v]={item:p,children:{}}),d=d.children[v]});let m=(o=(l=t?n.route:void 0)!=null?l:n.identifier)!=null?o:n.name;d.children[m]||(d.children[m]={item:n,children:{}})});let a=n=>{let l=[];return Object.keys(n.children).forEach(o=>{let s=Ut(n.children[o].item,e,t),f={...n.children[o].item,key:s,children:a(n.children[o])};l.push(f)}),l};return a(r)},qa=e=>e.split("?")[0].split("#")[0].replace(/(.+)(\/$)/,"$1"),ni=({meta:e,hideOnMissingParameter:t}={hideOnMissingParameter:!0})=>{let r=j(),a=$r(),n=ee(),{resource:l,resources:o}=z(),{pathname:s}=we(),{useLocation:f}=ie(),{pathname:d}=f(),m=n==="legacy"?qa(d):s?qa(s):void 0,p=`/${(m!=null?m:"").replace(/^\//,"")}`,E=l?Ut(l,o,n==="legacy"):p!=null?p:"",c=cr.default.useMemo(()=>{if(!l)return[];let i=ze(l,o),h=[Ut(l,o)];for(;i;)h.push(Ut(i,o)),i=ze(i,o);return h},[]),v=cr.default.useCallback(i=>{var h,C,b,y,g,P,x,L;if(((b=(h=i==null?void 0:i.meta)==null?void 0:h.hide)!=null?b:(C=i==null?void 0:i.options)==null?void 0:C.hide)||!(i!=null&&i.list)&&i.children.length===0)return;let q=i.list?a({resource:i,action:"list",legacy:n==="legacy",meta:e}):void 0;if(!(t&&q&&q.match(/(\/|^):(.+?)(\/|$){1}/)))return{...i,route:q,icon:S((y=i.meta)==null?void 0:y.icon,(g=i.options)==null?void 0:g.icon,i.icon),label:(L=S((P=i==null?void 0:i.meta)==null?void 0:P.label,(x=i==null?void 0:i.options)==null?void 0:x.label))!=null?L:r(`${i.name}.${i.name}`,Lr(i.name,"plural"))}},[n,e,r,t]),u=cr.default.useMemo(()=>{let i=ai(o,n==="legacy"),h=C=>C.flatMap(b=>{let y=h(b.children),g=v({...b,children:y});return g?[g]:[]});return h(i)},[o,n,v]);return{defaultOpenKeys:c,selectedKey:E,menuItems:u}},oi=()=>{let[e,t]=(0,tt.useState)(),r=j(),{push:a}=Se(),n=Le(),l=ee(),{resource:o,action:s}=z();return(0,tt.useEffect)(()=>{o&&s&&t(r("pages.error.info",{action:s,resource:o==null?void 0:o.name},`You may have forgotten to add the "${s}" component to "${o==null?void 0:o.name}" resource.`))},[o,s]),tt.default.createElement(tt.default.Fragment,null,tt.default.createElement("h1",null,r("pages.error.404",void 0,"Sorry, the page you visited does not exist.")),e&&tt.default.createElement("p",null,e),tt.default.createElement("button",{onClick:()=>{l==="legacy"?a("/"):n({to:"/"})}},r("pages.error.backHome",void 0,"Back Home")))},re=D(w("react")),wn=()=>{let[e,t]=(0,re.useState)(""),[r,a]=(0,re.useState)(""),n=j(),l=ae(),{mutate:o}=Pr({v3LegacyAuthProviderCompatible:Boolean(l==null?void 0:l.isLegacy)});return re.default.createElement(re.default.Fragment,null,re.default.createElement("h1",null,n("pages.login.title","Sign in your account")),re.default.createElement("form",{onSubmit:s=>{s.preventDefault(),o({username:e,password:r})}},re.default.createElement("table",null,re.default.createElement("tbody",null,re.default.createElement("tr",null,re.default.createElement("td",null,n("pages.login.username",void 0,"username"),":"),re.default.createElement("td",null,re.default.createElement("input",{type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",autoFocus:!0,required:!0,value:e,onChange:s=>t(s.target.value)}))),re.default.createElement("tr",null,re.default.createElement("td",null,n("pages.login.password",void 0,"password"),":"),re.default.createElement("td",null,re.default.createElement("input",{type:"password",required:!0,size:20,value:r,onChange:s=>a(s.target.value)}))))),re.default.createElement("br",null),re.default.createElement("input",{type:"submit",value:"login"})))},ct=D(w("react")),B=D(w("react")),li=({providers:e,registerLink:t,forgotPasswordLink:r,rememberMe:a,contentProps:n,wrapperProps:l,renderContent:o,formProps:s})=>{let f=ee(),d=zt(),{Link:m}=ie(),p=f==="legacy"?m:d,[E,c]=(0,B.useState)(""),[v,u]=(0,B.useState)(""),[i,h]=(0,B.useState)(!1),C=j(),b=ae(),{mutate:y}=Pr({v3LegacyAuthProviderCompatible:Boolean(b==null?void 0:b.isLegacy)}),g=(L,q)=>L?typeof L=="string"?B.default.createElement(p,{to:L},q):L:null,P=()=>e?e.map(L=>{var q;return B.default.createElement("div",{key:L.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},B.default.createElement("button",{onClick:()=>y({providerName:L.name}),style:{display:"flex",alignItems:"center"}},L==null?void 0:L.icon,(q=L.label)!=null?q:B.default.createElement("label",null,L.label)))}):null,x=B.default.createElement("div",{...n},B.default.createElement("h1",{style:{textAlign:"center"}},C("pages.login.title","Sign in to your account")),P(),B.default.createElement("hr",null),B.default.createElement("form",{onSubmit:L=>{L.preventDefault(),y({email:E,password:v,remember:i})},...s},B.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},B.default.createElement("label",null,C("pages.login.fields.email","Email")),B.default.createElement("input",{name:"email",type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:E,onChange:L=>c(L.target.value)}),B.default.createElement("label",null,C("pages.login.fields.password","Password")),B.default.createElement("input",{type:"password",name:"password",required:!0,size:20,value:v,onChange:L=>u(L.target.value)}),a!=null?a:B.default.createElement(B.default.Fragment,null,B.default.createElement("label",null,C("pages.login.buttons.rememberMe","Remember me"),B.default.createElement("input",{name:"remember",type:"checkbox",size:20,checked:i,value:i.toString(),onChange:()=>{h(!i)}}))),B.default.createElement("br",null),r!=null?r:g("/forgot-password",C("pages.login.buttons.forgotPassword","Forgot password?")),B.default.createElement("input",{type:"submit",value:C("pages.login.signin","Sign in")}),t!=null?t:B.default.createElement("span",null,C("pages.login.buttons.noAccount","Don\u2019t have an account?")," ",g("/register",C("pages.login.register","Sign up"))))));return B.default.createElement("div",{...l},o?o(x):x)},J=D(w("react")),ii=({providers:e,loginLink:t,wrapperProps:r,contentProps:a,renderContent:n,formProps:l})=>{let o=ee(),s=zt(),{Link:f}=ie(),d=o==="legacy"?f:s,[m,p]=(0,J.useState)(""),[E,c]=(0,J.useState)(""),v=j(),u=ae(),{mutate:i,isLoading:h}=Ra({v3LegacyAuthProviderCompatible:Boolean(u==null?void 0:u.isLegacy)}),C=(g,P)=>g?typeof g=="string"?J.default.createElement(d,{to:g},P):g:null,b=()=>e?e.map(g=>{var P;return J.default.createElement("div",{key:g.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},J.default.createElement("button",{onClick:()=>i({providerName:g.name}),style:{display:"flex",alignItems:"center"}},g==null?void 0:g.icon,(P=g.label)!=null?P:J.default.createElement("label",null,g.label)))}):null,y=J.default.createElement("div",{...a},J.default.createElement("h1",{style:{textAlign:"center"}},v("pages.register.title","Sign up for your account")),b(),J.default.createElement("hr",null),J.default.createElement("form",{onSubmit:g=>{g.preventDefault(),i({email:m,password:E})},...l},J.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},J.default.createElement("label",null,v("pages.register.fields.email","Email")),J.default.createElement("input",{name:"email",type:"email",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:m,onChange:g=>p(g.target.value)}),J.default.createElement("label",null,v("pages.register.fields.password","Password")),J.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:E,onChange:g=>c(g.target.value)}),J.default.createElement("input",{type:"submit",value:v("pages.register.buttons.submit","Sign up"),disabled:h}),t!=null?t:J.default.createElement(J.default.Fragment,null,J.default.createElement("span",null,v("pages.login.buttons.haveAccount","Have an account?")," ",C("/login",v("pages.login.signin","Sign in")))))));return J.default.createElement("div",{...r},n?n(y):y)},ve=D(w("react")),ui=({loginLink:e,wrapperProps:t,contentProps:r,renderContent:a,formProps:n})=>{let l=j(),o=ee(),s=zt(),{Link:f}=ie(),d=o==="legacy"?f:s,[m,p]=(0,ve.useState)(""),{mutate:E,isLoading:c}=Ia(),v=(i,h)=>i?typeof i=="string"?ve.default.createElement(d,{to:i},h):i:null,u=ve.default.createElement("div",{...r},ve.default.createElement("h1",{style:{textAlign:"center"}},l("pages.forgotPassword.title","Forgot your password?")),ve.default.createElement("hr",null),ve.default.createElement("form",{onSubmit:i=>{i.preventDefault(),E({email:m})},...n},ve.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},ve.default.createElement("label",null,l("pages.forgotPassword.fields.email","Email")),ve.default.createElement("input",{name:"email",type:"mail",autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:m,onChange:i=>p(i.target.value)}),ve.default.createElement("input",{type:"submit",disabled:c,value:l("pages.forgotPassword.buttons.submit","Send reset instructions")}),ve.default.createElement("br",null),e!=null?e:ve.default.createElement("span",null,l("pages.register.buttons.haveAccount","Have an account? ")," ",v("/login",l("pages.login.signin","Sign in"))))));return ve.default.createElement("div",{...t},a?a(u):u)},pe=D(w("react")),si=({wrapperProps:e,contentProps:t,renderContent:r,formProps:a})=>{let n=j(),l=ae(),{mutate:o,isLoading:s}=Qa({v3LegacyAuthProviderCompatible:Boolean(l==null?void 0:l.isLegacy)}),[f,d]=(0,pe.useState)(""),[m,p]=(0,pe.useState)(""),E=pe.default.createElement("div",{...t},pe.default.createElement("h1",{style:{textAlign:"center"}},n("pages.updatePassword.title","Update Password")),pe.default.createElement("hr",null),pe.default.createElement("form",{onSubmit:c=>{c.preventDefault(),o({password:f,confirmPassword:m})},...a},pe.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},pe.default.createElement("label",null,n("pages.updatePassword.fields.password","New Password")),pe.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:f,onChange:c=>d(c.target.value)}),pe.default.createElement("label",null,n("pages.updatePassword.fields.confirmPassword","Confirm New Password")),pe.default.createElement("input",{name:"confirmPassword",type:"password",required:!0,size:20,value:m,onChange:c=>p(c.target.value)}),pe.default.createElement("input",{type:"submit",disabled:s,value:n("pages.updatePassword.buttons.submit","Update")}))));return pe.default.createElement("div",{...e},r?r(E):E)},di=e=>{let{type:t}=e;return ct.default.createElement(ct.default.Fragment,null,(()=>{switch(t){case"register":return ct.default.createElement(ii,{...e});case"forgotPassword":return ct.default.createElement(ui,{...e});case"updatePassword":return ct.default.createElement(si,{...e});default:return ct.default.createElement(li,{...e})}})())},ce=D(w("react")),Ln=()=>ce.default.createElement(ce.default.Fragment,null,ce.default.createElement("h1",null,"Welcome on board"),ce.default.createElement("p",null,"Your configuration is completed."),ce.default.createElement("p",null,"Now you can get started by adding your resources to the"," ",ce.default.createElement("code",null,"`resources`")," property of ",ce.default.createElement("code",null,"`<Refine>`")),ce.default.createElement("div",{style:{display:"flex",gap:8}},ce.default.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},ce.default.createElement("button",null,"Documentation")),ce.default.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},ce.default.createElement("button",null,"Examples")),ce.default.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},ce.default.createElement("button",null,"Community")))),qe=D(w("react")),ci=()=>qe.default.createElement(qe.default.Fragment,null,qe.default.createElement("h1",null,"Welcome on board"),qe.default.createElement("p",null,"Your configuration is completed."),qe.default.createElement("div",{style:{display:"flex",gap:8}},qe.default.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},qe.default.createElement("button",null,"Documentation")),qe.default.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},qe.default.createElement("button",null,"Examples")),qe.default.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},qe.default.createElement("button",null,"Community")))),K=D(w("react")),mr=w("@tanstack/react-query"),mi=w("@tanstack/react-query-devtools"),vi=w("react"),at=w("react"),pi="4.1.0",fi=()=>{let e=Ta(),t=(0,at.useContext)(jt),r=(0,at.useContext)(wt),a=(0,at.useContext)(Or),n=(0,at.useContext)(Dr),{i18nProvider:l}=(0,at.useContext)(yt),o=(0,at.useContext)(kr),s=(0,at.useContext)(Ht),{resources:f}=z(),d=!!t.create||!!t.get||!!t.update,m=!!(r!=null&&r.publish)||!!(r!=null&&r.subscribe)||!!(r!=null&&r.unsubscribe),p=!!a.useHistory||!!a.Link||!!a.Prompt||!!a.useLocation||!!a.useParams,E=!!n,c=!!(l!=null&&l.changeLocale)||!!(l!=null&&l.getLocale)||!!(l!=null&&l.translate),v=!!o.close||!!o.open,u=!!s.can;return{providers:{auth:e,auditLog:d,live:m,router:p,data:E,i18n:c,notification:v,accessControl:u},version:pi,resourceCount:f.length}},gi=e=>{let t=JSON.stringify(e||{});return typeof btoa<"u"?btoa(t):Buffer.from(t).toString("base64")},yi=()=>{let e=fi();return(0,vi.useEffect)(()=>{if(typeof window>"u"&&!Image)return;let t=new Image;t.src=`https://telemetry.refine.dev/telemetry?payload=${gi(e)}`},[]),null},hi=e=>{let t=["go","parse","back","Link"],r=Object.keys(e).filter(a=>!t.includes(a));return r.length>0?(console.warn(`Unsupported properties are found in \`routerProvider\` prop. You provided \`${r.join(", ")}\`. Supported properties are \`${t.join(", ")}\`. You may wanted to use \`legacyRouterProvider\` prop instead.`),!0):!1},Ma=D(w("react")),bi=e=>{let t=Ma.default.useRef(!1);Ma.default.useEffect(()=>{t.current===!1&&e&&hi(e)&&(t.current=!0)},[e])},Pi=({legacyAuthProvider:e,authProvider:t,dataProvider:r,legacyRouterProvider:a,routerProvider:n,notificationProvider:l,accessControlProvider:o,auditLogProvider:s,resources:f,DashboardPage:d,ReadyPage:m,LoginPage:p,catchAll:E,children:c,liveProvider:v,i18nProvider:u,Title:i,Layout:h,Sider:C,Header:b,Footer:y,OffLayoutArea:g,onLiveEvent:P,options:x})=>{let{optionsWithDefaults:L,disableTelemetryWithDefault:q,reactQueryWithDefaults:M}=Lo({options:x}),N=ln(()=>{var A;return M.clientConfig instanceof mr.QueryClient?M.clientConfig:new mr.QueryClient({...M.clientConfig,defaultOptions:{...M.clientConfig.defaultOptions,queries:{refetchOnWindowFocus:!1,keepPreviousData:!0,...(A=M.clientConfig.defaultOptions)==null?void 0:A.queries}}})},[M.clientConfig]),Q=K.default.useMemo(()=>typeof l=="function"?l:()=>l!=null?l:{},[l])();if(bi(n),a&&!n&&(f!=null?f:[]).length===0)return m?K.default.createElement(m,null):K.default.createElement(Ln,null);let{RouterComponent:O=K.default.Fragment}=n?{}:a!=null?a:{};return K.default.createElement(mr.QueryClientProvider,{client:N},K.default.createElement(cl,{...Q},K.default.createElement(Gn,{...e!=null?e:{},isProvided:Boolean(e)},K.default.createElement(Yn,{...t!=null?t:{},isProvided:Boolean(t)},K.default.createElement(jo,{...r},K.default.createElement(Yo,{liveProvider:v},K.default.createElement(ll,{value:a&&!n?"legacy":"new"},K.default.createElement(ul,{router:n},K.default.createElement(Il,{...a},K.default.createElement(ol,{resources:f!=null?f:[]},K.default.createElement(vl,{i18nProvider:u},K.default.createElement(Ul,{...o!=null?o:{}},K.default.createElement(Vl,{...s!=null?s:{}},K.default.createElement(Ao,null,K.default.createElement(wo,{mutationMode:L.mutationMode,warnWhenUnsavedChanges:L.warnWhenUnsavedChanges,syncWithLocation:L.syncWithLocation,Title:i,undoableTimeout:L.undoableTimeout,catchAll:E,DashboardPage:d,LoginPage:p,Layout:h,Sider:C,Footer:y,Header:b,OffLayoutArea:g,hasDashboard:!!d,liveMode:L.liveMode,onLiveEvent:P,options:L},K.default.createElement(yl,null,K.default.createElement(O,null,c,!q&&K.default.createElement(yi,null),K.default.createElement(xn,null))))))))))))))))),M.devtoolConfig===!1?null:K.default.createElement(mi.ReactQueryDevtools,{initialIsOpen:!1,position:"bottom-right",...M.devtoolConfig}))},Da=w("react"),Sn=({notification:e})=>{let t=j(),{notificationDispatch:r}=gt(),{open:a}=je(),[n,l]=(0,Da.useState)(),o=()=>{if(e.isRunning===!0&&(e.seconds===0&&e.doMutation(),e.isSilent||a==null||a({key:`${e.id}-${e.resource}-notification`,type:"progress",message:t("notifications.undoable",{seconds:lr(e.seconds)},`You have ${lr(e.seconds)} seconds to undo`),cancelMutation:e.cancelMutation,undoableTimeout:lr(e.seconds)}),e.seconds>0)){n&&clearTimeout(n);let s=setTimeout(()=>{r({type:"DECREASE_NOTIFICATION_SECOND",payload:{id:e.id,seconds:e.seconds,resource:e.resource}})},1e3);l(s)}};return(0,Da.useEffect)(()=>{o()},[e]),null},Ft=D(w("react")),Ei=({children:e,Layout:t,Sider:r,Header:a,Title:n,Footer:l,OffLayoutArea:o})=>{let{Layout:s,Footer:f,Header:d,Sider:m,Title:p,OffLayoutArea:E}=Ar(),c=t!=null?t:s;return Ft.default.createElement(c,{Sider:r!=null?r:m,Header:a!=null?a:d,Footer:l!=null?l:f,Title:n!=null?n:p,OffLayoutArea:o!=null?o:E},e,Ft.default.createElement(Ci,null))},Ci=()=>{let{Prompt:e}=ie(),t=j(),{warnWhen:r,setWarnWhen:a}=Nr(),n=l=>(l.preventDefault(),l.returnValue=t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),l.returnValue);return(0,Ft.useEffect)(()=>(r&&window.addEventListener("beforeunload",n),window.removeEventListener("beforeunload",n)),[r]),Ft.default.createElement(e,{when:r,message:t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),setWarnWhen:a})},Ie=D(w("react")),wi=()=>{let e=Le(),[t,r]=Ie.default.useState(void 0);return Ie.default.useEffect(()=>{t&&e(t)},[t]),Ie.default.useCallback(a=>{t||r(a)},[t])};function Li({redirectOnFail:e=!0,appendCurrentPathToQuery:t=!0,children:r,fallback:a,loading:n}){var l,o,s,f,d;let m=ae(),p=Boolean(m==null?void 0:m.isLegacy),E=Er({v3LegacyAuthProviderCompatible:Boolean(m==null?void 0:m.isLegacy)}),c=ee(),v=we(),u=Le(),i=wi(),{replace:h}=Se(),{useLocation:C}=ie(),{pathname:b,search:y}=C(),g=E.isLoading,P=m!=null&&m.isProvided?p?E.isSuccess:(l=E.data)==null?void 0:l.authenticated:!0,x=p?typeof e=="string"?e:"/login":typeof e=="string"?e:(o=E.data)==null?void 0:o.redirectTo;if(g)return n?Ie.default.createElement(Ie.default.Fragment,null,n):null;if(P)return Ie.default.createElement(Ie.default.Fragment,null,r!=null?r:null);if(typeof a>"u"){if(c==="legacy"){let L=t&&b?`?to=${encodeURIComponent(`${b}${y!=null?y:""}`)}`:"",q=b==null?void 0:b.split(/[?#]/)[0];!(q!=null&&q.includes("/login"))&&q!==e&&h(`/${(x!=null?x:"/login").replace(/^\//,"")}${L}`)}else{if(((s=v.pathname)==null?void 0:s.split(/[?#]/)[0])===x)return null;let L=(f=v.params)!=null&&f.to?(d=v.params)==null?void 0:d.to:u({to:v.pathname||"/",options:{keepQuery:!0},type:"path"});x&&i({to:`/${x.replace(/^\//,"")}`,query:L&&typeof L=="string"&&L.length>1?{to:L}:{}})}return null}return Ie.default.createElement(Ie.default.Fragment,null,a)}var Si=w("react"),xn=()=>{let{useLocation:e}=ie(),{checkAuth:t}=Ee(),r=e();return(0,Si.useEffect)(()=>{t==null||t().catch(()=>!1)},[r==null?void 0:r.pathname]),null},mt=D(w("react")),xi=({resource:e,action:t,params:r,fallback:a,children:n,...l})=>{let{data:o}=En({resource:e,action:t,params:r});return o!=null&&o.can?mt.default.isValidElement(n)?mt.default.cloneElement(n,l):mt.default.createElement(mt.default.Fragment,null,n):(o==null?void 0:o.can)===!1?mt.default.createElement(mt.default.Fragment,null,a!=null?a:null):null},vt=D(w("react")),qi=[`
    .banner::before,
    .banner::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }
    `,`
    .banner::before {
        background-image: linear-gradient(
            270deg,
            rgba(255, 76, 77, 0.35) 0%,
            rgba(255, 153, 51, 0.35) 12.5%,
            rgba(255, 191, 0, 0.35) 25%,
            rgba(38, 217, 127, 0.35) 37.5%,
            rgba(71, 235, 235, 0.35) 50%,
            rgba(0, 128, 255, 0.35) 62.5%,
            rgba(51, 51, 255, 0.35) 75%,
            rgba(128, 0, 255, 0.35) 87.5%,
            rgba(237, 94, 201, 0.35) 100%
        );
        background-position: 0 0;
        background-size: 200% 100%;
        background-repeat: repeat-x;
        animation: bgpos 4s linear infinite;
      }
    `,`
    .banner::after {
        background: linear-gradient(
          180deg,
          rgba(13, 13, 13, 0.85) 0%,
          rgba(13, 13, 13, 0) 100%
        );
    }
    `,`
    @keyframes bgpos {
        0% {
            background-position: 0 0;
        }

        100% {
            background-position: -200% 0;
        }
    }
    `,`
    .gh-link, .gh-link:hover, .gh-link:active, .gh-link:visited, .gh-link:focus {
        text-decoration: none;
        z-index: 9;
    }
    `],Mi=()=>((0,vt.useEffect)(()=>{let e=document.createElement("style");document.head.appendChild(e),qi.forEach(t=>{var r;return(r=e.sheet)==null?void 0:r.insertRule(t,e.sheet.cssRules.length)})},[]),vt.default.createElement("div",{className:"banner",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",position:"relative",padding:"8px 16px",backgroundColor:"#0d0d0d",borderBottom:"1px solid rgba(255, 255, 255, 0.15)"}},vt.default.createElement("a",{className:"gh-link",href:"https://s.refine.dev/github-support",target:"_blank",rel:"noreferrer"},vt.default.createElement("div",{className:"content",style:{position:"relative",zIndex:2,color:"#fff",display:"flex",flexDirection:"row",gap:"8px"}},vt.default.createElement("span",{className:"wizard",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"32px",height:"32px",fontSize:"32px",lineHeight:"32px"}},"\u{1F9D9}\u200D\u2642\uFE0F"),vt.default.createElement("span",{className:"text",style:{padding:"4px 0",fontSize:"16px",lineHeight:"24px",textShadow:"0px 0px 4px rgba(255, 255, 255, 0.5)"}},"Refine grants your wishes! Please give us a \u2B50\uFE0F on GitHub to keep the magic going.")))))});var De={};Wn(De,{RefineKbar:()=>Tr,RefineKbarPropsContext:()=>Zt,RefineKbarProvider:()=>ki,useRefineKbar:()=>qt});var Mt=et(w("react")),Dn=w("kbar");Oe(De,w("kbar"));var ut=w("react"),oe=et(Rr()),he=w("kbar");var it=e=>e.replace(/\w\S*/g,t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase());var Mn=et(Rr());var qt=()=>{let e=(0,oe.useTranslate)(),{resource:t,resources:r,id:a,action:n}=(0,oe.useResource)(),l=(0,oe.useRouterType)(),o=(0,Mn.useGetToPath)(),s=(0,oe.useGo)(),{mutate:f}=(0,oe.useDelete)(),{push:d,list:m,create:p,show:E,edit:c}=(0,oe.useNavigation)(),v=(0,ut.useContext)(he.KBarContext),{can:u}=(0,oe.useCanWithoutCache)(),[i,h]=(0,ut.useState)([]);(0,ut.useEffect)(()=>{(async()=>await Promise.all(C().flatMap(g=>b(g))))().then(g=>h(g.flatMap(P=>P)))},[r,a,t,n]),(0,ut.useEffect)(()=>{i.length===0&&v.query.setVisualState(he.VisualState.hidden)},[i]);let C=()=>{let y=[...r],g=y==null?void 0:y.findIndex(P=>{var x,L;return((x=P.identifier)!=null?x:P==null?void 0:P.name)===((L=t==null?void 0:t.identifier)!=null?L:t==null?void 0:t.name)});if(g>0){let P=y[g];y.splice(g,1),y.splice(0,0,P)}return y},b=async y=>{var F,ne,me,ke,_,G,Te,st,Ve,Ue,Fe,Ge;let{name:g,label:P,list:x,create:L,canCreate:q,canEdit:M,canShow:N,icon:Q,show:O,canDelete:A,edit:R,route:k}=y,$=(ke=(me=(F=y==null?void 0:y.meta)==null?void 0:F.label)!=null?me:(ne=y==null?void 0:y.options)==null?void 0:ne.label)!=null?ke:P,I=(st=(Te=(_=y==null?void 0:y.meta)==null?void 0:_.icon)!=null?Te:(G=y==null?void 0:y.options)==null?void 0:G.icon)!=null?st:Q,V=(Ge=(Fe=(Ve=y==null?void 0:y.meta)==null?void 0:Ve.canDelete)!=null?Fe:(Ue=y==null?void 0:y.options)==null?void 0:Ue.canDelete)!=null?Ge:A,te=$!=null?$:e(`${y.name}.${y.name}`,(0,oe.userFriendlyResourceName)(y.name,"plural")),U=[];if(x&&(t!==void 0&&(t==null?void 0:t.name)!==g||n!==void 0&&(t==null?void 0:t.name)===g)){let{can:Y}=await(u==null?void 0:u({resource:g,action:"show",params:{id:a,resource:y}}))||{can:!0};Y&&U.push((0,he.createAction)({name:e("actions.list",it("list")),section:te,icon:I,perform:()=>{let W=o({resource:y,action:"list",legacy:l==="legacy"});W&&(l==="legacy"?d(W):s({to:W}))}}))}if((q||!!L)&&L&&(n!=="create"||(t==null?void 0:t.name)!==g)){let{can:Y}=await(u==null?void 0:u({resource:g,action:"create",params:{resource:y}}))||{can:!0};Y&&U.push((0,he.createAction)({name:e("actions.create",it("create")),section:te,icon:I,keywords:"new",perform:()=>{let W=o({resource:y,action:"create",legacy:l==="legacy"});W&&(l==="legacy"?d(W):s({to:W}))}}))}if((t==null?void 0:t.name)===g&&a){if((N||!!O)&&O&&n!=="show"){let{can:Y}=await(u==null?void 0:u({resource:g,action:"show",params:{id:a,resource:y}}))||{can:!0};Y&&U.push((0,he.createAction)({name:e("actions.show",it("show")),section:te,icon:I,perform:()=>{let W=o({resource:y,action:"show",legacy:l==="legacy",meta:{id:a}});W&&(l==="legacy"?d(W):s({to:W}))}}))}if((M||!!R)&&R&&n!=="edit"){let{can:Y}=await(u==null?void 0:u({resource:g,action:"show",params:{id:a,resource:y}}))||{can:!0};Y&&U.push((0,he.createAction)({name:e("actions.edit",it("edit")),section:te,icon:I,perform:()=>{let W=o({resource:y,action:"edit",legacy:l==="legacy",meta:{id:a}});W&&(l==="legacy"?d(W):s({to:W}))}}))}if(V){let{can:Y}=await(u==null?void 0:u({resource:g,action:"show",params:{id:a,resource:y}}))||{can:!0};Y&&U.push({id:"delete",name:e("actions.delete",it("delete")),section:te,icon:I},(0,he.createAction)({name:e("buttons.delete",it("delete")),section:e("buttons.confirm","Are you sure?"),parent:"delete",perform:()=>{f({resource:y.name,id:a},{onSuccess:()=>{let W=o({resource:y,action:"list",legacy:l==="legacy"});W&&(l==="legacy"?d(W):s({to:W}))}})}}),(0,he.createAction)({name:e("buttons.cancel","Cancel"),parent:"delete",perform:()=>null}))}}return U};(0,he.useRegisterActions)(i,[i])};var bt=et(w("react")),_e=w("kbar");var Ir=()=>bt.default.createElement(_e.KBarPortal,null,bt.default.createElement(_e.KBarPositioner,{style:{opacity:1,transition:"background 0.35s cubic-bezier(0.4, 0, 0.2, 1) 0s",backdropFilter:"saturate(180%) blur(1px)",background:"rgba(0, 0, 0, 0.1)",zIndex:"9999"}},bt.default.createElement(_e.KBarAnimator,{style:{maxWidth:"600px",width:"100%",background:"white",color:"black",borderRadius:"8px",overflow:"hidden",boxShadow:"0px 4px 4px rgba(0, 0, 0, 0.25)"}},bt.default.createElement(_e.KBarSearch,{style:{padding:"12px 16px",fontSize:"16px",width:"100%",boxSizing:"border-box",outline:"none",border:"none",background:"rgb(252 252 252)",color:"black"}}),bt.default.createElement(Qr,null))));var _t=et(w("react")),Vt=w("kbar");var Di={padding:"8px 16px",fontSize:"14px",textTransform:"uppercase",fontWeight:"bold",opacity:.5},Qr=()=>{let{results:e,rootActionId:t}=(0,Vt.useMatches)();return _t.default.createElement(Vt.KBarResults,{items:e,onRender:({item:r,active:a})=>typeof r=="string"?_t.default.createElement("div",{style:Di},r):_t.default.createElement(Gt,{action:r,active:a,currentRootActionId:t})})};var ue=et(w("react")),Gt=ue.default.forwardRef(({action:e,active:t,currentRootActionId:r},a)=>{var l;let n=ue.default.useMemo(()=>{if(!r)return e.ancestors;let o=e.ancestors.findIndex(s=>s.id===r);return e.ancestors.slice(o+1)},[e.ancestors,r]);return ue.default.createElement("div",{ref:a,style:{padding:"12px 16px",background:t?"rgba(0 0 0 / 0.05)":"transparent",borderLeft:`2px solid ${t?"rgb(28 28 29)":"transparent"}`,display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"}},ue.default.createElement("div",{style:{display:"flex",gap:"8px",alignItems:"center",fontSize:14}},e.icon&&e.icon,ue.default.createElement("div",{style:{display:"flex",flexDirection:"column"}},ue.default.createElement("div",null,n.length>0&&n.map(o=>ue.default.createElement(ue.default.Fragment,{key:o.id},ue.default.createElement("span",{style:{opacity:.5,marginRight:8}},o.name),ue.default.createElement("span",{style:{marginRight:8}},"\u203A"))),ue.default.createElement("span",{style:{color:e.name.toLocaleUpperCase()==="DELETE"?"red":"black"}},e.name)),e.subtitle&&ue.default.createElement("span",{style:{fontSize:12}},e.subtitle))),(l=e.shortcut)!=null&&l.length?ue.default.createElement("div",{"aria-hidden":!0,style:{display:"grid",gridAutoFlow:"column",gap:"4px"}},e.shortcut.map(o=>ue.default.createElement("kbd",{key:o,style:{padding:"4px 6px",background:"rgba(0 0 0 / .1)",borderRadius:"4px",fontSize:14}},o))):null)});Gt.displayName="ResultItem";var Yt=et(w("react"));var Tr=({commandBarProps:e})=>{let t=(0,Yt.useContext)(Zt);qt();let r={...t,...e};return Yt.default.createElement(Ir,{...r})};var Zt=(0,Mt.createContext)({}),ki=({children:e,commandBarProps:t})=>Mt.default.createElement(Zt.Provider,{value:t!=null?t:{}},Mt.default.createElement(Dn.KBarProvider,null,e));})();
//# sourceMappingURL=index.js.map