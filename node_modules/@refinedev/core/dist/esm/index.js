import Nt,{useEffect as qa,useState as ei}from"react";import lt from"react";var uo=lt.createContext({}),co=({children:e,isProvided:t,...r})=>{let{replace:o}=se(),s=async p=>{var d;try{return await((d=r.login)==null?void 0:d.call(r,p))}catch(l){return Promise.reject(l)}},a=async p=>{var d;try{return await((d=r.register)==null?void 0:d.call(r,p))}catch(l){return Promise.reject(l)}},n=async p=>{var d;try{return await((d=r.logout)==null?void 0:d.call(r,p))}catch(l){return Promise.reject(l)}},u=async p=>{var d;try{return await((d=r.checkAuth)==null?void 0:d.call(r,p)),Promise.resolve()}catch(l){return l!=null&&l.redirectPath&&o(l.redirectPath),Promise.reject(l)}};return lt.createElement(uo.Provider,{value:{...r,login:s,logout:n,checkAuth:u,register:a,isProvided:t}},e)},po=lt.createContext({}),lo=({children:e,isProvided:t,...r})=>{let o=async d=>{var l;try{return await((l=r.login)==null?void 0:l.call(r,d))}catch(c){return console.warn("Unhandled Error in login: refine always expects a resolved promise.",c),Promise.reject(c)}},s=async d=>{var l;try{return await((l=r.register)==null?void 0:l.call(r,d))}catch(c){return console.warn("Unhandled Error in register: refine always expects a resolved promise.",c),Promise.reject(c)}},a=async d=>{var l;try{return await((l=r.logout)==null?void 0:l.call(r,d))}catch(c){return console.warn("Unhandled Error in logout: refine always expects a resolved promise.",c),Promise.reject(c)}},n=async d=>{var l;try{let c=await((l=r.check)==null?void 0:l.call(r,d));return Promise.resolve(c)}catch(c){return console.warn("Unhandled Error in check: refine always expects a resolved promise.",c),Promise.reject(c)}},u=async d=>{var l;try{let c=await((l=r.forgotPassword)==null?void 0:l.call(r,d));return Promise.resolve(c)}catch(c){return console.warn("Unhandled Error in forgotPassword: refine always expects a resolved promise.",c),Promise.reject(c)}},p=async d=>{var l;try{let c=await((l=r.updatePassword)==null?void 0:l.call(r,d));return Promise.resolve(c)}catch(c){return console.warn("Unhandled Error in updatePassword: refine always expects a resolved promise.",c),Promise.reject(c)}};return lt.createElement(po.Provider,{value:{...r,login:o,logout:a,check:n,register:s,forgotPassword:u,updatePassword:p,isProvided:t}},e)},X=()=>lt.useContext(uo),oe=()=>lt.useContext(po);import{useQuery as mo}from"@tanstack/react-query";function Fs({v3LegacyAuthProviderCompatible:e=!1,options:t}={}){let{getPermissions:r}=X(),{getPermissions:o}=oe(),s=mo(["usePermissions"],o!=null?o:()=>Promise.resolve(void 0),{enabled:!e&&!!o,...e?{}:t}),a=mo(["usePermissions","v3LegacyAuthProviderCompatible"],r!=null?r:()=>Promise.resolve(void 0),{enabled:e&&!!r,...e?t:{}});return e?a:s}import{useQuery as fo}from"@tanstack/react-query";function yr({v3LegacyAuthProviderCompatible:e=!1,queryOptions:t}={}){let{getUserIdentity:r}=X(),{getIdentity:o}=oe(),s=fo(["getUserIdentity"],o!=null?o:()=>Promise.resolve({}),{enabled:!e&&!!o,retry:!1,...e===!0?{}:t}),a=fo(["getUserIdentity","v3LegacyAuthProviderCompatible"],r!=null?r:()=>Promise.resolve({}),{enabled:e&&!!r,retry:!1,...e?t:{}});return e?a:s}import{useMutation as yo}from"@tanstack/react-query";import{useQueryClient as Ns}from"@tanstack/react-query";var mt=()=>{let e=Ns();return async()=>{await Promise.all([e.invalidateQueries(["useAuthenticated"]),e.invalidateQueries(["getUserIdentity"]),e.invalidateQueries(["usePermissions"])])}};function zt({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=mt(),o=H(),s=ne(),{push:a}=se(),{open:n,close:u}=Te(),{logout:p}=X(),{logout:d}=oe(),l=yo(["useLogout"],d,{onSuccess:async(T,R)=>{let{success:v,error:U,redirectTo:i}=T,{redirectPath:y}=R!=null?R:{},f=y!=null?y:i;v&&(u==null||u("useLogout-error")),(U||!v)&&(n==null||n(gr(U))),await r(),f!==!1&&(o==="legacy"?a(f!=null?f:"/login"):f&&s({to:f}))},onError:T=>{n==null||n(gr(T))},...e===!0?{}:t}),c=yo(["useLogout","v3LegacyAuthProviderCompatible"],p,{onSuccess:async(T,R)=>{var U;let v=(U=R==null?void 0:R.redirectPath)!=null?U:T;if(await r(),v!==!1){if(v){o==="legacy"?a(v):s({to:v});return}o==="legacy"?a("/login"):s({to:"/login"})}},onError:T=>{n==null||n(gr(T))},...e?t:{}});return e?c:l}var gr=e=>({key:"useLogout-error",type:"error",message:(e==null?void 0:e.name)||"Logout Error",description:(e==null?void 0:e.message)||"Something went wrong during logout"});import Hs from"react";import{useMutation as go}from"@tanstack/react-query";import Os from"qs";function Et({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=mt(),o=H(),s=ne(),{replace:a}=se(),n=j(),{useLocation:u}=K(),{search:p}=u(),{close:d,open:l}=Te(),{login:c}=X(),{login:T}=oe(),R=Hs.useMemo(()=>{var i;return o==="legacy"?Os.parse(p,{ignoreQueryPrefix:!0}).to:(i=n.params)==null?void 0:i.to},[o,n.params,p]),v=go(["useLogin"],T,{onSuccess:async({success:i,redirectTo:y,error:f})=>{i&&(d==null||d("login-error")),(f||!i)&&(l==null||l(Tr(f))),await r(),R&&i?o==="legacy"?a(R):s({to:R,type:"replace"}):y?o==="legacy"?a(y):s({to:y,type:"replace"}):o==="legacy"&&a("/")},onError:i=>{l==null||l(Tr(i))},...e===!0?{}:t}),U=go(["useLogin","v3LegacyAuthProviderCompatible"],c,{onSuccess:async i=>{await r(),R&&a(R),i!==!1&&!R&&(typeof i=="string"?o==="legacy"?a(i):s({to:i,type:"replace"}):o==="legacy"?a("/"):s({to:"/",type:"replace"})),d==null||d("login-error")},onError:i=>{l==null||l(Tr(i))},...e?t:{}});return e?U:v}var Tr=e=>({message:(e==null?void 0:e.name)||"Login Error",description:(e==null?void 0:e.message)||"Invalid credentials",key:"login-error",type:"error"});import{useMutation as To}from"@tanstack/react-query";function xr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=mt(),o=H(),s=ne(),{replace:a}=se(),{register:n}=X(),{register:u}=oe(),{close:p,open:d}=Te(),l=To(["useRegister"],u,{onSuccess:async({success:T,redirectTo:R,error:v})=>{T&&(p==null||p("register-error")),(v||!T)&&(d==null||d(Rr(v))),await r(),R?o==="legacy"?a(R):s({to:R,type:"replace"}):o==="legacy"&&a("/")},onError:T=>{d==null||d(Rr(T))},...e===!0?{}:t}),c=To(["useRegister","v3LegacyAuthProviderCompatible"],n,{onSuccess:async T=>{await r(),T!==!1&&(T?o==="legacy"?a(T):s({to:T,type:"replace"}):o==="legacy"?a("/"):s({to:"/",type:"replace"}),p==null||p("register-error"))},onError:T=>{d==null||d(Rr(T))},...e?t:{}});return e?c:l}var Rr=e=>({message:(e==null?void 0:e.name)||"Register Error",description:(e==null?void 0:e.message)||"Error while registering",key:"register-error",type:"error"});import{useMutation as Ro}from"@tanstack/react-query";function Pr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=H(),o=ne(),{replace:s}=se(),{forgotPassword:a}=X(),{forgotPassword:n}=oe(),{close:u,open:p}=Te(),d=Ro(["useForgotPassword"],n,{onSuccess:({success:c,redirectTo:T,error:R})=>{c&&(u==null||u("forgot-password-error")),(R||!c)&&(p==null||p(Cr(R))),T&&(r==="legacy"?s(T):o({to:T,type:"replace"}))},onError:c=>{p==null||p(Cr(c))},...e===!0?{}:t}),l=Ro(["useForgotPassword","v3LegacyAuthProviderCompatible"],a,{onSuccess:c=>{c!==!1&&c&&(r==="legacy"?s(c):o({to:c,type:"replace"})),u==null||u("forgot-password-error")},onError:c=>{p==null||p(Cr(c))},...e?t:{}});return e?l:d}var Cr=e=>({message:(e==null?void 0:e.name)||"Forgot Password Error",description:(e==null?void 0:e.message)||"Error while resetting password",key:"forgot-password-error",type:"error"});import $s from"react";import{useMutation as xo}from"@tanstack/react-query";import Gs from"qs";function hr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=H(),o=ne(),{replace:s}=se(),{updatePassword:a}=X(),{updatePassword:n}=oe(),{close:u,open:p}=Te(),d=j(),{useLocation:l}=K(),{search:c}=l(),T=$s.useMemo(()=>{var U;if(r==="legacy"){let i=Gs.parse(c,{ignoreQueryPrefix:!0});return i!=null?i:{}}else return(U=d.params)!=null?U:{}},[c,d,r]),R=xo(["useUpdatePassword"],async U=>n==null?void 0:n({...T,...U}),{onSuccess:({success:U,redirectTo:i,error:y})=>{U&&(u==null||u("update-password-error")),(y||!U)&&(p==null||p(br(y))),i&&(r==="legacy"?s(i):o({to:i,type:"replace"}))},onError:U=>{p==null||p(br(U))},...e===!0?{}:t}),v=xo(["useUpdatePassword","v3LegacyAuthProviderCompatible"],async U=>a==null?void 0:a({...T,...U}),{onSuccess:U=>{U!==!1&&U&&(r==="legacy"?s(U):o({to:U,type:"replace"})),u==null||u("update-password-error")},onError:U=>{p==null||p(br(U))},...e?t:{}});return e?v:R}var br=e=>({message:(e==null?void 0:e.name)||"Update Password Error",description:(e==null?void 0:e.message)||"Error while updating password",key:"update-password-error",type:"error"});import{useQuery as Co}from"@tanstack/react-query";function _t({v3LegacyAuthProviderCompatible:e=!1,params:t}={}){let{checkAuth:r}=X(),{check:o}=oe(),s=Co(["useAuthenticated",t],async()=>{var n;return(n=await(o==null?void 0:o(t)))!=null?n:{}},{retry:!1,enabled:!e}),a=Co(["useAuthenticated",t,"v3LegacyAuthProviderCompatible"],async()=>{var n;return(n=await(r==null?void 0:r(t)))!=null?n:{}},{retry:!1,enabled:e});return e?a:s}var Ws=_t;import{useMutation as Po}from"@tanstack/react-query";function q({v3LegacyAuthProviderCompatible:e=!1}={}){let t=H(),r=ne(),{replace:o}=se(),{checkError:s}=X(),{onError:a}=oe(),{mutate:n}=zt({v3LegacyAuthProviderCompatible:Boolean(e)}),{mutate:u}=zt({v3LegacyAuthProviderCompatible:Boolean(e)}),p=Po(["useCheckError"],a,{onSuccess:({logout:l,redirectTo:c})=>{if(l){u({redirectPath:c});return}if(c){t==="legacy"?o(c):r({to:c,type:"replace"});return}}}),d=Po(["useCheckError","v3LegacyAuthProviderCompatible"],s,{onError:l=>{n({redirectPath:l})}});return e?d:p}var Ks=q;var vr=()=>{let{isProvided:e}=X(),{isProvided:t}=oe();return Boolean(t||e)};import{useQuery as rn}from"@tanstack/react-query";var Ut=e=>e/1e3;import zs from"lodash/zip";import _s from"lodash/fromPairs";var jt=(e,t=r=>r)=>{let[r,...o]=e;return o.map(s=>_s(zs(r,s))).map((s,a,n)=>t.call(void 0,s,a,n))};import Eo from"pluralize";import Dr from"qs";import bo from"lodash/unionWith";import ho from"lodash/differenceWith";import js from"warn-once";var Zt=e=>{var n;let{current:t,pageSize:r,sorter:o,sorters:s,filters:a}=Dr.parse(e.substring(1));return{parsedCurrent:t&&Number(t),parsedPageSize:r&&Number(r),parsedSorter:(n=L(s,o))!=null?n:[],parsedFilters:a!=null?a:[]}},Zs=e=>{let t=Dr.stringify(e);return Zt(`/${t}`)},Yt=e=>{let t={skipNulls:!0,arrayFormat:"indices",encode:!1},{pagination:r,sorter:o,sorters:s,filters:a,...n}=e;return Dr.stringify({...n,...r||{},sorters:L(s,o),filters:a},t)},vo=(e,t)=>e.operator!=="and"&&e.operator!=="or"&&t.operator!=="and"&&t.operator!=="or"?("field"in e?e.field:void 0)==("field"in t?t.field:void 0)&&e.operator==t.operator:("key"in e?e.key:void 0)==("key"in t?t.key:void 0)&&e.operator==t.operator,Do=(e,t)=>e.field==t.field,ft=(e,t,r=[])=>(t.filter(s=>(s.operator==="or"||s.operator==="and")&&!s.key).length>1&&js(!0,`[conditionalFilters]: You have created multiple Conditional Filters at the top level, this requires the key parameter. 
For more information, see https://refine.dev/docs/advanced-tutorials/data-provider/handling-filters/#top-level-multiple-conditional-filters-usage`),bo(e,t,r,vo).filter(s=>s.value!==void 0&&s.value!==null&&(s.operator!=="or"||s.operator==="or"&&s.value.length!==0)&&(s.operator!=="and"||s.operator==="and"&&s.value.length!==0))),Jt=(e,t)=>bo(e,t,Do).filter(r=>r.order!==void 0&&r.order!==null),Xt=(e,t)=>[...ho(t,e,vo),...e],qt=(e,t)=>[...ho(t,e,Do),...e],Ys=(e,t)=>{if(!t)return;let r=t.find(o=>o.field===e);if(r)return r.order},Js=(e,t,r="eq")=>{let o=t==null?void 0:t.find(s=>{if(s.operator!=="or"&&s.operator!=="and"&&"field"in s){let{operator:a,field:n}=s;return n===e&&a===r}});if(o)return o.value||[]};var Xs=e=>new Promise((t,r)=>{let o=new FileReader,s=()=>{o.result&&(o.removeEventListener("load",s,!1),t(o.result))};o.addEventListener("load",s,!1),o.readAsDataURL(e.originFileObj),o.onerror=a=>(o.removeEventListener("load",s,!1),r(a))});var yt=(e="",t)=>{let r=rt(e);return t==="singular"?Eo.singular(r):Eo.plural(r)};var Uo=(e={})=>e!=null&&e.id?{...e,id:decodeURIComponent(e.id)}:e;var L=(...e)=>e.find(t=>typeof t<"u");var J=(e,t,r,o)=>{let s=t||"default",a={all:[s],resourceAll:[s,e||""],list:n=>[...a.resourceAll,"list",{...n,...L(r,o)||{}}],many:n=>[...a.resourceAll,"getMany",n&&n.map(String),{...L(r,o)||{}}].filter(u=>u!==void 0),detail:n=>[...a.resourceAll,"detail",n==null?void 0:n.toString(),{...L(r,o)||{}}],logList:n=>["logList",e,n,o].filter(u=>u!==void 0)};return a};var Er=(e,t)=>!e||!t?!1:!!e.find(r=>r===t);var ot=e=>e.startsWith(":");var Fe=e=>e.split("/").filter(r=>r!=="");var Ur=(e,t)=>{let r=Fe(e),o=Fe(t);return r.length===o.length};var le=e=>e.replace(/^\/|\/$/g,"");var Mr=(e,t)=>{let r=le(e),o=le(t);if(!Ur(r,o))return!1;let s=Fe(r);return Fe(o).every((n,u)=>ot(n)||n===s[u])};var Lr=(e,t,r)=>{let o=le(r||""),s=`${o}${o?"/":""}${e}`;return t==="list"?s=`${s}`:t==="create"?s=`${s}/create`:t==="edit"?s=`${s}/edit/:id`:t==="show"?s=`${s}/show/:id`:t==="clone"&&(s=`${s}/clone/:id`),`/${s.replace(/^\//,"")}`};var Ce=(e,t)=>{var s,a;let r=L((s=e.meta)==null?void 0:s.parent,(a=e.options)==null?void 0:a.parent,e.parentName);if(!r)return;let o=t.find(n=>{var u;return((u=n.identifier)!=null?u:n.name)===r});return o!=null?o:{name:r}};var Mt=(e,t,r)=>{let o=[],s=Ce(e,t);for(;s;)o.push(s),s=Ce(s,t);if(o.length!==0)return`/${o.reverse().map(a=>{var u,p;let n=r&&(p=(u=a.options)==null?void 0:u.route)!=null?p:a.name;return le(n)}).join("/")}`};var pe=(e,t,r)=>{let o=[],s=["list","show","edit","create","clone"],a=Mt(e,t,r);return s.forEach(n=>{var d,l,c,T;let u=r&&n==="clone"?e.create:e[n],p;typeof u=="function"||r?p=Lr(r&&(T=(c=(d=e.meta)==null?void 0:d.route)!=null?c:(l=e.options)==null?void 0:l.route)!=null?T:e.name,n,r?a:void 0):typeof u=="string"?p=u:typeof u=="object"&&(p=u.path),p&&o.push({action:n,resource:e,route:`/${p.replace(/^\//,"")}`})}),o};var Mo=e=>{var s,a;if(e.length===0)return;if(e.length===1)return e[0];let t=e.map(n=>({...n,splitted:Fe(le(n.route))})),r=(a=(s=t[0])==null?void 0:s.splitted.length)!=null?a:0,o=[...t];for(let n=0;n<r;n++){let u=o.filter(p=>!ot(p.splitted[n]));if(u.length!==0){if(u.length===1){o=u;break}o=u}}return o[0]};var Ir=(e,t)=>{let o=t.flatMap(a=>pe(a,t)).filter(a=>Mr(e,a.route)),s=Mo(o);return{found:!!s,resource:s==null?void 0:s.resource,action:s==null?void 0:s.action,matchedRoute:s==null?void 0:s.route}};var er=(e,t)=>{var s,a,n;let r,o=Mt(e,t,!0);if(o){let u=L(e.meta,e.options);r=`${o}/${(s=u==null?void 0:u.route)!=null?s:e.name}`}else r=(n=(a=e.options)==null?void 0:a.route)!=null?n:e.name;return`/${r.replace(/^\//,"")}`};var Lo=e=>{var n,u,p;let t=[],r={},o={},s,a;for(let d=0;d<e.length;d++){s=e[d];let l=(p=(u=s.route)!=null?u:(n=L(s==null?void 0:s.meta,s.options))==null?void 0:n.route)!=null?p:"";r[l]=s,r[l].children=[],o[s.name]=s,o[s.name].children=[]}for(let d in r)r.hasOwnProperty(d)&&(a=r[d],a.parentName&&o[a.parentName]?o[a.parentName].children.push(a):t.push(a));return t};var rt=e=>(e=e.replace(/([a-z]{1})([A-Z]{1})/g,"$1-$2"),e=e.replace(/([A-Z]{1})([A-Z]{1})([a-z]{1})/g,"$1-$2$3"),e=e.toLowerCase().replace(/[_-]+/g," ").replace(/\s{2,}/g," ").trim(),e=e.charAt(0).toUpperCase()+e.slice(1),e);import Io from"react";import qs from"react";var wr=({children:e})=>qs.createElement("div",null,e);var Ne={mutationMode:"pessimistic",syncWithLocation:!1,undoableTimeout:5e3,warnWhenUnsavedChanges:!1,liveMode:"off",redirect:{afterCreate:"list",afterClone:"list",afterEdit:"list"}},ge=Io.createContext({hasDashboard:!1,mutationMode:"pessimistic",warnWhenUnsavedChanges:!1,syncWithLocation:!1,undoableTimeout:5e3,Title:void 0,Sider:void 0,Header:void 0,Footer:void 0,Layout:wr,OffLayoutArea:void 0,liveMode:"off",onLiveEvent:void 0,options:Ne}),wo=({hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:o,undoableTimeout:s,children:a,DashboardPage:n,Title:u,Layout:p=wr,Header:d,Sider:l,Footer:c,OffLayoutArea:T,LoginPage:R=Ar,catchAll:v,liveMode:U="off",onLiveEvent:i,options:y})=>Io.createElement(ge.Provider,{value:{hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:o,Title:u,undoableTimeout:s,Layout:p,Header:d,Sider:l,Footer:c,OffLayoutArea:T,DashboardPage:n,LoginPage:R,catchAll:v,liveMode:U,onLiveEvent:i,options:y}},a);var Sr=({options:e,disableTelemetry:t,liveMode:r,mutationMode:o,reactQueryClientConfig:s,reactQueryDevtoolConfig:a,syncWithLocation:n,undoableTimeout:u,warnWhenUnsavedChanges:p}={})=>{var T,R,v,U,i,y,f,C,E,m,x,g,D,P,h,b,M,I,w,B,F,S,Z,A;let d={breadcrumb:e==null?void 0:e.breadcrumb,mutationMode:(R=(T=e==null?void 0:e.mutationMode)!=null?T:o)!=null?R:Ne.mutationMode,undoableTimeout:(U=(v=e==null?void 0:e.undoableTimeout)!=null?v:u)!=null?U:Ne.undoableTimeout,syncWithLocation:(y=(i=e==null?void 0:e.syncWithLocation)!=null?i:n)!=null?y:Ne.syncWithLocation,warnWhenUnsavedChanges:(C=(f=e==null?void 0:e.warnWhenUnsavedChanges)!=null?f:p)!=null?C:Ne.warnWhenUnsavedChanges,liveMode:(m=(E=e==null?void 0:e.liveMode)!=null?E:r)!=null?m:Ne.liveMode,redirect:{afterCreate:(g=(x=e==null?void 0:e.redirect)==null?void 0:x.afterCreate)!=null?g:Ne.redirect.afterCreate,afterClone:(P=(D=e==null?void 0:e.redirect)==null?void 0:D.afterClone)!=null?P:Ne.redirect.afterClone,afterEdit:(b=(h=e==null?void 0:e.redirect)==null?void 0:h.afterEdit)!=null?b:Ne.redirect.afterEdit}},l=(I=(M=e==null?void 0:e.disableTelemetry)!=null?M:t)!=null?I:!1,c={clientConfig:(F=(B=(w=e==null?void 0:e.reactQuery)==null?void 0:w.clientConfig)!=null?B:s)!=null?F:{},devtoolConfig:(A=(Z=(S=e==null?void 0:e.reactQuery)==null?void 0:S.devtoolConfig)!=null?Z:a)!=null?A:{}};return{optionsWithDefaults:d,disableTelemetryWithDefault:l,reactQueryWithDefaults:c}};var Qr=({redirectFromProps:e,action:t,redirectOptions:r})=>{if(e||e===!1)return e;switch(t){case"clone":return r.afterClone;case"create":return r.afterCreate;case"edit":return r.afterEdit;default:return!1}};var tr=async(e,t,r)=>{let o=[];for(let[s,a]of e.entries())try{let n=await a();o.push(t(n,s))}catch(n){o.push(r(n,s))}return o};var $=(e,t=[],r=!1)=>{if(!e)return;if(r){let s=t.find(n=>{var u;return le((u=n.route)!=null?u:"")===le(e)});return s||t.find(n=>n.name===e)}return t.find(s=>{var a;return((a=s.identifier)!=null?a:s.name)===e})};var k=(e,t,r)=>{if(t)return t;let o=$(e,r),s=L(o==null?void 0:o.meta,o==null?void 0:o.options);return s!=null&&s.dataProviderName?s.dataProviderName:"default"};var $e=async e=>({data:(await Promise.all(e)).map(t=>t.data)});var rr=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.next)return r.next;let o=(t==null?void 0:t.current)||1,s=(t==null?void 0:t.pageSize)||10,a=Math.ceil((e.total||0)/s);return o<a?Number(o)+1:void 0},or=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.prev)return r.prev;let o=(t==null?void 0:t.current)||1;return o===1?void 0:o-1};var sr=e=>{let t=[];return e==null||e.forEach(r=>{var o,s,a;t.push({...r,label:(a=(o=r.meta)==null?void 0:o.label)!=null?a:(s=r.options)==null?void 0:s.label,route:er(r,e),canCreate:!!r.create,canEdit:!!r.edit,canShow:!!r.show,canDelete:r.canDelete})}),t};var Ao=e=>Fe(le(e)).flatMap(r=>ot(r)?[r.slice(1)]:[]);var So=(e,t={})=>e.reduce((r,o)=>{let s=t[o];return typeof s<"u"&&(r[o]=s),r},{});var fe=(e,t={},r={},o={})=>{let s=Ao(e),a=So(s,{...t,...typeof(r==null?void 0:r.id)<"u"?{id:r.id}:{},...typeof(r==null?void 0:r.action)<"u"?{action:r.action}:{},...typeof(r==null?void 0:r.resource)<"u"?{resource:r.resource}:{},...r==null?void 0:r.params,...o});return e.replace(/:([^\/]+)/g,(n,u)=>{let p=a[u];return typeof p<"u"?`${p}`:n})};var O=()=>{let e=X(),t=oe();return t.isProvided?{isLegacy:!1,...t}:e.isProvided?{isLegacy:!0,...e,check:e.checkAuth,onError:e.checkError,getIdentity:e.getUserIdentity}:null};var Lt=({hasPagination:e,pagination:t,configPagination:r}={})=>{var u,p,d;let o=e===!1?"off":"server",s=(u=t==null?void 0:t.mode)!=null?u:o,a=(p=L(t==null?void 0:t.current,r==null?void 0:r.current))!=null?p:1,n=(d=L(t==null?void 0:t.pageSize,r==null?void 0:r.pageSize))!=null?d:10;return{current:a,pageSize:n,mode:s}};import{useState as en,useEffect as tn}from"react";var nr=e=>{let[t,r]=en(!1);return tn(()=>{let o=window.matchMedia(e);o.matches!==t&&r(o.matches);let s=()=>r(o.matches);return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[t,e]),t};var It=({resource:e,config:t,filters:r,hasPagination:o,pagination:s,sorters:a,queryOptions:n,successNotification:u,errorNotification:p,meta:d,metaData:l,liveMode:c,onLiveEvent:T,liveParams:R,dataProviderName:v})=>{let{resources:U}=Q(),i=z(),y=V(),f=O(),{mutate:C}=q({v3LegacyAuthProviderCompatible:Boolean(f==null?void 0:f.isLegacy)}),E=ee(),m=G(),x=k(e,v,U),g=L(d,l),D=L(r,t==null?void 0:t.filters),P=L(a,t==null?void 0:t.sort),h=L(o,t==null?void 0:t.hasPagination),b=Lt({pagination:s,configPagination:t==null?void 0:t.pagination,hasPagination:h}),M=b.mode==="server",I=m({meta:g}),w={meta:I,metaData:I,filters:D,hasPagination:M,pagination:b,sorters:P,config:{...t,sort:P}},B=(n==null?void 0:n.enabled)===void 0||(n==null?void 0:n.enabled)===!0,F=J(e,x,g,g),{getList:S}=i(x);return je({resource:e,types:["*"],params:{meta:I,metaData:I,pagination:b,hasPagination:M,sort:P,sorters:P,filters:D,subscriptionType:"useList",...R},channel:`resources/${e}`,enabled:B,liveMode:c,onLiveEvent:T}),rn(F.list({filters:D,hasPagination:M,...M&&{pagination:b},...a&&{sorters:a},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}),({queryKey:A,pageParam:N,signal:W})=>S({resource:e,pagination:b,hasPagination:M,filters:D,sort:P,sorters:P,meta:{...I||{},queryContext:{queryKey:A,pageParam:N,signal:W}},metaData:{...I||{},queryContext:{queryKey:A,pageParam:N,signal:W}}}),{...n,enabled:typeof(n==null?void 0:n.enabled)<"u"?n==null?void 0:n.enabled:!!e,select:A=>{var me;let N=A,{current:W,mode:ke,pageSize:Y}=b;return ke==="client"&&(N={...N,data:N.data.slice((W-1)*Y,W*Y),total:N.total}),n!=null&&n.select?(me=n==null?void 0:n.select)==null?void 0:me.call(n,N):N},onSuccess:A=>{var W;(W=n==null?void 0:n.onSuccess)==null||W.call(n,A);let N=typeof u=="function"?u(A,w,e):u;E(N)},onError:A=>{var W;C(A),(W=n==null?void 0:n.onError)==null||W.call(n,A);let N=typeof p=="function"?p(A,w,e):p;E(N,{key:`${e}-useList-notification`,message:y("notifications.error",{statusCode:A.statusCode},`Error (status code: ${A.statusCode})`),description:A.message,type:"error"})}})};import{useQuery as on}from"@tanstack/react-query";var wt=({resource:e,id:t,queryOptions:r,successNotification:o,errorNotification:s,meta:a,metaData:n,liveMode:u,onLiveEvent:p,liveParams:d,dataProviderName:l})=>{let{resources:c}=Q(),T=z(),R=V(),v=O(),{mutate:U}=q({v3LegacyAuthProviderCompatible:Boolean(v==null?void 0:v.isLegacy)}),i=ee(),y=G(),f=L(a,n),C=J(e,k(e,l,c),f,f),{getOne:E}=T(k(e,l,c)),m=y({meta:f});return je({resource:e,types:["*"],channel:`resources/${e}`,params:{ids:t?[t]:[],id:t,meta:m,metaData:m,subscriptionType:"useOne",...d},enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof e<"u"&&typeof t<"u",liveMode:u,onLiveEvent:p}),on(C.detail(t),({queryKey:g,pageParam:D,signal:P})=>E({resource:e,id:t,meta:{...m||{},queryContext:{queryKey:g,pageParam:D,signal:P}},metaData:{...m||{},queryContext:{queryKey:g,pageParam:D,signal:P}}}),{...r,enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof t<"u",onSuccess:g=>{var P;(P=r==null?void 0:r.onSuccess)==null||P.call(r,g);let D=typeof o=="function"?o(g,{id:t,...m||{}},e):o;i(D)},onError:g=>{var P;U(g),(P=r==null?void 0:r.onError)==null||P.call(r,g);let D=typeof s=="function"?s(g,{id:t,...m||{}},e):s;i(D,{key:`${t}-${e}-getOne-notification`,message:R("notifications.error",{statusCode:g.statusCode},`Error (status code: ${g.statusCode})`),description:g.message,type:"error"})}})};import{useQuery as sn}from"@tanstack/react-query";var kr=({resource:e,ids:t,queryOptions:r,successNotification:o,errorNotification:s,meta:a,metaData:n,liveMode:u,onLiveEvent:p,liveParams:d,dataProviderName:l})=>{let{resources:c}=Q(),T=z(),R=V(),v=O(),{mutate:U}=q({v3LegacyAuthProviderCompatible:Boolean(v==null?void 0:v.isLegacy)}),i=ee(),y=G(),f=L(a,n),C=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0,E=J(e,k(e,l,c),f,f),{getMany:m,getOne:x}=T(k(e,l,c)),g=y({meta:f});return je({resource:e,types:["*"],params:{ids:t!=null?t:[],meta:g,metaData:g,subscriptionType:"useMany",...d},channel:`resources/${e}`,enabled:C,liveMode:u,onLiveEvent:p}),sn(E.many(t),({queryKey:P,pageParam:h,signal:b})=>m?m({resource:e,ids:t,meta:{...g||{},queryContext:{queryKey:P,pageParam:h,signal:b}},metaData:{...g||{},queryContext:{queryKey:P,pageParam:h,signal:b}}}):$e(t.map(M=>x({resource:e,id:M,meta:{...g||{},queryContext:{queryKey:P,pageParam:h,signal:b}},metaData:{...g||{},queryContext:{queryKey:P,pageParam:h,signal:b}}}))),{...r,onSuccess:P=>{var b;(b=r==null?void 0:r.onSuccess)==null||b.call(r,P);let h=typeof o=="function"?o(P,t,e):o;i(h)},onError:P=>{var b;U(P),(b=r==null?void 0:r.onError)==null||b.call(r,P);let h=typeof s=="function"?s(P,t,e):s;i(h,{key:`${t[0]}-${e}-getMany-notification`,message:R("notifications.error",{statusCode:P.statusCode},`Error (status code: ${P.statusCode})`),description:P.message,type:"error"})}})};import{useMutation as cn,useQueryClient as pn}from"@tanstack/react-query";import Br,{useReducer as nn}from"react";import Vr from"lodash-es/isEqual";var ar=Br.createContext({notifications:[],notificationDispatch:()=>!1}),an=[],un=(e,t)=>{switch(t.type){case"ADD":return[...e.filter(o=>!(Vr(o.id,t.payload.id)&&o.resource==t.payload.resource)),{...t.payload,isRunning:!0}];case"REMOVE":return e.filter(o=>!(Vr(o.id,t.payload.id)&&o.resource==t.payload.resource));case"DECREASE_NOTIFICATION_SECOND":return e.map(o=>Vr(o.id,t.payload.id)&&o.resource==t.payload.resource?{...o,seconds:t.payload.seconds-1e3}:o);default:return e}},Fr=({children:e})=>{let[t,r]=nn(un,an),o={notifications:t,notificationDispatch:r};return Br.createElement(ar.Provider,{value:o},e,typeof window<"u"&&t.map(s=>Br.createElement(Qo,{key:`${s.id}-${s.resource}-queue`,notification:s})))};import ko from"pluralize";var Nr=({mutationOptions:e}={})=>{let{resources:t}=Q(),r=pn(),o=z(),{mutationMode:s,undoableTimeout:a}=Ae(),n=V(),u=O(),{mutate:p}=q({v3LegacyAuthProviderCompatible:Boolean(u==null?void 0:u.isLegacy)}),d=De(),{log:l}=Ee(),{notificationDispatch:c}=He(),T=ee(),R=Ue(),v=G();return cn(({id:i,values:y,resource:f,mutationMode:C,undoableTimeout:E,onCancel:m,meta:x,metaData:g,dataProviderName:D})=>{let P=v({meta:L(x,g)}),h=C!=null?C:s,b=E!=null?E:a;return h!=="undoable"?o(k(f,D,t)).update({resource:f,id:i,variables:y,meta:P,metaData:P}):new Promise((I,w)=>{let B=()=>{o(k(f,D,t)).update({resource:f,id:i,variables:y,meta:P,metaData:P}).then(S=>I(S)).catch(S=>w(S))},F=()=>{w({message:"mutationCancelled"})};m&&m(F),c({type:"ADD",payload:{id:i,resource:f,cancelMutation:F,doMutation:B,seconds:b,isSilent:!!m}})})},{onMutate:async({resource:i,id:y,mutationMode:f,values:C,dataProviderName:E,meta:m,metaData:x})=>{let g=L(m,x),D=J(i,k(i,E,t),g,g),P=r.getQueriesData(D.resourceAll),h=f!=null?f:s;return await r.cancelQueries(D.resourceAll,void 0,{silent:!0}),h!=="pessimistic"&&(r.setQueriesData(D.list(),b=>{if(!b)return null;let M=b.data.map(I=>{var w;return((w=I.id)==null?void 0:w.toString())===(y==null?void 0:y.toString())?{id:y,...I,...C}:I});return{...b,data:M}}),r.setQueriesData(D.many(),b=>{if(!b)return null;let M=b.data.map(I=>{var w;return((w=I.id)==null?void 0:w.toString())===(y==null?void 0:y.toString())&&(I={id:y,...I,...C}),I});return{...b,data:M}}),r.setQueriesData(D.detail(y),b=>b?{...b,data:{...b.data,...C}}:null)),{previousQueries:P,queryKey:D}},onSettled:(i,y,{id:f,resource:C,dataProviderName:E,invalidates:m=["list","many","detail"]})=>{R({resource:C,dataProviderName:k(C,E,t),invalidates:m,id:f}),c({type:"REMOVE",payload:{id:f,resource:C}})},onSuccess:(i,{id:y,resource:f,successNotification:C,dataProviderName:E,values:m,meta:x,metaData:g},D)=>{var F;let P=ko.singular(f),h=typeof C=="function"?C(i,{id:y,values:m},f):C;T(h,{key:`${y}-${f}-notification`,description:n("notifications.success","Successful"),message:n("notifications.editSuccess",{resource:n(`${f}.${f}`,P)},`Successfully updated ${P}`),type:"success"}),d==null||d({channel:`resources/${f}`,type:"updated",payload:{ids:(F=i.data)!=null&&F.id?[i.data.id]:void 0},date:new Date});let b;if(D){let S=r.getQueryData(D.queryKey.detail(y));b=Object.keys(m||{}).reduce((Z,A)=>{var N;return Z[A]=(N=S==null?void 0:S.data)==null?void 0:N[A],Z},{})}let{fields:M,operation:I,variables:w,...B}=L(x,g)||{};l==null||l.mutate({action:"update",resource:f,data:m,previousData:b,meta:{id:y,dataProviderName:k(f,E,t),...B}})},onError:(i,{id:y,resource:f,errorNotification:C,values:E},m)=>{if(m)for(let x of m.previousQueries)r.setQueryData(x[0],x[1]);if(i.message!=="mutationCancelled"){p==null||p(i);let x=ko.singular(f),g=typeof C=="function"?C(i,{id:y,values:E},f):C;T(g,{key:`${y}-${f}-notification`,message:n("notifications.editError",{resource:n(`${f}.${f}`,x),statusCode:i.statusCode},`Error when updating ${x} (status code: ${i.statusCode})`),description:i.message,type:"error"})}},...e})};import{useMutation as dn}from"@tanstack/react-query";import Vo from"pluralize";var At=({mutationOptions:e}={})=>{let t=O(),{mutate:r}=q({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),o=z(),s=Ue(),{resources:a}=Q(),n=V(),u=De(),{log:p}=Ee(),d=ee(),l=G();return dn(({resource:T,values:R,meta:v,metaData:U,dataProviderName:i})=>{let y=l({meta:L(v,U)});return o(k(T,i,a)).create({resource:T,variables:R,meta:y,metaData:y})},{onSuccess:(T,{resource:R,successNotification:v,dataProviderName:U,invalidates:i=["list","many"],values:y,meta:f,metaData:C})=>{var h,b,M;let E=Vo.singular(R),m=typeof v=="function"?v(T,y,R):v;d(m,{key:`create-${R}-notification`,message:n("notifications.createSuccess",{resource:n(`${R}.${R}`,E)},`Successfully created ${E}`),description:n("notifications.success","Success"),type:"success"}),s({resource:R,dataProviderName:k(R,U,a),invalidates:i}),u==null||u({channel:`resources/${R}`,type:"created",payload:{ids:(h=T==null?void 0:T.data)!=null&&h.id?[T.data.id]:void 0},date:new Date});let{fields:x,operation:g,variables:D,...P}=L(f,C)||{};p==null||p.mutate({action:"create",resource:R,data:y,meta:{dataProviderName:k(R,U,a),id:(M=(b=T==null?void 0:T.data)==null?void 0:b.id)!=null?M:void 0,...P}})},onError:(T,{resource:R,errorNotification:v,values:U})=>{r(T);let i=Vo.singular(R),y=typeof v=="function"?v(T,U,R):v;d(y,{key:`create-${R}-notification`,description:T.message,message:n("notifications.createError",{resource:n(`${R}.${R}`,i),statusCode:T.statusCode},`There was an error creating ${i} (status code: ${T.statusCode})`),type:"error"})},...e})};import{useQueryClient as ln,useMutation as mn}from"@tanstack/react-query";import Bo from"pluralize";var fn=({mutationOptions:e}={})=>{let t=O(),{mutate:r}=q({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),o=z(),{resources:s}=Q(),a=ln(),{mutationMode:n,undoableTimeout:u}=Ae(),{notificationDispatch:p}=He(),d=V(),l=De(),{log:c}=Ee(),T=ee(),R=Ue(),v=G();return mn(({id:i,mutationMode:y,undoableTimeout:f,resource:C,onCancel:E,meta:m,metaData:x,dataProviderName:g,values:D})=>{let P=v({meta:L(m,x)}),h=y!=null?y:n,b=f!=null?f:u;return h!=="undoable"?o(k(C,g,s)).deleteOne({resource:C,id:i,meta:P,metaData:P,variables:D}):new Promise((I,w)=>{let B=()=>{o(k(C,g,s)).deleteOne({resource:C,id:i,meta:P,metaData:P,variables:D}).then(S=>I(S)).catch(S=>w(S))},F=()=>{w({message:"mutationCancelled"})};E&&E(F),p({type:"ADD",payload:{id:i,resource:C,cancelMutation:F,doMutation:B,seconds:b,isSilent:!!E}})})},{onMutate:async({id:i,resource:y,mutationMode:f,dataProviderName:C,meta:E,metaData:m})=>{let x=L(E,m),g=J(y,k(y,C,s),x,x),D=f!=null?f:n;await a.cancelQueries(g.resourceAll,void 0,{silent:!0});let P=a.getQueriesData(g.resourceAll);return D!=="pessimistic"&&(a.setQueriesData(g.list(),h=>h?{data:h.data.filter(M=>{var I;return((I=M.id)==null?void 0:I.toString())!==i.toString()}),total:h.total-1}:null),a.setQueriesData(g.many(),h=>{if(!h)return null;let b=h.data.filter(M=>{var I;return((I=M.id)==null?void 0:I.toString())!==(i==null?void 0:i.toString())});return{...h,data:b}})),{previousQueries:P,queryKey:g}},onSettled:(i,y,{id:f,resource:C,dataProviderName:E,invalidates:m=["list","many"]})=>{R({resource:C,dataProviderName:k(C,E,s),invalidates:m}),p({type:"REMOVE",payload:{id:f,resource:C}})},onSuccess:(i,{id:y,resource:f,successNotification:C,dataProviderName:E,meta:m,metaData:x},g)=>{let D=Bo.singular(f!=null?f:"");a.removeQueries(g==null?void 0:g.queryKey.detail(y));let P=typeof C=="function"?C(i,y,f):C;T(P,{key:`${y}-${f}-notification`,description:d("notifications.success","Success"),message:d("notifications.deleteSuccess",{resource:d(`${f}.${f}`,D)},`Successfully deleted a ${D}`),type:"success"}),l==null||l({channel:`resources/${f}`,type:"deleted",payload:{ids:y?[y]:[]},date:new Date});let{fields:h,operation:b,variables:M,...I}=L(m,x)||{};c==null||c.mutate({action:"delete",resource:f,meta:{id:y,dataProviderName:k(f,E,s),...I}}),a.removeQueries(g==null?void 0:g.queryKey.detail(y))},onError:(i,{id:y,resource:f,errorNotification:C},E)=>{if(E)for(let m of E.previousQueries)a.setQueryData(m[0],m[1]);if(i.message!=="mutationCancelled"){r(i);let m=Bo.singular(f!=null?f:""),x=typeof C=="function"?C(i,y,f):C;T(x,{key:`${y}-${f}-notification`,message:d("notifications.deleteError",{resource:m,statusCode:i.statusCode},`Error (status code: ${i.statusCode})`),description:i.message,type:"error"})}},...e})};import{useMutation as yn}from"@tanstack/react-query";import gn from"pluralize";var Hr=({mutationOptions:e}={})=>{let t=z(),{resources:r}=Q(),o=V(),s=De(),a=ee(),n=Ue(),{log:u}=Ee(),p=G();return yn(({resource:l,values:c,meta:T,metaData:R,dataProviderName:v})=>{let U=p({meta:L(T,R)}),i=t(k(l,v,r));return i.createMany?i.createMany({resource:l,variables:c,meta:U,metaData:U}):$e(c.map(y=>i.create({resource:l,variables:y,meta:U,metaData:U})))},{onSuccess:(l,{resource:c,successNotification:T,dataProviderName:R,invalidates:v=["list","many"],values:U,meta:i,metaData:y})=>{let f=gn.plural(c),C=typeof T=="function"?T(l,U,c):T;a(C,{key:`createMany-${c}-notification`,message:o("notifications.createSuccess",{resource:o(`${c}.${c}`,c)},`Successfully created ${f}`),description:o("notifications.success","Success"),type:"success"}),n({resource:c,dataProviderName:k(c,R,r),invalidates:v});let E=l==null?void 0:l.data.filter(P=>(P==null?void 0:P.id)!==void 0).map(P=>P.id);s==null||s({channel:`resources/${c}`,type:"created",payload:{ids:E},date:new Date});let{fields:m,operation:x,variables:g,...D}=L(i,y)||{};u==null||u.mutate({action:"createMany",resource:c,data:U,meta:{dataProviderName:k(c,R,r),ids:E,...D}})},onError:(l,{resource:c,errorNotification:T,values:R})=>{let v=typeof T=="function"?T(l,R,c):T;a(v,{key:`createMany-${c}-notification`,description:l.message,message:o("notifications.createError",{resource:o(`${c}.${c}`,c),statusCode:l.statusCode},`There was an error creating ${c} (status code: ${l.statusCode}`),type:"error"})},...e})};import{useMutation as Tn,useQueryClient as Rn}from"@tanstack/react-query";import Fo from"pluralize";var xn=({mutationOptions:e}={})=>{let{resources:t}=Q(),r=Rn(),o=z(),s=V(),{mutationMode:a,undoableTimeout:n}=Ae(),u=O(),{mutate:p}=q({v3LegacyAuthProviderCompatible:Boolean(u==null?void 0:u.isLegacy)}),{notificationDispatch:d}=He(),l=De(),c=ee(),T=Ue(),{log:R}=Ee(),v=G();return Tn(({ids:i,values:y,resource:f,onCancel:C,mutationMode:E,undoableTimeout:m,meta:x,metaData:g,dataProviderName:D})=>{let P=v({meta:L(x,g)}),h=E!=null?E:a,b=m!=null?m:n,M=o(k(f,D,t)),I=()=>M.updateMany?M.updateMany({resource:f,ids:i,variables:y,meta:P,metaData:P}):$e(i.map(B=>M.update({resource:f,id:B,variables:y,meta:P,metaData:P})));return h!=="undoable"?I():new Promise((B,F)=>{let S=()=>{I().then(A=>B(A)).catch(A=>F(A))},Z=()=>{F({message:"mutationCancelled"})};C&&C(Z),d({type:"ADD",payload:{id:i,resource:f,cancelMutation:Z,doMutation:S,seconds:b,isSilent:!!C}})})},{onMutate:async({resource:i,ids:y,values:f,mutationMode:C,dataProviderName:E,meta:m,metaData:x})=>{let g=J(i,k(i,E,t),L(m,x),L(m,x)),D=C!=null?C:a;await r.cancelQueries(g.resourceAll,void 0,{silent:!0});let P=r.getQueriesData(g.resourceAll);if(D!=="pessimistic"){r.setQueriesData(g.list(),h=>{if(!h)return null;let b=h.data.map(M=>M.id!==void 0&&y.filter(I=>I!==void 0).map(String).includes(M.id.toString())?{...M,...f}:M);return{...h,data:b}}),r.setQueriesData(g.many(),h=>{if(!h)return null;let b=h.data.map(M=>M.id!==void 0&&y.filter(I=>I!==void 0).map(String).includes(M.id.toString())?{...M,...f}:M);return{...h,data:b}});for(let h of y)r.setQueriesData(g.detail(h),b=>{if(!b)return null;let M={...b.data,...f};return{...b,data:M}})}return{previousQueries:P,queryKey:g}},onSettled:(i,y,{ids:f,resource:C,dataProviderName:E})=>{T({resource:C,invalidates:["list","many"],dataProviderName:k(C,E,t)}),f.forEach(m=>T({resource:C,invalidates:["detail"],dataProviderName:k(C,E,t),id:m})),d({type:"REMOVE",payload:{id:f,resource:C}})},onSuccess:(i,{ids:y,resource:f,meta:C,metaData:E,dataProviderName:m,successNotification:x,values:g},D)=>{let P=Fo.singular(f),h=typeof x=="function"?x(i,{ids:y,values:g},f):x;c(h,{key:`${y}-${f}-notification`,description:s("notifications.success","Successful"),message:s("notifications.editSuccess",{resource:s(`${f}.${f}`,f)},`Successfully updated ${P}`),type:"success"}),l==null||l({channel:`resources/${f}`,type:"updated",payload:{ids:y.map(String)},date:new Date});let b=[];D&&y.forEach(F=>{let S=r.getQueryData(D.queryKey.detail(F));b.push(Object.keys(g||{}).reduce((Z,A)=>{var N;return Z[A]=(N=S==null?void 0:S.data)==null?void 0:N[A],Z},{}))});let{fields:M,operation:I,variables:w,...B}=L(C,E)||{};R==null||R.mutate({action:"updateMany",resource:f,data:g,previousData:b,meta:{ids:y,dataProviderName:k(f,m,t),...B}})},onError:(i,{ids:y,resource:f,errorNotification:C,values:E},m)=>{if(m)for(let x of m.previousQueries)r.setQueryData(x[0],x[1]);if(i.message!=="mutationCancelled"){p==null||p(i);let x=Fo.singular(f),g=typeof C=="function"?C(i,{ids:y,values:E},f):C;c(g,{key:`${y}-${f}-updateMany-error-notification`,message:s("notifications.editError",{resource:x,statusCode:i.statusCode},`Error when updating ${x} (status code: ${i.statusCode})`),description:i.message,type:"error"})}},...e})};import{useQueryClient as Cn,useMutation as Pn}from"@tanstack/react-query";import bn from"pluralize";var hn=({mutationOptions:e}={})=>{let t=O(),{mutate:r}=q({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),{mutationMode:o,undoableTimeout:s}=Ae(),a=z(),{notificationDispatch:n}=He(),u=V(),p=De(),d=ee(),l=Ue(),{log:c}=Ee(),{resources:T}=Q(),R=Cn(),v=G();return Pn(({resource:i,ids:y,mutationMode:f,undoableTimeout:C,onCancel:E,meta:m,metaData:x,dataProviderName:g,values:D})=>{let P=v({meta:L(m,x)}),h=f!=null?f:o,b=C!=null?C:s,M=a(k(i,g,T)),I=()=>M.deleteMany?M.deleteMany({resource:i,ids:y,meta:P,metaData:P,variables:D}):$e(y.map(B=>M.deleteOne({resource:i,id:B,meta:P,metaData:P,variables:D})));return h!=="undoable"?I():new Promise((B,F)=>{let S=()=>{I().then(A=>B(A)).catch(A=>F(A))},Z=()=>{F({message:"mutationCancelled"})};E&&E(Z),n({type:"ADD",payload:{id:y,resource:i,cancelMutation:Z,doMutation:S,seconds:b,isSilent:!!E}})})},{onMutate:async({ids:i,resource:y,mutationMode:f,dataProviderName:C,meta:E,metaData:m})=>{let x=L(E,m),g=J(y,k(y,C,T),x,x),D=f!=null?f:o;await R.cancelQueries(g.resourceAll,void 0,{silent:!0});let P=R.getQueriesData(g.resourceAll);if(D!=="pessimistic"){R.setQueriesData(g.list(),h=>h?{data:h.data.filter(M=>M.id&&!i.map(String).includes(M.id.toString())),total:h.total-1}:null),R.setQueriesData(g.many(),h=>{if(!h)return null;let b=h.data.filter(M=>M.id?!i.map(String).includes(M.id.toString()):!1);return{...h,data:b}});for(let h of i)R.setQueriesData(g.detail(h),b=>!b||b.data.id==h?null:{...b})}return{previousQueries:P,queryKey:g}},onSettled:(i,y,{resource:f,ids:C,dataProviderName:E,invalidates:m=["list","many"]})=>{l({resource:f,dataProviderName:k(f,E,T),invalidates:m}),n({type:"REMOVE",payload:{id:C,resource:f}})},onSuccess:(i,{ids:y,resource:f,meta:C,metaData:E,dataProviderName:m,successNotification:x},g)=>{y.forEach(I=>R.removeQueries(g==null?void 0:g.queryKey.detail(I)));let D=typeof x=="function"?x(i,y,f):x;d(D,{key:`${y}-${f}-notification`,description:u("notifications.success","Success"),message:u("notifications.deleteSuccess",{resource:u(`${f}.${f}`,f)},`Successfully deleted ${f}`),type:"success"}),p==null||p({channel:`resources/${f}`,type:"deleted",payload:{ids:y},date:new Date});let{fields:P,operation:h,variables:b,...M}=L(C,E)||{};c==null||c.mutate({action:"deleteMany",resource:f,meta:{ids:y,dataProviderName:k(f,m,T),...M}}),y.forEach(I=>R.removeQueries(g==null?void 0:g.queryKey.detail(I)))},onError:(i,{ids:y,resource:f,errorNotification:C},E)=>{if(E)for(let m of E.previousQueries)R.setQueryData(m[0],m[1]);if(i.message!=="mutationCancelled"){r(i);let m=bn.singular(f),x=typeof C=="function"?C(i,y,f):C;d(x,{key:`${y}-${f}-notification`,message:u("notifications.deleteError",{resource:m,statusCode:i.statusCode},`Error (status code: ${i.statusCode})`),description:i.message,type:"error"})}},...e})};var vn=e=>{let t=z(),{getApiUrl:r}=t(e);return r()};import{useQuery as Dn}from"@tanstack/react-query";var En=({url:e,method:t,config:r,queryOptions:o,successNotification:s,errorNotification:a,meta:n,metaData:u,dataProviderName:p})=>{let d=z(),l=O(),{mutate:c}=q({v3LegacyAuthProviderCompatible:Boolean(l==null?void 0:l.isLegacy)}),T=V(),R=ee(),v=G(),U=L(n,u),{custom:i}=d(p),y=v({meta:U});if(i)return Dn({queryKey:[p,"custom",t,e,{...r,...U||{}}],queryFn:({queryKey:C,pageParam:E,signal:m})=>i({url:e,method:t,...r,meta:{...y||{},queryContext:{queryKey:C,pageParam:E,signal:m}},metaData:{...y||{},queryContext:{queryKey:C,pageParam:E,signal:m}}}),...o,onSuccess:C=>{var m;(m=o==null?void 0:o.onSuccess)==null||m.call(o,C);let E=typeof s=="function"?s(C,{...r,...y||{}}):s;R(E)},onError:C=>{var m;c(C),(m=o==null?void 0:o.onError)==null||m.call(o,C);let E=typeof a=="function"?a(C,{...r,...y||{}}):a;R(E,{key:`${t}-notification`,message:T("notifications.error",{statusCode:C.statusCode},`Error (status code: ${C.statusCode})`),description:C.message,type:"error"})}});throw Error("Not implemented custom on data provider.")};import{useMutation as Un}from"@tanstack/react-query";var Mn=({mutationOptions:e}={})=>{let t=O(),{mutate:r}=q({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),o=ee(),s=z(),a=V(),n=G();return Un(({url:p,method:d,values:l,meta:c,metaData:T,dataProviderName:R,config:v})=>{let U=n({meta:L(c,T)}),{custom:i}=s(R);if(i)return i({url:p,method:d,payload:l,meta:U,metaData:U,headers:{...v==null?void 0:v.headers}});throw Error("Not implemented custom on data provider.")},{onSuccess:(p,{successNotification:d,config:l,meta:c,metaData:T})=>{let R=typeof d=="function"?d(p,{...l,...L(c,T)||{}}):d;o(R)},onError:(p,{errorNotification:d,method:l,config:c,meta:T,metaData:R})=>{r(p);let v=typeof d=="function"?d(p,{...c,...L(T,R)||{}}):d;o(v,{key:`${l}-notification`,message:a("notifications.error",{statusCode:p.statusCode},`Error (status code: ${p.statusCode})`),description:p.message,type:"error"})},...e})};import{useCallback as In,useContext as wn}from"react";import No from"react";var Ln=()=>({default:{create:()=>Promise.resolve({data:{id:1}}),createMany:()=>Promise.resolve({data:[]}),deleteOne:()=>Promise.resolve({data:{id:1}}),deleteMany:()=>Promise.resolve({data:[]}),getList:()=>Promise.resolve({data:[],total:0}),getMany:()=>Promise.resolve({data:[]}),getOne:()=>Promise.resolve({data:{id:1}}),update:()=>Promise.resolve({data:{id:1}}),updateMany:()=>Promise.resolve({data:[]}),custom:()=>Promise.resolve({data:{}}),getApiUrl:()=>""}}),St=No.createContext(Ln()),Ho=({children:e,...t})=>{let r;return!t.getList||!t.getOne?r=t:r={default:t},No.createElement(St.Provider,{value:r},e)};var z=()=>{let e=wn(St);return In(r=>{if(r){if(!e[r])throw new Error(`"${r}" Data provider not found`);return e[r]}if(e.default)return e.default;throw new Error('There is no "default" data provider. Please pass dataProviderName.')},[e])};import{useInfiniteQuery as An}from"@tanstack/react-query";var Sn=({resource:e,config:t,filters:r,hasPagination:o,pagination:s,sorters:a,queryOptions:n,successNotification:u,errorNotification:p,meta:d,metaData:l,liveMode:c,onLiveEvent:T,liveParams:R,dataProviderName:v})=>{let{resources:U}=Q(),i=z(),y=V(),f=O(),{mutate:C}=q({v3LegacyAuthProviderCompatible:Boolean(f==null?void 0:f.isLegacy)}),E=ee(),m=G(),x=k(e,v,U),g=L(d,l),D=L(r,t==null?void 0:t.filters),P=L(a,t==null?void 0:t.sort),h=L(o,t==null?void 0:t.hasPagination),b=Lt({pagination:s,configPagination:t==null?void 0:t.pagination,hasPagination:h}),M=b.mode==="server",I={meta:g,metaData:g,filters:D,hasPagination:M,pagination:b,sorters:P,config:{...t,sort:P}},w=(n==null?void 0:n.enabled)===void 0||(n==null?void 0:n.enabled)===!0,B=J(e,x,g,g),F=m({meta:g}),{getList:S}=i(x);return je({resource:e,types:["*"],params:{meta:F,metaData:F,pagination:b,hasPagination:M,sort:P,sorters:P,filters:D,subscriptionType:"useList",...R},channel:`resources/${e}`,enabled:w,liveMode:c,onLiveEvent:T}),An(B.list({filters:D,hasPagination:M,...M&&{pagination:b},...a&&{sorters:a},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}),({queryKey:A,pageParam:N,signal:W})=>{let ke={...b,current:N};return S({resource:e,pagination:ke,hasPagination:M,filters:D,sort:P,sorters:P,meta:{...F||{},queryContext:{queryKey:A,pageParam:N,signal:W}},metaData:{...F||{},queryContext:{queryKey:A,pageParam:N,signal:W}}}).then(({data:Y,total:me,...Oe})=>({data:Y,total:me,pagination:ke,...Oe}))},{getNextPageParam:A=>rr(A),getPreviousPageParam:A=>or(A),...n,onSuccess:A=>{var W;(W=n==null?void 0:n.onSuccess)==null||W.call(n,A);let N=typeof u=="function"?u(A,I,e):u;E(N)},onError:A=>{var W;C(A),(W=n==null?void 0:n.onError)==null||W.call(n,A);let N=typeof p=="function"?p(A,I,e):p;E(N,{key:`${e}-useInfiniteList-notification`,message:y("notifications.error",{statusCode:A.statusCode},`Error (status code: ${A.statusCode})`),description:A.message,type:"error"})}})};import{useContext as Go,useEffect as Qn}from"react";import{useQueryClient as kn}from"@tanstack/react-query";import Oo from"react";var Ge=Oo.createContext(void 0),$o=({liveProvider:e,children:t})=>Oo.createElement(Ge.Provider,{value:e},t);var je=({resource:e,params:t,channel:r,types:o,enabled:s=!0,liveMode:a,onLiveEvent:n})=>{let u=kn(),p=J(e),d=Go(Ge),{liveMode:l,onLiveEvent:c}=Go(ge),T=a!=null?a:l;Qn(()=>{let R;return T&&T!=="off"&&s&&(R=d==null?void 0:d.subscribe({channel:r,params:{resource:e,...t},types:o,callback:v=>{T==="auto"&&u.invalidateQueries(p.resourceAll),n==null||n(v),c==null||c(v)}})),()=>{R&&(d==null||d.unsubscribe(R))}},[s])};import{useContext as Vn}from"react";var Wo=e=>{let{liveMode:t}=Vn(ge);return e!=null?e:t};import{useContext as Bn,useEffect as Fn}from"react";var Sm=({params:e,channel:t,types:r=["*"],enabled:o=!0,onLiveEvent:s})=>{let a=Bn(Ge);Fn(()=>{let n;return o&&(n=a==null?void 0:a.subscribe({channel:t,params:e,types:r,callback:s})),()=>{n&&(a==null||a.unsubscribe(n))}},[o])};import{useContext as Nn}from"react";var De=()=>{let e=Nn(Ge);return e==null?void 0:e.publish};import{useContext as jn}from"react";import zo from"react";import{useMemo as $n}from"react";import{useRef as Hn}from"react";import On from"lodash-es/isEqual";var Ko=e=>{let t=Hn(e);return On(t.current,e)||(t.current=e),t.current};var ir=(e,t)=>{let r=Ko(t);return $n(e,r)};var Ze=zo.createContext({resources:[]}),_o=({resources:e,children:t})=>{let r=ir(()=>sr(e!=null?e:[]),[e]);return zo.createElement(Ze.Provider,{value:{resources:r}},t)};import jo from"react";var Zo=jo.createContext("new"),Yo=Zo.Provider,H=()=>jo.useContext(Zo);import _n from"react";import Gn,{createContext as Wn}from"react";var Jo={},We=Wn(Jo),Xo=({children:e,router:t})=>Gn.createElement(We.Provider,{value:t!=null?t:Jo},e);import Kn,{useContext as zn}from"react";var Or=()=>{let e=zn(We);return Kn.useMemo(()=>{var o;return(o=e==null?void 0:e.parse)!=null?o:()=>()=>({})},[e==null?void 0:e.parse])()};var j=()=>{let e=Or();return _n.useMemo(()=>e(),[e])};function Q(e){var l,c;let{resources:t}=jn(Ze),r=H(),o=j(),s={resourceName:e&&typeof e!="string"?e.resourceName:e,resourceNameOrRouteName:e&&typeof e!="string"?e.resourceNameOrRouteName:e,recordItemId:e&&typeof e!="string"?e.recordItemId:void 0},a=Ye(),{useParams:n}=K(),u=n();if(r==="legacy"){let T=s.resourceNameOrRouteName?s.resourceNameOrRouteName:u.resource,R=T?a(T):void 0,v=(l=s==null?void 0:s.recordItemId)!=null?l:u.id,U=u.action,i=(c=s==null?void 0:s.resourceName)!=null?c:R==null?void 0:R.name;return{resources:t,resource:R,resourceName:i,id:v,action:U}}let p,d=typeof e=="string"?e:s==null?void 0:s.resourceNameOrRouteName;if(d){let T=$(d,t);T?p=T:p={name:d}}else o!=null&&o.resource&&(p=o.resource);return{resources:t,resource:p,resourceName:p==null?void 0:p.name,id:o.id,action:o.action}}import{useContext as Zn,useCallback as Yn}from"react";var Ye=()=>{let{resources:e}=Zn(Ze);return Yn(r=>{let o=$(r,e,!0);return o||{name:r,route:r}},[e])};import{useContext as Jn}from"react";var He=()=>{let{notifications:e,notificationDispatch:t}=Jn(ar);return{notifications:e,notificationDispatch:t}};import{useContext as ea}from"react";import Xn,{createContext as qn}from"react";var Qt=qn({}),qo=({open:e,close:t,children:r})=>Xn.createElement(Qt.Provider,{value:{open:e,close:t}},r);var Te=()=>{let{open:e,close:t}=ea(Qt);return{open:e,close:t}};import{useCallback as ta}from"react";var ee=()=>{let{open:e}=Te();return ta((r,o)=>{r!==!1&&(r?e==null||e(r):o&&(e==null||e(o)))},[])};import{useCallback as ra,useContext as oa}from"react";import es from"react";var Se=es.createContext({}),ts=({children:e,i18nProvider:t})=>es.createElement(Se.Provider,{value:{i18nProvider:t}},e);var sa=()=>{let{i18nProvider:e}=oa(Se);return ra(t=>e==null?void 0:e.changeLocale(t),[])};import{useContext as na,useMemo as aa}from"react";var V=()=>{let{i18nProvider:e}=na(Se);return aa(()=>{function r(o,s,a){var n,u;return(u=(n=e==null?void 0:e.translate(o,s,a))!=null?n:a)!=null?u:typeof s=="string"&&typeof a>"u"?s:o}return r},[e])};import{useContext as ia,useCallback as ua}from"react";var ca=()=>{let{i18nProvider:e}=ia(Se);return ua(()=>e==null?void 0:e.getLocale(),[])};import{useContext as pa}from"react";var Ae=()=>{let{mutationMode:e,undoableTimeout:t}=pa(ge);return{mutationMode:e,undoableTimeout:t}};import{useContext as ss}from"react";import rs,{useState as da}from"react";var $r=rs.createContext({}),os=({children:e})=>{let[t,r]=da(!1);return rs.createElement($r.Provider,{value:{warnWhen:t,setWarnWhen:r}},e)};var kt=()=>{let{warnWhenUnsavedChanges:e}=ss(ge),{warnWhen:t,setWarnWhen:r}=ss($r);return{warnWhenUnsavedChanges:e,warnWhen:Boolean(t),setWarnWhen:r!=null?r:()=>{}}};import{useContext as la}from"react";var Gr=()=>{let{syncWithLocation:e}=la(ge);return{syncWithLocation:e}};import{useContext as ma}from"react";var fa=()=>{let{Title:e}=ma(ge);return e};import{useContext as ya}from"react";var Vt=()=>{let{Footer:e,Header:t,Layout:r,OffLayoutArea:o,Sider:s,Title:a,hasDashboard:n,mutationMode:u,syncWithLocation:p,undoableTimeout:d,warnWhenUnsavedChanges:l,DashboardPage:c,LoginPage:T,catchAll:R,options:v}=ya(ge);return{Footer:e,Header:t,Layout:r,OffLayoutArea:o,Sider:s,Title:a,hasDashboard:n,mutationMode:u,syncWithLocation:p,undoableTimeout:d,warnWhenUnsavedChanges:l,DashboardPage:c,LoginPage:T,catchAll:R,options:v}};import{useState as ga}from"react";import{ExportToCsv as Ta}from"export-to-csv-fix-source-map";var Ay=({resourceName:e,resource:t,sorter:r,sorters:o,filters:s,maxItemCount:a,pageSize:n=20,mapData:u=R=>R,exportOptions:p,meta:d,metaData:l,dataProviderName:c,onError:T}={})=>{var m;let[R,v]=ga(!1),U=z(),{resource:i,resources:y}=Q(),f=`${yt(i==null?void 0:i.name,"plural")}-${new Date().toLocaleString()}`,{getList:C}=U(k((m=i==null?void 0:i.identifier)!=null?m:i==null?void 0:i.name,c,y));return{isLoading:R,triggerExport:async()=>{var h;v(!0);let x=[],g=1,D=!0;for(;D;)try{let{data:b,total:M}=await C({resource:(h=i==null?void 0:i.name)!=null?h:"",filters:s,sort:L(o,r),sorters:L(o,r),pagination:{current:g,pageSize:n,mode:"server"},meta:L(d,l),metaData:L(d,l)});g++,x.push(...b),a&&x.length>=a&&(x=x.slice(0,a),D=!1),M===x.length&&(D=!1)}catch(b){v(!1),D=!1,T==null||T(b);return}new Ta({filename:f,useKeysAsHeaders:!0,...p}).generateCsv(x.map(u)),v(!1)}}};import ns from"react";import Ra from"warn-once";var Ky=({resource:e,action:t,id:r,onMutationSuccess:o,onMutationError:s,redirect:a,successNotification:n,errorNotification:u,meta:p,metaData:d,mutationMode:l,liveMode:c,onLiveEvent:T,liveParams:R,undoableTimeout:v,dataProviderName:U,invalidates:i,queryOptions:y,createMutationOptions:f,updateMutationOptions:C}={})=>{let{options:E}=Vt(),{resources:m}=Q(),x=H(),{resource:g,id:D,action:P}=j(),{useParams:h}=K(),{resource:b,action:M,id:I}=h(),w=G(),B=typeof g=="string"?g:g==null?void 0:g.name,F=!e||e===(x==="legacy"?b:B)?r!=null?r:x==="legacy"?I:D:r,[S,Z]=ns.useState(F);ns.useEffect(()=>{Z(F)},[F]);let A=e!=null?e:x==="legacy"?b:B,N=x==="legacy"?M:P,W=t!=null?t:N==="edit"||N==="clone"?N:"create",ke=Ye(),Y;if(x==="legacy")A&&(Y=ke(A));else if(e){let ce=$(e,m);ce?Y=ce:Y={name:e,route:e}}else if(typeof g=="string"){let ce=$(g,m);ce?Y=ce:Y={name:g,route:g}}else Y=g;let me=w({resource:Y,meta:L(p,d)}),{mutationMode:Oe}=Ae(),be=l!=null?l:Oe,xe=W==="create",ie=W==="edit",re=W==="clone";Ra((re||ie)&&Boolean(e)&&!Boolean(r),`[useForm]: action: "${W}", resource: "${A}", id: ${S} 

If you don't use the \`setId\` method to set the \`id\`, you should pass the \`id\` prop to \`useForm\`. Otherwise, \`useForm\` will not be able to infer the \`id\` from the current URL. 

See https://refine.dev/docs/api-reference/core/hooks/useForm/#resource`);let Ht=Qr({redirectFromProps:a,action:W,redirectOptions:E.redirect}),ut=S!==void 0&&(ie||re),Je=wt({resource:Y==null?void 0:Y.name,id:S!=null?S:"",queryOptions:{enabled:ut,...y},liveMode:c,onLiveEvent:T,liveParams:R,meta:me,metaData:me,dataProviderName:U}),{isFetching:Le}=Je,Ie=At({mutationOptions:f}),{mutate:Pt,isLoading:Ot}=Ie,Xe=Nr({mutationOptions:C}),{mutate:$t,isLoading:bt}=Xe,{setWarnWhen:he}=kt(),ct=as();return{...xe||re?{formLoading:Le||Ot,mutationResult:Ie,onFinish:async ce=>{he(!1);let Ve=Be=>{ct({redirect:Ht,resource:Y,id:Be,meta:d})};return be!=="pessimistic"&&setTimeout(()=>{Ve()}),new Promise((Be,qe)=>{if(be!=="pessimistic"&&Be(),!!Y)return Pt({values:ce,resource:Y.name,successNotification:n,errorNotification:u,meta:me,metaData:me,dataProviderName:U,invalidates:i},{onSuccess:(we,_e,et)=>{var vt;o&&o(we,ce,et);let tt=(vt=we==null?void 0:we.data)==null?void 0:vt.id;Ve(tt),Be(we)},onError:(we,_e,et)=>{if(s)return s(we,ce,et);qe()}})})}}:{formLoading:Le||bt,mutationResult:Xe,onFinish:async ce=>{if(he(!1),!Y)return;let Ve={id:S!=null?S:"",values:ce,resource:Y.name,mutationMode:be,undoableTimeout:v,successNotification:n,errorNotification:u,meta:me,metaData:me,dataProviderName:U,invalidates:i},Be=()=>{ct({redirect:Ht,resource:Y,id:S,meta:d})};return be!=="pessimistic"&&setTimeout(()=>{Be()}),new Promise((qe,we)=>(be!=="pessimistic"&&qe(),setTimeout(()=>{$t(Ve,{onSuccess:(_e,et,tt)=>{o&&o(_e,ce,tt),be==="pessimistic"&&Be(),qe(_e)},onError:(_e,et,tt)=>{if(s)return s(_e,ce,tt);we()}})})))}},queryResult:Je,id:S,setId:Z,redirect:(ce,Ve)=>{ct({redirect:ce!==void 0?ce:ie?"list":"edit",resource:Y,id:Ve!=null?Ve:S,meta:d})}}};import{useCallback as xa}from"react";var as=()=>{let{show:e,edit:t,list:r,create:o}=se();return xa(({redirect:a,resource:n,id:u,meta:p={}})=>{if(a&&n)return!!n.show&&a==="show"&&u?e(n,u,void 0,p):!!n.edit&&a==="edit"&&u?t(n,u,void 0,p):!!n.create&&a==="create"?o(n,void 0,p):r(n,"push",p)},[])};import Ca,{useContext as Pa}from"react";var ne=()=>{let e=Pa(We);return Ca.useMemo(()=>{var o;return(o=e==null?void 0:e.go)!=null?o:()=>()=>{}},[e==null?void 0:e.go])()};import ba,{useContext as ha}from"react";var Wr=()=>{let e=ha(We);return ba.useMemo(()=>{var o;return(o=e==null?void 0:e.back)!=null?o:()=>()=>{}},[e==null?void 0:e.back])()};var se=()=>{let{resources:e}=Q(),t=H(),{useHistory:r}=K(),o=r(),s=j(),a=ne(),n=Wr(),u=(m,x="push")=>{t==="legacy"?o[x](m):a({to:m,type:x})},p=(m,x={})=>{var g,D,P;if(t==="legacy"){let h=typeof m=="string"?(g=$(m,e,!0))!=null?g:{name:m,route:m}:m,b=pe(h,e,!0).find(M=>M.action==="create");return b?fe(b.route,h==null?void 0:h.meta,s,x):""}else{let h=typeof m=="string"?(D=$(m,e))!=null?D:{name:m}:m,b=(P=pe(h,e).find(M=>M.action==="create"))==null?void 0:P.route;return b?a({to:fe(b,h==null?void 0:h.meta,s,x),type:"path"}):""}},d=(m,x,g={})=>{var P,h,b;let D=encodeURIComponent(x);if(t==="legacy"){let M=typeof m=="string"?(P=$(m,e,!0))!=null?P:{name:m,route:m}:m,I=pe(M,e,!0).find(w=>w.action==="edit");return I?fe(I.route,M==null?void 0:M.meta,s,{...g,id:D}):""}else{let M=typeof m=="string"?(h=$(m,e))!=null?h:{name:m}:m,I=(b=pe(M,e).find(w=>w.action==="edit"))==null?void 0:b.route;return I?a({to:fe(I,M==null?void 0:M.meta,s,{...g,id:D}),type:"path"}):""}},l=(m,x,g={})=>{var P,h,b;let D=encodeURIComponent(x);if(t==="legacy"){let M=typeof m=="string"?(P=$(m,e,!0))!=null?P:{name:m,route:m}:m,I=pe(M,e,!0).find(w=>w.action==="clone");return I?fe(I.route,M==null?void 0:M.meta,s,{...g,id:D}):""}else{let M=typeof m=="string"?(h=$(m,e))!=null?h:{name:m}:m,I=(b=pe(M,e).find(w=>w.action==="clone"))==null?void 0:b.route;return I?a({to:fe(I,M==null?void 0:M.meta,s,{...g,id:D}),type:"path"}):""}},c=(m,x,g={})=>{var P,h,b;let D=encodeURIComponent(x);if(t==="legacy"){let M=typeof m=="string"?(P=$(m,e,!0))!=null?P:{name:m,route:m}:m,I=pe(M,e,!0).find(w=>w.action==="show");return I?fe(I.route,M==null?void 0:M.meta,s,{...g,id:D}):""}else{let M=typeof m=="string"?(h=$(m,e))!=null?h:{name:m}:m,I=(b=pe(M,e).find(w=>w.action==="show"))==null?void 0:b.route;return I?a({to:fe(I,M==null?void 0:M.meta,s,{...g,id:D}),type:"path"}):""}},T=(m,x={})=>{var g,D,P;if(t==="legacy"){let h=typeof m=="string"?(g=$(m,e,!0))!=null?g:{name:m,route:m}:m,b=pe(h,e,!0).find(M=>M.action==="list");return b?fe(b.route,h==null?void 0:h.meta,s,x):""}else{let h=typeof m=="string"?(D=$(m,e))!=null?D:{name:m}:m,b=(P=pe(h,e).find(M=>M.action==="list"))==null?void 0:P.route;return b?a({to:fe(b,h==null?void 0:h.meta,s,x),type:"path"}):""}};return{create:(m,x="push",g={})=>{u(p(m,g),x)},createUrl:p,edit:(m,x,g="push",D={})=>{u(d(m,x,D),g)},editUrl:d,clone:(m,x,g="push",D={})=>{u(l(m,x,D),g)},cloneUrl:l,show:(m,x,g="push",D={})=>{u(c(m,x,D),g)},showUrl:c,list:(m,x="push",g={})=>{u(T(m,g),x)},listUrl:T,push:(m,...x)=>{t==="legacy"?o.push(m,...x):a({to:m,type:"push"})},replace:(m,...x)=>{t==="legacy"?o.replace(m,...x):a({to:m,type:"replace"})},goBack:()=>{t==="legacy"?o.goBack():n()}}};import va,{useState as Da}from"react";import Ea from"warn-once";var Pg=({resource:e,id:t,successNotification:r,errorNotification:o,meta:s,metaData:a,liveMode:n,onLiveEvent:u,dataProviderName:p,queryOptions:d}={})=>{let l=H(),{resources:c}=Q(),{useParams:T}=K(),{resource:R,id:v}=j(),{resource:U,id:i}=T(),y=G(),f=R==null?void 0:R.name,C=!e||e===(l==="legacy"?U:f)?t!=null?t:l==="legacy"?i:v:t,[E,m]=Da(C);va.useEffect(()=>{m(C)},[C]);let x=e!=null?e:l==="legacy"?U:f,g,D=Ye();if(l==="legacy")x&&(g=D(x));else if(e){let b=$(e,c);b?g=b:g={name:e,route:e}}else if(typeof R=="string"){let b=$(R,c);b?g=b:g={name:R,route:R}}else g=R;let P=y({resource:g,meta:L(s,a)});return Ea(Boolean(e)&&!Boolean(t),`[useShow]: resource: "${x}", id: ${t} 

If you don't use the \`setShowId\` method to set the \`showId\`, you should pass the \`id\` prop to \`useShow\`. Otherwise, \`useShow\` will not be able to infer the \`id\` from the current URL. 

See https://refine.dev/docs/api-reference/core/hooks/show/useShow/#resource`),{queryResult:wt({resource:g==null?void 0:g.name,id:E!=null?E:"",queryOptions:{enabled:E!==void 0,...d},successNotification:r,errorNotification:o,meta:P,metaData:P,liveMode:n,onLiveEvent:u,dataProviderName:p}),showId:E,setShowId:m}};import{useEffect as Ua,useState as Kr}from"react";import{parse as Ma}from"papaparse";import La from"lodash-es/chunk";var wg=({resourceName:e,resource:t,mapData:r=l=>l,paparseOptions:o,batchSize:s=Number.MAX_SAFE_INTEGER,onFinish:a,meta:n,metaData:u,onProgress:p,dataProviderName:d}={})=>{let[l,c]=Kr(0),[T,R]=Kr(0),[v,U]=Kr(!1),{resource:i}=Q(t!=null?t:e),y=Hr(),f=At(),C;s===1?C=f:C=y;let E=()=>{R(0),c(0),U(!1)},m=g=>{let D={succeeded:g.filter(P=>P.type==="success"),errored:g.filter(P=>P.type==="error")};a==null||a(D),U(!1)};Ua(()=>{p==null||p({totalAmount:T,processedAmount:l})},[T,l]);let x=({file:g})=>(E(),new Promise(D=>{U(!0),Ma(g,{complete:async({data:P})=>{let h=jt(P,r);if(R(h.length),s===1){let b=h.map(I=>async()=>{var F;return{response:await f.mutateAsync({resource:(F=i==null?void 0:i.name)!=null?F:"",values:I,successNotification:!1,errorNotification:!1,dataProviderName:d,meta:L(n,u),metaData:L(n,u)}),value:I}}),M=await tr(b,({response:I,value:w})=>(c(B=>B+1),{response:[I.data],type:"success",request:[w]}),(I,w)=>({response:[I],type:"error",request:[h[w]]}));D(M)}else{let b=La(h,s),M=b.map(w=>async()=>{var S;return{response:await y.mutateAsync({resource:(S=i==null?void 0:i.name)!=null?S:"",values:w,successNotification:!1,errorNotification:!1,dataProviderName:d,meta:L(n,u),metaData:L(n,u)}),value:w,currentBatchLength:w.length}}),I=await tr(M,({response:w,currentBatchLength:B,value:F})=>(c(S=>S+B),{response:w.data,type:"success",request:F}),(w,B)=>({response:[w],type:"error",request:b[B]}));D(I)}},...o})}).then(D=>(m(D),D)));return{inputProps:{type:"file",accept:".csv",onChange:g=>{g.target.files&&g.target.files.length>0&&x({file:g.target.files[0]})}},mutationResult:C,isLoading:v,handleChange:x}};import{useCallback as is,useState as Ia}from"react";var Qg=({defaultVisible:e=!1}={})=>{let[t,r]=Ia(e),o=is(()=>r(!0),[t]),s=is(()=>r(!1),[t]);return{visible:t,show:o,close:s}};import wa from"react";var Bt=()=>{let e=H(),{resource:t,resources:r}=Q(),o=j();return wa.useCallback(({resource:a,action:n,meta:u})=>{var T;let p=a||t;if(!p)return;let l=(T=pe(p,r,e==="legacy").find(R=>R.action===n))==null?void 0:T.route;return l?fe(l,p==null?void 0:p.meta,o,u):void 0},[r,t,o])};var Aa=({resource:e,action:t,meta:r,legacy:o})=>Bt()({resource:e,action:t,meta:r,legacy:o});import Sa,{useContext as Qa}from"react";var st=()=>{let e=Qa(We);return e!=null&&e.Link?e.Link:({to:r,...o})=>Sa.createElement("a",{href:r,...o})};import{useContext as Va}from"react";import us from"react";var Ke={useHistory:()=>!1,useLocation:()=>!1,useParams:()=>({}),Prompt:()=>null,Link:()=>null},ka=us.createContext(Ke),Ft=ka,cs=({children:e,useHistory:t,useLocation:r,useParams:o,Prompt:s,Link:a,routes:n})=>us.createElement(Ft.Provider,{value:{useHistory:t!=null?t:Ke.useHistory,useLocation:r!=null?r:Ke.useLocation,useParams:o!=null?o:Ke.useParams,Prompt:s!=null?s:Ke.Prompt,Link:a!=null?a:Ke.Link,routes:n!=null?n:Ke.routes}},e);var K=()=>{let e=Va(Ft),{useHistory:t,useLocation:r,useParams:o,Prompt:s,Link:a,routes:n}=e!=null?e:Ke;return{useHistory:t,useLocation:r,useParams:o,Prompt:s,Link:a,routes:n}};import{useQuery as Ba}from"@tanstack/react-query";import{useContext as Fa}from"react";import ps from"react";var nt=ps.createContext({}),ds=({can:e,children:t})=>ps.createElement(nt.Provider,{value:{can:e}},t);var ur=e=>{let{icon:t,list:r,edit:o,create:s,show:a,clone:n,children:u,meta:p,options:d,...l}=e,{icon:c,...T}=p!=null?p:{},{icon:R,...v}=d!=null?d:{};return{...l,...p?{meta:T}:{},...d?{options:v}:{}}};var ls=({action:e,resource:t,params:r,queryOptions:o})=>{let{can:s}=Fa(nt),{resource:a,...n}=r!=null?r:{},u=ur(a!=null?a:{}),p=Ba(["useCan",{action:e,resource:t,params:{...n,resource:u},enabled:o==null?void 0:o.enabled}],()=>{var d;return(d=s==null?void 0:s({action:e,resource:t,params:n}))!=null?d:Promise.resolve({can:!0})},{enabled:typeof s<"u",...o,retry:!1});return typeof s>"u"?{data:{can:!0}}:p};import{useContext as Na}from"react";var hT=()=>{let{can:e}=Na(nt);return{can:e}};import{useCallback as ms,useMemo as Ha,useState as zr}from"react";import Oa from"lodash/uniqBy";import $a from"lodash/debounce";import cr from"lodash/get";var VT=e=>{var Oe,be,xe;let[t,r]=zr([]),[o,s]=zr([]),[a,n]=zr([]),{resource:u,sort:p,sorters:d,filters:l=[],optionLabel:c="title",optionValue:T="id",debounce:R=300,successNotification:v,errorNotification:U,defaultValueQueryOptions:i,queryOptions:y,fetchSize:f,pagination:C,hasPagination:E=!1,liveMode:m,defaultValue:x=[],onLiveEvent:g,onSearch:D,liveParams:P,meta:h,metaData:b,dataProviderName:M}=e,{resources:I}=Q(),w=G(),B=$(u,I),F=(Oe=B==null?void 0:B.name)!=null?Oe:u,S=w({resource:B,meta:L(h,b)}),Z=Array.isArray(x)?x:[x],A=ms(ie=>{n(ie.data.map(re=>({label:cr(re,c),value:cr(re,T)})))},[c,T]),N=i!=null?i:y,W=kr({resource:F,ids:Z,queryOptions:{...N,enabled:Z.length>0&&((be=i==null?void 0:i.enabled)!=null?be:!0),onSuccess:ie=>{var re;A(ie),(re=N==null?void 0:N.onSuccess)==null||re.call(N,ie)}},meta:S,metaData:S,liveMode:"off",dataProviderName:M}),ke=ms(ie=>{s(ie.data.map(re=>({label:cr(re,c),value:cr(re,T)})))},[c,T]),Y=It({resource:F,sorters:L(d,p),filters:l.concat(t),pagination:{current:C==null?void 0:C.current,pageSize:(xe=C==null?void 0:C.pageSize)!=null?xe:f,mode:C==null?void 0:C.mode},hasPagination:E,queryOptions:{...y,onSuccess:ie=>{var re;ke(ie),(re=y==null?void 0:y.onSuccess)==null||re.call(y,ie)}},successNotification:v,errorNotification:U,meta:S,metaData:S,liveMode:m,liveParams:P,onLiveEvent:g,dataProviderName:M}),me=ie=>{if(D){r(D(ie));return}if(ie)r([{field:c,operator:"contains",value:ie}]);else{r([]);return}};return{queryResult:Y,defaultValueQueryResult:W,options:Ha(()=>Oa([...o,...a],"value"),[o,a]),onSearch:$a(me,R)}};import Ga,{useState as pr,useEffect as fs}from"react";import ys from"qs";import dr from"lodash/differenceWith";import lr from"lodash/isEqual";import Wa from"warn-once";var gs=[],Ts=[];function _T({initialCurrent:e,initialPageSize:t,hasPagination:r=!0,pagination:o,initialSorter:s,permanentSorter:a=Ts,defaultSetFilterBehavior:n,initialFilter:u,permanentFilter:p=gs,filters:d,sorters:l,syncWithLocation:c,resource:T,successNotification:R,errorNotification:v,queryOptions:U,liveMode:i,onLiveEvent:y,liveParams:f,meta:C,metaData:E,dataProviderName:m}={}){var Xr,qr,eo,to,ro,oo,so,no,ao,io;let{syncWithLocation:x}=Gr(),g=c!=null?c:x,D=Wo(i),P=H(),{useLocation:h}=K(),{search:b,pathname:M}=h(),I=G(),w=j(),B=((d==null?void 0:d.mode)||"server")==="server",F=((l==null?void 0:l.mode)||"server")==="server",S=r===!1?"off":"server",Z=((Xr=o==null?void 0:o.mode)!=null?Xr:S)!=="off",A=L(o==null?void 0:o.current,e),N=L(o==null?void 0:o.pageSize,t),W=L(C,E),{parsedCurrent:ke,parsedPageSize:Y,parsedSorter:me,parsedFilters:Oe}=Zt(b!=null?b:"?"),be=L(d==null?void 0:d.initial,u),xe=(qr=L(d==null?void 0:d.permanent,p))!=null?qr:gs,ie=L(l==null?void 0:l.initial,s),re=(eo=L(l==null?void 0:l.permanent,a))!=null?eo:Ts,Ht=(to=L(d==null?void 0:d.defaultBehavior,n))!=null?to:"merge",ut,Je,Le,Ie;g?(ut=((ro=w==null?void 0:w.params)==null?void 0:ro.current)||ke||A||1,Je=((oo=w==null?void 0:w.params)==null?void 0:oo.pageSize)||Y||N||10,Le=((so=w==null?void 0:w.params)==null?void 0:so.sorters)||(me.length?me:ie),Ie=((no=w==null?void 0:w.params)==null?void 0:no.filters)||(Oe.length?Oe:be)):(ut=A||1,Je=N||10,Le=ie,Ie=be);let{replace:Pt}=se(),Ot=ne(),{resource:Xe}=Q(T),$t=I({resource:Xe,meta:W}),bt=Xe==null?void 0:Xe.name;Ga.useEffect(()=>{Wa(typeof bt>"u","useTable: `resource` is not defined.")},[bt]);let[he,ct]=pr(qt(re,Le!=null?Le:[])),[pt,ht]=pr(Xt(xe,Ie!=null?Ie:[])),[dt,mr]=pr(ut),[ze,ce]=pr(Je),Ve=({pagination:{current:ue,pageSize:ve},sorter:Gt,filters:Wt})=>{var Kt;if(P==="new")return(Kt=Ot({type:"path",options:{keepHash:!0,keepQuery:!0},query:{...Z?{current:ue,pageSize:ve}:{},sorters:Gt,filters:Wt,...Be()}}))!=null?Kt:"";{let Dt=ys.parse(b==null?void 0:b.substring(1)),fr=Yt({pagination:{pageSize:ve,current:ue},sorters:he!=null?he:Gt,filters:Wt,...Dt});return`${M!=null?M:""}?${fr!=null?fr:""}`}};fs(()=>{b===""&&(mr(ut),ce(Je),ct(qt(re,Le!=null?Le:[])),ht(Xt(xe,Ie!=null?Ie:[])))},[b]);let Be=()=>{var ue;if(P==="new"){let{sorters:ve,filters:Gt,pageSize:Wt,current:Kt,...Dt}=(ue=w==null?void 0:w.params)!=null?ue:{};return Dt}else{let{sorter:ve,filters:Gt,pageSize:Wt,current:Kt,...Dt}=ys.parse(b,{ignoreQueryPrefix:!0});return Dt}};fs(()=>{if(g){let ue=Be();if(P==="new")Ot({type:"replace",options:{keepQuery:!0},query:{...Z?{pageSize:ze,current:dt}:{},sorters:dr(he,re,lr),filters:dr(pt,xe,lr)}});else{let ve=Yt({...Z?{pagination:{pageSize:ze,current:dt}}:{},sorters:dr(he,re,lr),filters:dr(pt,xe,lr),...ue});return Pt==null?void 0:Pt(`${M}?${ve}`,void 0,{shallow:!0})}}},[g,dt,ze,he,pt]);let qe=It({resource:bt,hasPagination:r,pagination:{current:dt,pageSize:ze,mode:o==null?void 0:o.mode},filters:B?ft(xe,pt):void 0,sorters:F?Jt(re,he):void 0,queryOptions:U,successNotification:R,errorNotification:v,meta:$t,metaData:$t,liveMode:D,liveParams:f,onLiveEvent:y,dataProviderName:m}),we=ue=>{ht(ve=>ft(xe,ue,ve))},_e=ue=>{ht(ft(xe,ue))},et=ue=>{ht(ve=>ft(xe,ue(ve)))},tt=(ue,ve=Ht)=>{typeof ue=="function"?et(ue):ve==="replace"?_e(ue):we(ue)},vt=ue=>{ct(()=>Jt(re,ue))};return{tableQueryResult:qe,sorters:he,setSorters:vt,sorter:he,setSorter:vt,filters:pt,setFilters:tt,current:dt,setCurrent:mr,pageSize:ze,setPageSize:ce,pageCount:ze?Math.ceil(((io=(ao=qe.data)==null?void 0:ao.total)!=null?io:0)/ze):1,createLinkForSyncWithLocation:Ve}}import{useContext as Cs}from"react";import{useMutation as Ps,useQueryClient as Ka}from"@tanstack/react-query";import Rs from"react";var at=Rs.createContext({}),xs=({create:e,get:t,update:r,children:o})=>Rs.createElement(at.Provider,{value:{create:e,get:t,update:r}},o);var Ee=({logMutationOptions:e,renameMutationOptions:t}={})=>{let r=Ka(),o=Cs(at),s=O(),{resources:a}=Cs(Ze),{data:n,refetch:u,isLoading:p}=yr({v3LegacyAuthProviderCompatible:Boolean(s==null?void 0:s.isLegacy),queryOptions:{enabled:!!o}}),d=Ps(async c=>{var U,i,y,f,C;let T=$(c.resource,a),R=L((U=T==null?void 0:T.meta)==null?void 0:U.audit,(i=T==null?void 0:T.options)==null?void 0:i.audit,(f=(y=T==null?void 0:T.options)==null?void 0:y.auditLog)==null?void 0:f.permissions);if(R&&!Er(R,c.action))return;let v;return p&&(v=await u()),await((C=o.create)==null?void 0:C.call(o,{...c,author:n!=null?n:v==null?void 0:v.data}))},e),l=Ps(async c=>{var T;return await((T=o.update)==null?void 0:T.call(o,c))},{onSuccess:c=>{if(c!=null&&c.resource){let T=J(c==null?void 0:c.resource);r.invalidateQueries(T.logList())}},...t});return{log:d,rename:l}};import{useContext as za}from"react";import{useQuery as _a}from"@tanstack/react-query";var fR=({resource:e,action:t,meta:r,author:o,metaData:s,queryOptions:a})=>{let{get:n}=za(at),u=J(e,void 0,s);return _a(u.logList(r),()=>{var d;return(d=n==null?void 0:n({resource:e,action:t,author:o,meta:r,metaData:s}))!=null?d:Promise.resolve([])},{enabled:typeof n<"u",...a,retry:!1})};import{useCallback as ja}from"react";import{useQueryClient as Za}from"@tanstack/react-query";var Ue=()=>{let{resources:e}=Q(),t=Za();return ja(({resource:o,dataProviderName:s,invalidates:a,id:n})=>{if(a===!1)return;let u=J(o,k(o,s,e));a.forEach(p=>{switch(p){case"all":t.invalidateQueries(u.all);break;case"list":t.invalidateQueries(u.list());break;case"many":t.invalidateQueries(u.many());break;case"resourceAll":t.invalidateQueries(u.resourceAll);break;case"detail":t.invalidateQueries(u.detail(n||""));break;default:break}})},[])};import{useContext as Ya}from"react";import Ja from"warn-once";var kR=({meta:e={}}={})=>{let t=H(),{i18nProvider:r}=Ya(Se),o=j(),s=V(),{resources:a,resource:n,action:u}=Q(),p=[];if(!(n!=null&&n.name))return{breadcrumbs:p};let d=l=>{var T,R,v,U,i,y,f,C;let c=typeof l=="string"?(T=$(l,a,t==="legacy"))!=null?T:{name:l}:l;if(c){let E=L((R=c==null?void 0:c.meta)==null?void 0:R.parent,c==null?void 0:c.parentName);E&&d(E);let m=pe(c,a,t==="legacy").find(D=>D.action==="list"),x=(v=m==null?void 0:m.resource)!=null&&v.list?m==null?void 0:m.route:void 0,g=x?t==="legacy"?x:fe(x,c==null?void 0:c.meta,o,e):void 0;p.push({label:(y=L((U=c.meta)==null?void 0:U.label,(i=c.options)==null?void 0:i.label))!=null?y:s(`${c.name}.${c.name}`,rt(c.name)),href:g,icon:L((f=c.meta)==null?void 0:f.icon,(C=c.options)==null?void 0:C.icon,c.icon)})}};if(d(n),u&&u!=="list"){let l=`actions.${u}`,c=s(l);typeof r<"u"&&c===l?(Ja(!0,`[useBreadcrumb]: Breadcrumb missing translate key for the "${u}" action. Please add "actions.${u}" key to your translation file.
For more information, see https://refine.dev/docs/core/hooks/useBreadcrumb/#i18n-support`),p.push({label:s(`buttons.${u}`,rt(u))})):p.push({label:s(l,rt(u))})}return{breadcrumbs:p}};import _r from"react";var Tt=(e,t,r=!1)=>{let o=[],s=Ce(e,t);for(;s;)o.push(s),s=Ce(s,t);return o.reverse(),`/${[...o,e].map(n=>{var u,p;return le((p=(u=r?n.route:void 0)!=null?u:n.identifier)!=null?p:n.name)}).join("/").replace(/^\//,"")}`};var bs=(e,t=!1)=>{let r={item:{name:"__root__"},children:{}};e.forEach(s=>{var d,l;let a=[],n=Ce(s,e);for(;n;)a.push(n),n=Ce(n,e);a.reverse();let u=r;a.forEach(c=>{var R,v;let T=(v=(R=t?c.route:void 0)!=null?R:c.identifier)!=null?v:c.name;u.children[T]||(u.children[T]={item:c,children:{}}),u=u.children[T]});let p=(l=(d=t?s.route:void 0)!=null?d:s.identifier)!=null?l:s.name;u.children[p]||(u.children[p]={item:s,children:{}})});let o=s=>{let a=[];return Object.keys(s.children).forEach(n=>{let u=Tt(s.children[n].item,e,t),p={...s.children[n].item,key:u,children:o(s.children[n])};a.push(p)}),a};return o(r)};var hs=e=>e.split("?")[0].split("#")[0].replace(/(.+)(\/$)/,"$1"),Xa=({meta:e,hideOnMissingParameter:t}={hideOnMissingParameter:!0})=>{let r=V(),o=Bt(),s=H(),{resource:a,resources:n}=Q(),{pathname:u}=j(),{useLocation:p}=K(),{pathname:d}=p(),l=s==="legacy"?hs(d):u?hs(u):void 0,c=`/${(l!=null?l:"").replace(/^\//,"")}`,T=a?Tt(a,n,s==="legacy"):c!=null?c:"",R=_r.useMemo(()=>{if(!a)return[];let i=Ce(a,n),y=[Tt(a,n)];for(;i;)y.push(Tt(i,n)),i=Ce(i,n);return y},[]),v=_r.useCallback(i=>{var f,C,E,m,x,g,D,P;if(((E=(f=i==null?void 0:i.meta)==null?void 0:f.hide)!=null?E:(C=i==null?void 0:i.options)==null?void 0:C.hide)||!(i!=null&&i.list)&&i.children.length===0)return;let y=i.list?o({resource:i,action:"list",legacy:s==="legacy",meta:e}):void 0;if(!(t&&y&&y.match(/(\/|^):(.+?)(\/|$){1}/)))return{...i,route:y,icon:L((m=i.meta)==null?void 0:m.icon,(x=i.options)==null?void 0:x.icon,i.icon),label:(P=L((g=i==null?void 0:i.meta)==null?void 0:g.label,(D=i==null?void 0:i.options)==null?void 0:D.label))!=null?P:r(`${i.name}.${i.name}`,yt(i.name,"plural"))}},[s,e,r,t]),U=_r.useMemo(()=>{let i=bs(n,s==="legacy"),y=f=>f.flatMap(C=>{let E=y(C.children),m=v({...C,children:E});return m?[m]:[]});return y(i)},[n,s,v]);return{defaultOpenKeys:R,selectedKey:T,menuItems:U}};var G=()=>{let{params:e}=j();return({resource:r,meta:o}={})=>{let{meta:s}=ur(r!=null?r:{}),{filters:a,sorters:n,current:u,pageSize:p,...d}=e!=null?e:{};return{...s,...d,...o}}};var ti=()=>{let[e,t]=ei(),r=V(),{push:o}=se(),s=ne(),a=H(),{resource:n,action:u}=Q();return qa(()=>{n&&u&&t(r("pages.error.info",{action:u,resource:n==null?void 0:n.name},`You may have forgotten to add the "${u}" component to "${n==null?void 0:n.name}" resource.`))},[n,u]),Nt.createElement(Nt.Fragment,null,Nt.createElement("h1",null,r("pages.error.404",void 0,"Sorry, the page you visited does not exist.")),e&&Nt.createElement("p",null,e),Nt.createElement("button",{onClick:()=>{a==="legacy"?o("/"):s({to:"/"})}},r("pages.error.backHome",void 0,"Back Home")))};import ye,{useState as vs}from"react";var Ar=()=>{let[e,t]=vs(""),[r,o]=vs(""),s=V(),a=O(),{mutate:n}=Et({v3LegacyAuthProviderCompatible:Boolean(a==null?void 0:a.isLegacy)});return ye.createElement(ye.Fragment,null,ye.createElement("h1",null,s("pages.login.title","Sign in your account")),ye.createElement("form",{onSubmit:u=>{u.preventDefault(),n({username:e,password:r})}},ye.createElement("table",null,ye.createElement("tbody",null,ye.createElement("tr",null,ye.createElement("td",null,s("pages.login.username",void 0,"username"),":"),ye.createElement("td",null,ye.createElement("input",{type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",autoFocus:!0,required:!0,value:e,onChange:u=>t(u.target.value)}))),ye.createElement("tr",null,ye.createElement("td",null,s("pages.login.password",void 0,"password"),":"),ye.createElement("td",null,ye.createElement("input",{type:"password",required:!0,size:20,value:r,onChange:u=>o(u.target.value)}))))),ye.createElement("br",null),ye.createElement("input",{type:"submit",value:"login"})))};import Rt from"react";import ae,{useState as jr}from"react";var Ds=({providers:e,registerLink:t,forgotPasswordLink:r,rememberMe:o,contentProps:s,wrapperProps:a,renderContent:n,formProps:u,title:p=void 0})=>{let d=H(),l=st(),{Link:c}=K(),T=d==="legacy"?c:l,[R,v]=jr(""),[U,i]=jr(""),[y,f]=jr(!1),C=V(),E=O(),{mutate:m}=Et({v3LegacyAuthProviderCompatible:Boolean(E==null?void 0:E.isLegacy)}),x=(P,h)=>P?typeof P=="string"?ae.createElement(T,{to:P},h):P:null,g=()=>e?e.map(P=>{var h;return ae.createElement("div",{key:P.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},ae.createElement("button",{onClick:()=>m({providerName:P.name}),style:{display:"flex",alignItems:"center"}},P==null?void 0:P.icon,(h=P.label)!=null?h:ae.createElement("label",null,P.label)))}):null,D=ae.createElement("div",{...s},ae.createElement("h1",{style:{textAlign:"center"}},C("pages.login.title","Sign in to your account")),g(),ae.createElement("hr",null),ae.createElement("form",{onSubmit:P=>{P.preventDefault(),m({email:R,password:U,remember:y})},...u},ae.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},ae.createElement("label",null,C("pages.login.fields.email","Email")),ae.createElement("input",{name:"email",type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:R,onChange:P=>v(P.target.value)}),ae.createElement("label",null,C("pages.login.fields.password","Password")),ae.createElement("input",{type:"password",name:"password",required:!0,size:20,value:U,onChange:P=>i(P.target.value)}),o!=null?o:ae.createElement(ae.Fragment,null,ae.createElement("label",null,C("pages.login.buttons.rememberMe","Remember me"),ae.createElement("input",{name:"remember",type:"checkbox",size:20,checked:y,value:y.toString(),onChange:()=>{f(!y)}}))),ae.createElement("br",null),r!=null?r:x("/forgot-password",C("pages.login.buttons.forgotPassword","Forgot password?")),ae.createElement("input",{type:"submit",value:C("pages.login.signin","Sign in")}),t!=null?t:ae.createElement("span",null,C("pages.login.buttons.noAccount","Don\u2019t have an account?")," ",x("/register",C("pages.login.register","Sign up"))))));return ae.createElement("div",{...a},n?n(D,p):D)};import de,{useState as Es}from"react";var Us=({providers:e,loginLink:t,wrapperProps:r,contentProps:o,renderContent:s,formProps:a,title:n=void 0})=>{let u=H(),p=st(),{Link:d}=K(),l=u==="legacy"?d:p,[c,T]=Es(""),[R,v]=Es(""),U=V(),i=O(),{mutate:y,isLoading:f}=xr({v3LegacyAuthProviderCompatible:Boolean(i==null?void 0:i.isLegacy)}),C=(x,g)=>x?typeof x=="string"?de.createElement(l,{to:x},g):x:null,E=()=>e?e.map(x=>{var g;return de.createElement("div",{key:x.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},de.createElement("button",{onClick:()=>y({providerName:x.name}),style:{display:"flex",alignItems:"center"}},x==null?void 0:x.icon,(g=x.label)!=null?g:de.createElement("label",null,x.label)))}):null,m=de.createElement("div",{...o},de.createElement("h1",{style:{textAlign:"center"}},U("pages.register.title","Sign up for your account")),E(),de.createElement("hr",null),de.createElement("form",{onSubmit:x=>{x.preventDefault(),y({email:c,password:R})},...a},de.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},de.createElement("label",null,U("pages.register.fields.email","Email")),de.createElement("input",{name:"email",type:"email",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:c,onChange:x=>T(x.target.value)}),de.createElement("label",null,U("pages.register.fields.password","Password")),de.createElement("input",{name:"password",type:"password",required:!0,size:20,value:R,onChange:x=>v(x.target.value)}),de.createElement("input",{type:"submit",value:U("pages.register.buttons.submit","Sign up"),disabled:f}),t!=null?t:de.createElement(de.Fragment,null,de.createElement("span",null,U("pages.login.buttons.haveAccount","Have an account?")," ",C("/login",U("pages.login.signin","Sign in")))))));return de.createElement("div",{...r},s?s(m,n):m)};import Me,{useState as ri}from"react";var Ms=({loginLink:e,wrapperProps:t,contentProps:r,renderContent:o,formProps:s,title:a=void 0})=>{let n=V(),u=H(),p=st(),{Link:d}=K(),l=u==="legacy"?d:p,[c,T]=ri(""),{mutate:R,isLoading:v}=Pr(),U=(y,f)=>y?typeof y=="string"?Me.createElement(l,{to:y},f):y:null,i=Me.createElement("div",{...r},Me.createElement("h1",{style:{textAlign:"center"}},n("pages.forgotPassword.title","Forgot your password?")),Me.createElement("hr",null),Me.createElement("form",{onSubmit:y=>{y.preventDefault(),R({email:c})},...s},Me.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},Me.createElement("label",null,n("pages.forgotPassword.fields.email","Email")),Me.createElement("input",{name:"email",type:"mail",autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:c,onChange:y=>T(y.target.value)}),Me.createElement("input",{type:"submit",disabled:v,value:n("pages.forgotPassword.buttons.submit","Send reset instructions")}),Me.createElement("br",null),e!=null?e:Me.createElement("span",null,n("pages.register.buttons.haveAccount","Have an account? ")," ",U("/login",n("pages.login.signin","Sign in"))))));return Me.createElement("div",{...t},o?o(i,a):i)};import Qe,{useState as Ls}from"react";var Is=({wrapperProps:e,contentProps:t,renderContent:r,formProps:o,title:s=void 0})=>{let a=V(),n=O(),{mutate:u,isLoading:p}=hr({v3LegacyAuthProviderCompatible:Boolean(n==null?void 0:n.isLegacy)}),[d,l]=Ls(""),[c,T]=Ls(""),R=Qe.createElement("div",{...t},Qe.createElement("h1",{style:{textAlign:"center"}},a("pages.updatePassword.title","Update Password")),Qe.createElement("hr",null),Qe.createElement("form",{onSubmit:v=>{v.preventDefault(),u({password:d,confirmPassword:c})},...o},Qe.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},Qe.createElement("label",null,a("pages.updatePassword.fields.password","New Password")),Qe.createElement("input",{name:"password",type:"password",required:!0,size:20,value:d,onChange:v=>l(v.target.value)}),Qe.createElement("label",null,a("pages.updatePassword.fields.confirmPassword","Confirm New Password")),Qe.createElement("input",{name:"confirmPassword",type:"password",required:!0,size:20,value:c,onChange:v=>T(v.target.value)}),Qe.createElement("input",{type:"submit",disabled:p,value:a("pages.updatePassword.buttons.submit","Update")}))));return Qe.createElement("div",{...e},r?r(R,s):R)};var oi=e=>{let{type:t}=e;return Rt.createElement(Rt.Fragment,null,(()=>{switch(t){case"register":return Rt.createElement(Us,{...e});case"forgotPassword":return Rt.createElement(Ms,{...e});case"updatePassword":return Rt.createElement(Is,{...e});default:return Rt.createElement(Ds,{...e})}})())};import Re from"react";var Zr=()=>Re.createElement(Re.Fragment,null,Re.createElement("h1",null,"Welcome on board"),Re.createElement("p",null,"Your configuration is completed."),Re.createElement("p",null,"Now you can get started by adding your resources to the"," ",Re.createElement("code",null,"`resources`")," property of ",Re.createElement("code",null,"`<Refine>`")),Re.createElement("div",{style:{display:"flex",gap:8}},Re.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},Re.createElement("button",null,"Documentation")),Re.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},Re.createElement("button",null,"Examples")),Re.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},Re.createElement("button",null,"Community"))));import _,{useState as si}from"react";var ni=[{title:"Documentation",description:"Learn about the technical details of using refine in your projects.",link:"https://refine.dev/",icon:_.createElement("svg",{width:"14",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_.createElement("path",{d:"M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V5a1 1 0 0 0-1-1H3a1 1 0 0 1 0-2h10a1 1 0 1 0 0-2H2Z",fill:"#fff"}))},{title:"Tutorial",description:"Learn how to use refine by building a fully-functioning CRUD app, from scratch to full launch.",link:"https://refine.dev/docs/tutorial/introduction/index/",icon:_.createElement("svg",{width:"16",height:"14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_.createElement("path",{d:"M0 4.573c0-.475.163-.948.53-1.25a4.57 4.57 0 0 1 .854-.553L5.956.485a4.571 4.571 0 0 1 4.088 0l4.572 2.285c.308.154.594.34.853.553.306.251.47.62.517 1.01.01.055.014.112.014.169v6.5a1 1 0 0 1-2 0V6.684l-3.956 1.978a4.571 4.571 0 0 1-4.088 0L1.384 6.376a4.57 4.57 0 0 1-.853-.553C.163 5.522 0 5.05 0 4.573Z",fill:"#fff"}),_.createElement("path",{d:"M5.061 13.305 3 12.274V9.42l2.061 1.031a6.571 6.571 0 0 0 5.878 0L13 9.421v2.853l-2.061 1.03a6.571 6.571 0 0 1-5.878 0Z",fill:"#fff"}))},{title:"Examples",description:"A collection of reference applications you can use as a starting point.",link:"https://refine.dev/examples",icon:_.createElement("svg",{width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4H0V2Zm3 2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm4-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm2 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",fill:"#fff"}),_.createElement("path",{d:"M0 14V8h16v6a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2Z",fill:"#fff"}))},{title:"Community",description:"Join our Discord community and keep up with the latest news.",link:"https://discord.gg/refine",icon:_.createElement("svg",{width:"16",height:"12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_.createElement("path",{d:"M13.553 1.005A13.334 13.334 0 0 0 10.253 0c-.156.276-.298.56-.423.85a12.42 12.42 0 0 0-3.664 0A8.975 8.975 0 0 0 5.744 0 13.43 13.43 0 0 0 2.44 1.007C.351 4.066-.215 7.05.068 9.99A13.36 13.36 0 0 0 4.116 12c.328-.436.618-.9.867-1.384a8.647 8.647 0 0 1-1.365-.645c.115-.082.227-.167.335-.249a9.594 9.594 0 0 0 8.094 0c.11.089.222.173.335.25-.436.254-.894.47-1.368.646.249.484.539.946.867 1.382a13.3 13.3 0 0 0 4.051-2.01c.332-3.41-.568-6.365-2.379-8.985Zm-8.21 7.176c-.79 0-1.442-.709-1.442-1.58 0-.872.63-1.587 1.439-1.587s1.456.715 1.442 1.586c-.014.872-.636 1.58-1.44 1.58Zm5.315 0c-.79 0-1.44-.709-1.44-1.58 0-.872.63-1.587 1.44-1.587.81 0 1.452.715 1.438 1.586-.014.872-.634 1.58-1.438 1.58Z",fill:"#fff"}))}],ai=()=>{let e=nr("(max-width: 1010px)"),t=nr("(max-width: 650px)"),r=()=>t?"1, 280px":e?"2, 280px":"4, 208px",o=()=>t?"32px":e?"40px":"48px",s=()=>t?"16px":e?"20px":"24px";return _.createElement("div",{style:{backgroundImage:"url(https://refine.ams3.cdn.digitaloceanspaces.com/welcome-page/welcome-page.webp)",backgroundPosition:"center top",backgroundSize:"cover",backgroundRepeat:"no-repeat",minHeight:"100vh",backgroundColor:"#0D0D12",fontFamily:"Arial",color:"#FFFFFF"}},_.createElement("div",{style:{height:"89px"}}),_.createElement("div",{style:{display:"flex",justifyContent:"center"}},_.createElement("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/welcome-page/welcome-logo.webp",width:"198",height:"54"})),_.createElement("div",{style:{height:e?"270px":"22vw",minHeight:e?"270px":"313px"}}),_.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"16px",textAlign:"center"}},_.createElement("h1",{style:{fontSize:o(),fontWeight:700,margin:"0px"}},"Welcome Aboard!"),_.createElement("h4",{style:{fontSize:s(),fontWeight:400,margin:"0px"}},"Your configuration is completed.")),_.createElement("div",{style:{height:"64px"}}),_.createElement("div",{style:{display:"grid",gridTemplateColumns:`repeat(${r()})`,justifyContent:"center",gap:"48px",paddingRight:"16px",paddingLeft:"16px",maxWidth:"976px",margin:"auto"}},ni.map(a=>_.createElement(ii,{key:`welcome-page-${a.title}`,card:a}))),_.createElement("div",{style:{height:"64px"}}))},ii=({card:e})=>{let{title:t,description:r,icon:o,link:s}=e,[a,n]=si(!1);return _.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"16px"}},_.createElement("div",{style:{display:"flex",alignItems:"center"}},_.createElement("a",{onPointerEnter:()=>n(!0),onPointerLeave:()=>n(!1),style:{display:"flex",alignItems:"center",color:"#fff",textDecoration:"none"},href:s},o,_.createElement("span",{style:{fontSize:"16px",fontWeight:700,marginLeft:"13px",marginRight:"14px"}},t),_.createElement("svg",{style:{transition:"transform 0.5s ease-in-out, opacity 0.2s ease-in-out",...a&&{transform:"translateX(4px)",opacity:1}},width:"12",height:"8",fill:"none",opacity:"0.5",xmlns:"http://www.w3.org/2000/svg"},_.createElement("path",{d:"M7.293.293a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1 0 1.414l-3 3a1 1 0 0 1-1.414-1.414L8.586 5H1a1 1 0 0 1 0-2h7.586L7.293 1.707a1 1 0 0 1 0-1.414Z",fill:"#fff"})))),_.createElement("span",{style:{fontSize:"12px",opacity:.5,lineHeight:"16px"}},r))};import te from"react";import{QueryClientProvider as di,QueryClient as Vs}from"@tanstack/react-query";import{ReactQueryDevtools as li}from"@tanstack/react-query-devtools";import{useEffect as ci}from"react";import{useContext as it}from"react";var ui="4.14.3",ws=()=>{let e=vr(),t=it(at),r=it(Ge),o=it(Ft),s=it(St),{i18nProvider:a}=it(Se),n=it(Qt),u=it(nt),{resources:p}=Q(),d=!!t.create||!!t.get||!!t.update,l=!!(r!=null&&r.publish)||!!(r!=null&&r.subscribe)||!!(r!=null&&r.unsubscribe),c=!!o.useHistory||!!o.Link||!!o.Prompt||!!o.useLocation||!!o.useParams,T=!!s,R=!!(a!=null&&a.changeLocale)||!!(a!=null&&a.getLocale)||!!(a!=null&&a.translate),v=!!n.close||!!n.open,U=!!u.can;return{providers:{auth:e,auditLog:d,live:l,router:c,data:T,i18n:R,notification:v,accessControl:U},version:ui,resourceCount:p.length}};var pi=e=>{let t=JSON.stringify(e||{});return typeof btoa<"u"?btoa(t):Buffer.from(t).toString("base64")},As=()=>{let e=ws();return ci(()=>{if(typeof window>"u"&&!Image)return;let t=new Image;t.src=`https://telemetry.refine.dev/telemetry?payload=${pi(e)}`},[]),null};var Ss=e=>{let t=["go","parse","back","Link"],r=Object.keys(e).filter(s=>!t.includes(s));return r.length>0?(console.warn(`Unsupported properties are found in \`routerProvider\` prop. You provided \`${r.join(", ")}\`. Supported properties are \`${t.join(", ")}\`. You may wanted to use \`legacyRouterProvider\` prop instead.`),!0):!1};import Qs from"react";var ks=e=>{let t=Qs.useRef(!1);Qs.useEffect(()=>{t.current===!1&&e&&Ss(e)&&(t.current=!0)},[e])};var mi=({legacyAuthProvider:e,authProvider:t,dataProvider:r,legacyRouterProvider:o,routerProvider:s,notificationProvider:a,accessControlProvider:n,auditLogProvider:u,resources:p,DashboardPage:d,ReadyPage:l,LoginPage:c,catchAll:T,children:R,liveProvider:v,i18nProvider:U,Title:i,Layout:y,Sider:f,Header:C,Footer:E,OffLayoutArea:m,onLiveEvent:x,options:g})=>{let{optionsWithDefaults:D,disableTelemetryWithDefault:P,reactQueryWithDefaults:h}=Sr({options:g}),b=ir(()=>{var B;return h.clientConfig instanceof Vs?h.clientConfig:new Vs({...h.clientConfig,defaultOptions:{...h.clientConfig.defaultOptions,queries:{refetchOnWindowFocus:!1,keepPreviousData:!0,...(B=h.clientConfig.defaultOptions)==null?void 0:B.queries}}})},[h.clientConfig]),I=te.useMemo(()=>typeof a=="function"?a:()=>a!=null?a:{},[a])();if(ks(s),o&&!s&&(p!=null?p:[]).length===0)return l?te.createElement(l,null):te.createElement(Zr,null);let{RouterComponent:w=te.Fragment}=s?{}:o!=null?o:{};return te.createElement(di,{client:b},te.createElement(qo,{...I},te.createElement(co,{...e!=null?e:{},isProvided:Boolean(e)},te.createElement(lo,{...t!=null?t:{},isProvided:Boolean(t)},te.createElement(Ho,{...r},te.createElement($o,{liveProvider:v},te.createElement(Yo,{value:o&&!s?"legacy":"new"},te.createElement(Xo,{router:s},te.createElement(cs,{...o},te.createElement(_o,{resources:p!=null?p:[]},te.createElement(ts,{i18nProvider:U},te.createElement(ds,{...n!=null?n:{}},te.createElement(xs,{...u!=null?u:{}},te.createElement(Fr,null,te.createElement(wo,{mutationMode:D.mutationMode,warnWhenUnsavedChanges:D.warnWhenUnsavedChanges,syncWithLocation:D.syncWithLocation,Title:i,undoableTimeout:D.undoableTimeout,catchAll:T,DashboardPage:d,LoginPage:c,Layout:y,Sider:f,Footer:E,Header:C,OffLayoutArea:m,hasDashboard:!!d,liveMode:D.liveMode,onLiveEvent:x,options:D},te.createElement(os,null,te.createElement(w,null,R,!P&&te.createElement(As,null),te.createElement(Yr,null))))))))))))))))),h.devtoolConfig===!1?null:te.createElement(li,{initialIsOpen:!1,position:"bottom-right",...h.devtoolConfig}))};import{useEffect as fi,useState as yi}from"react";var Qo=({notification:e})=>{let t=V(),{notificationDispatch:r}=He(),{open:o}=Te(),[s,a]=yi(),n=()=>{if(e.isRunning===!0&&(e.seconds===0&&e.doMutation(),e.isSilent||o==null||o({key:`${e.id}-${e.resource}-notification`,type:"progress",message:t("notifications.undoable",{seconds:Ut(e.seconds)},`You have ${Ut(e.seconds)} seconds to undo`),cancelMutation:e.cancelMutation,undoableTimeout:Ut(e.seconds)}),e.seconds>0)){s&&clearTimeout(s);let u=setTimeout(()=>{r({type:"DECREASE_NOTIFICATION_SECOND",payload:{id:e.id,seconds:e.seconds,resource:e.resource}})},1e3);a(u)}};return fi(()=>{n()},[e]),null};import Jr,{useEffect as gi}from"react";var Ti=({children:e,Layout:t,Sider:r,Header:o,Title:s,Footer:a,OffLayoutArea:n})=>{let{Layout:u,Footer:p,Header:d,Sider:l,Title:c,OffLayoutArea:T}=Vt(),R=t!=null?t:u;return Jr.createElement(R,{Sider:r!=null?r:l,Header:o!=null?o:d,Footer:a!=null?a:p,Title:s!=null?s:c,OffLayoutArea:n!=null?n:T},e,Jr.createElement(Ri,null))},Ri=()=>{let{Prompt:e}=K(),t=V(),{warnWhen:r,setWarnWhen:o}=kt(),s=a=>(a.preventDefault(),a.returnValue=t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),a.returnValue);return gi(()=>(r&&window.addEventListener("beforeunload",s),window.removeEventListener("beforeunload",s)),[r]),Jr.createElement(e,{when:r,message:t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),setWarnWhen:o})};import Pe from"react";var xi=()=>{let e=ne(),[t,r]=Pe.useState(void 0);return Pe.useEffect(()=>{t&&e(t)},[t]),Pe.useCallback(s=>{t||r(s)},[t])};function Ci({redirectOnFail:e=!0,appendCurrentPathToQuery:t=!0,children:r,fallback:o,loading:s}){var D;let a=O(),n=H(),u=Boolean(a==null?void 0:a.isProvided),p=Boolean(a==null?void 0:a.isLegacy),d=n==="legacy",l=j(),c=ne(),T=xi(),{replace:R}=se(),{useLocation:v}=K(),U=v(),{isLoading:i,isFetching:y,isSuccess:f,data:{authenticated:C,redirectTo:E}={},refetch:m}=_t({v3LegacyAuthProviderCompatible:p});Pe.useEffect(()=>{m()},[r,o]);let x=Pe.useRef({status:i?"initial":"pending",content:s!=null?s:null});y?x.current.status="pending":y||(x.current.status="settled");let g=u?p?f:C:!0;if(x.current.status==="settled")if(g)x.current.content=Pe.createElement(Pe.Fragment,null,r!=null?r:null);else if(typeof o<"u")x.current.content=Pe.createElement(Pe.Fragment,null,o);else{let P=`${d?U==null?void 0:U.pathname:l.pathname}`.replace(/(\?.*|#.*)$/,""),h=p?typeof e=="string"?e:"/login":typeof e=="string"?e:E;if(h)if(d){let b=t?`?to=${encodeURIComponent(P)}`:"";R(`${h}${b}`)}else T({to:h,query:t?{to:(D=l.params)!=null&&D.to?l.params.to:c({to:P,options:{keepQuery:!0},type:"path"})}:void 0,type:"replace"})}return u?Pe.createElement(Pe.Fragment,null,x.current.content):Pe.createElement(Pe.Fragment,null,r!=null?r:null)}import{useEffect as Pi}from"react";var Yr=()=>{let{useLocation:e}=K(),{checkAuth:t}=X(),r=e();return Pi(()=>{t==null||t().catch(()=>!1)},[r==null?void 0:r.pathname]),null};import xt from"react";var bi=({resource:e,action:t,params:r,fallback:o,children:s,...a})=>{var m,x;let n=H(),{resources:u}=Q(),{useParams:p}=K(),{resource:d,id:l,action:c}=j(),{resource:T,id:R,action:v}=p(),U=d==null?void 0:d.name,i=!e||e===(n==="legacy"?T:U)?(m=r==null?void 0:r.id)!=null?m:n==="legacy"?R:l:r==null?void 0:r.id,y=e!=null?e:n==="legacy"?T:U,f,C=Ye();if(n==="legacy")y&&(f=C(y));else if(e){let g=$(e,u);g?f=g:f={name:e,route:e}}else if(typeof d=="string"){let g=$(d,u);g?f=g:f={name:d,route:d}}else f=d;let{data:E}=ls({resource:e!=null?e:f==null?void 0:f.name,action:(x=t!=null?t:n==="legacy"?v:c)!=null?x:"",params:r!=null?r:{id:i,resource:f}});return E!=null&&E.can?xt.isValidElement(s)?xt.cloneElement(s,a):xt.createElement(xt.Fragment,null,s):(E==null?void 0:E.can)===!1?xt.createElement(xt.Fragment,null,o!=null?o:null):null};import Ct,{useEffect as hi}from"react";var Bs=[`
    .banner {
        display: flex;
        @media (max-width: 1000px) {
            display: none;
        }
    }`,`
    .banner::before,
    .banner::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }
    `,`
    .banner::before {
        background-image: linear-gradient(
            270deg,
            rgba(255, 76, 77, 0.35) 0%,
            rgba(255, 153, 51, 0.35) 12.5%,
            rgba(255, 191, 0, 0.35) 25%,
            rgba(38, 217, 127, 0.35) 37.5%,
            rgba(71, 235, 235, 0.35) 50%,
            rgba(0, 128, 255, 0.35) 62.5%,
            rgba(51, 51, 255, 0.35) 75%,
            rgba(128, 0, 255, 0.35) 87.5%,
            rgba(237, 94, 201, 0.35) 100%
        );
        background-position: 0 0;
        background-size: 200% 100%;
        background-repeat: repeat-x;
        animation: bgpos 4s linear infinite;
      }
    `,`
    .banner::after {
        background: linear-gradient(
          180deg,
          rgba(13, 13, 13, 0.85) 0%,
          rgba(13, 13, 13, 0) 100%
        );
    }
    `,`
    @keyframes bgpos {
        0% {
            background-position: 0 0;
        }

        100% {
            background-position: -200% 0;
        }
    }
    `,`
    .gh-link, .gh-link:hover, .gh-link:active, .gh-link:visited, .gh-link:focus {
        text-decoration: none;
        z-index: 9;
    }
    `];var vi=()=>(hi(()=>{let e=document.createElement("style");document.head.appendChild(e),Bs.forEach(t=>{var r;return(r=e.sheet)==null?void 0:r.insertRule(t,e.sheet.cssRules.length)})},[]),Ct.createElement("div",{className:"banner",style:{flexDirection:"row",justifyContent:"center",alignItems:"center",position:"relative",padding:"8px 16px",backgroundColor:"#0d0d0d",borderBottom:"1px solid rgba(255, 255, 255, 0.15)"}},Ct.createElement("div",{style:{width:"200px"}}),Ct.createElement("a",{className:"gh-link",href:"https://s.refine.dev/github-support",target:"_blank",rel:"noreferrer"},Ct.createElement("div",{className:"content",style:{position:"relative",zIndex:2,color:"#fff",display:"flex",flexDirection:"row",gap:"8px"}},Ct.createElement("span",{className:"wizard",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"32px",height:"32px",fontSize:"32px",lineHeight:"32px"}},"\u{1F9D9}\u200D\u2642\uFE0F"),Ct.createElement("span",{className:"text",style:{padding:"4px 0",fontSize:"16px",lineHeight:"24px",textShadow:"0px 0px 4px rgba(255, 255, 255, 0.5)"}},"refine grants your wishes! Please give us a \u2B50\uFE0F on GitHub to keep the magic going.")))));export{oi as AuthPage,Ci as Authenticated,bi as CanAccess,ti as ErrorComponent,vi as GitHubBanner,Ti as LayoutWrapper,Ar as LoginPage,Zr as ReadyPage,mi as Refine,Ze as ResourceContext,Yr as RouteChangeHandler,Qo as UndoableQueue,ai as WelcomePage,Lo as createTreeView,Xs as file2Base64,Js as getDefaultFilter,Ys as getDefaultSortOrder,rr as getNextPageParam,or as getPreviousPageParam,Uo as handleUseParams,jt as importCSVMapper,sr as legacyResourceTransform,Ir as matchResourceFromRoute,Zt as parseTableParams,Zs as parseTableParamsFromQuery,L as pickNotDeprecated,er as routeGenerator,Xt as setInitialFilters,qt as setInitialSorters,Yt as stringifyTableParams,ft as unionFilters,Jt as unionSorters,O as useActiveAuthProvider,vn as useApiUrl,Ws as useAuthenticated,Wr as useBack,kR as useBreadcrumb,ls as useCan,hT as useCanWithoutCache,He as useCancelNotification,Ks as useCheckError,At as useCreate,Hr as useCreateMany,En as useCustom,Mn as useCustomMutation,z as useDataProvider,fn as useDelete,hn as useDeleteMany,Ay as useExport,Pr as useForgotPassword,Ky as useForm,yr as useGetIdentity,ca as useGetLocale,Bt as useGetToPath,ne as useGo,ee as useHandleNotification,wg as useImport,Sn as useInfiniteList,Ue as useInvalidate,_t as useIsAuthenticated,vr as useIsExistAuthentication,st as useLink,It as useList,Wo as useLiveMode,Ee as useLog,fR as useLogList,Et as useLogin,zt as useLogout,kr as useMany,Xa as useMenu,G as useMeta,Qg as useModal,Ae as useMutationMode,se as useNavigation,Te as useNotification,q as useOnError,wt as useOne,Or as useParse,j as useParsed,Fs as usePermissions,De as usePublish,as as useRedirectionAfterSubmission,Vt as useRefineContext,xr as useRegister,Q as useResource,je as useResourceSubscription,Ye as useResourceWithRoute,K as useRouterContext,H as useRouterType,VT as useSelect,sa as useSetLocale,Pg as useShow,Sm as useSubscription,Gr as useSyncWithLocation,_T as useTable,fa as useTitle,Aa as useToPath,V as useTranslate,Nr as useUpdate,xn as useUpdateMany,hr as useUpdatePassword,kt as useWarnAboutChange,yt as userFriendlyResourceName};
//# sourceMappingURL=index.js.map